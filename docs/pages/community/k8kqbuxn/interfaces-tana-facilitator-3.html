<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TANA ‚Äî Community Platform</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' rx='24' fill='%23593934'/%3E%3Cg transform='translate(10,10)'%3E%3Cpath d='M50 0 L95 25 L95 35 L55 13 L55 100 L45 100 L45 13 L5 35 L5 25 Z' fill='%23edd6b7' opacity='0.9'/%3E%3Cpath d='M25 40 L70 15 L70 25 L30 47 L30 100 L20 100 L20 47 Z' fill='%23edd6b7' opacity='0.6'/%3E%3Cpath d='M65 50 L65 100 L75 100 L75 45 L100 32 L100 25 Z' fill='%23edd6b7' opacity='0.35'/%3E%3C/g%3E%3C/svg%3E">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=Playfair+Display:wght@500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CSS VARIABLES
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root {
  --brown-deep: #593934;
  --brown-warm: #af815f;
  --olive: #6b5f38;
  --cream: #edd6b7;
  --cream-light: #f5ebe0;
  --cream-pale: #faf6f1;
  --page-bg: #f8f4ef;
  --card-bg: #ffffff;
  --card-border: rgba(175,129,95,0.12);
  --card-shadow: 0 1px 4px rgba(89,57,52,0.06);
  --card-shadow-hover: 0 4px 16px rgba(89,57,52,0.1);
  --text-primary: #3a2e2a;
  --text-secondary: #7a6a62;
  --text-muted: #a89888;
  --text-heading: #593934;
  --accent: #af815f;
  --accent-light: rgba(175,129,95,0.12);
  --danger: #c0604a;
  --success: #6b8a5e;
  --info: #5b7a8a;
  --warning: #c49a4a;
  --sidebar-width: 220px;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; overflow:hidden; }
body {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--page-bg); color: var(--text-primary);
  display: flex; height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê */
.sidebar {
  width: var(--sidebar-width); min-width: var(--sidebar-width);
  background: var(--brown-deep); display: flex; flex-direction: column;
  height: 100vh; overflow-y: auto; position: relative;
}
.sidebar::after {
  content:''; position:absolute; bottom:0; left:0; right:0; height:80px;
  background: linear-gradient(to top, rgba(60,38,34,0.4), transparent);
  pointer-events:none; z-index:1;
}
.sidebar-logo { padding: 22px 24px 18px; display:flex; align-items:center; }
.sidebar-nav {
  flex:1; padding:4px 10px; display:flex; flex-direction:column; gap:1px;
}
.nav-item {
  display:flex; align-items:center; gap:12px; padding:10px 14px;
  border-radius:10px; text-decoration:none; color:var(--cream);
  font-size:14px; font-weight:400; transition:all 0.2s ease;
  cursor:pointer; position:relative; border:none; background:none;
  width:100%; text-align:left; font-family:inherit;
}
.nav-item:hover { background:rgba(237,214,183,0.1); }
.nav-item.active { background:rgba(237,214,183,0.15); font-weight:500; }
.nav-item.active::before {
  content:''; position:absolute; left:0; top:8px; bottom:8px;
  width:3px; background:var(--brown-warm); border-radius:0 3px 3px 0;
}
.nav-item svg { color:rgba(237,214,183,0.7); flex-shrink:0; }
.nav-item.active svg { color:var(--cream); }
.nav-spacer { flex:1; }
.nav-divider { height:1px; background:rgba(237,214,183,0.1); margin:6px 14px; }

/* ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê */
.main-wrapper { flex:1; display:flex; overflow:hidden; }
.main-content {
  flex:1; overflow-y:auto; padding:28px 32px 40px;
  transition: opacity 0.2s ease;
}
.main-content::-webkit-scrollbar { width:6px; }
.main-content::-webkit-scrollbar-track { background:transparent; }
.main-content::-webkit-scrollbar-thumb { background:rgba(175,129,95,0.18); border-radius:3px; }
.sidebar::-webkit-scrollbar { width:4px; }
.sidebar::-webkit-scrollbar-track { background:transparent; }
.sidebar::-webkit-scrollbar-thumb { background:rgba(237,214,183,0.15); border-radius:2px; }

/* ‚ïê‚ïê‚ïê SCREEN CONTAINERS ‚ïê‚ïê‚ïê */
.screen { display:none; }
.screen.active { display:block; animation: fadeIn 0.35s ease both; }

/* ‚ïê‚ïê‚ïê PAGE HEADER ‚ïê‚ïê‚ïê */
.page-header {
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:24px; gap:16px;
}
.page-header-left { display:flex; align-items:center; gap:14px; }
.page-icon {
  width:44px; height:44px; border-radius:12px; background:var(--accent-light);
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
}
.page-title {
  font-family:'Playfair Display', Georgia, serif;
  font-size:22px; font-weight:700; color:var(--text-heading);
}
.page-subtitle { font-size:13px; color:var(--text-muted); margin-top:1px; }
.header-actions { display:flex; gap:8px; }

/* ‚ïê‚ïê‚ïê BUTTONS ‚ïê‚ïê‚ïê */
.btn {
  display:inline-flex; align-items:center; gap:7px;
  padding:9px 18px; border-radius:10px; border:1.5px solid var(--card-border);
  background:var(--card-bg); color:var(--text-primary);
  font-size:13px; font-weight:500; font-family:inherit;
  cursor:pointer; transition:all 0.2s ease; white-space:nowrap;
}
.btn:hover { border-color:var(--brown-warm); }
.btn-primary {
  background:var(--brown-deep); color:var(--cream); border-color:var(--brown-deep);
}
.btn-primary:hover { background:#4a302c; }
.btn-sm { padding:6px 12px; font-size:12px; border-radius:8px; }
.btn-ghost { border:none; background:transparent; color:var(--text-secondary); }
.btn-ghost:hover { color:var(--text-primary); background:var(--accent-light); }

/* ‚ïê‚ïê‚ïê TABS ‚ïê‚ïê‚ïê */
.tabs { display:flex; gap:0; border-bottom:1px solid var(--card-border); margin-bottom:20px; }
.tab-btn {
  padding:10px 18px; border:none; background:transparent;
  color:var(--text-muted); font-size:13.5px; font-weight:500;
  font-family:inherit; cursor:pointer; position:relative;
  transition:color 0.2s ease; border-bottom:2px solid transparent; margin-bottom:-1px;
}
.tab-btn:hover { color:var(--text-primary); }
.tab-btn.active { color:var(--brown-deep); border-bottom-color:var(--brown-warm); }

/* ‚ïê‚ïê‚ïê CARDS ‚ïê‚ïê‚ïê */
.card {
  background:var(--card-bg); border-radius:14px; border:1px solid var(--card-border);
  box-shadow:var(--card-shadow); transition:all 0.2s ease;
}
.card:hover { box-shadow:var(--card-shadow-hover); }
.card-body { padding:20px; }

/* ‚ïê‚ïê‚ïê TABLE ‚ïê‚ïê‚ïê */
.data-table { width:100%; border-collapse:collapse; }
.data-table th {
  text-align:left; padding:10px 16px; font-size:11.5px; font-weight:600;
  letter-spacing:0.06em; text-transform:uppercase; color:var(--text-muted);
  border-bottom:1px solid var(--card-border); background:var(--cream-pale);
}
.data-table th:first-child { border-radius:10px 0 0 0; }
.data-table th:last-child { border-radius:0 10px 0 0; }
.data-table td {
  padding:12px 16px; font-size:13.5px; color:var(--text-primary);
  border-bottom:1px solid var(--card-border); vertical-align:middle;
}
.data-table tr { transition:background 0.15s ease; cursor:pointer; }
.data-table tbody tr:hover { background:var(--accent-light); }

/* ‚ïê‚ïê‚ïê BADGES ‚ïê‚ïê‚ïê */
.badge {
  display:inline-flex; align-items:center; gap:4px; padding:3px 10px;
  border-radius:20px; font-size:11.5px; font-weight:600; letter-spacing:0.02em;
}
.badge-open { background:rgba(107,138,94,0.12); color:var(--success); }
.badge-pending { background:rgba(196,154,74,0.12); color:var(--warning); }
.badge-closed { background:rgba(168,152,136,0.12); color:var(--text-muted); }
.badge-active { background:rgba(175,129,95,0.12); color:var(--brown-warm); }
.badge-danger { background:rgba(192,96,74,0.1); color:var(--danger); }
.badge-info { background:rgba(91,122,138,0.12); color:var(--info); }

/* ‚ïê‚ïê‚ïê STAT CARDS ‚ïê‚ïê‚ïê */
.stats-row { display:grid; grid-template-columns:repeat(auto-fit, minmax(160px,1fr)); gap:14px; margin-bottom:20px; }
.stat-card {
  background:var(--card-bg); border-radius:14px; padding:18px 20px;
  border:1px solid var(--card-border); box-shadow:var(--card-shadow);
}
.stat-label { font-size:12px; font-weight:500; color:var(--text-muted); margin-bottom:6px; text-transform:uppercase; letter-spacing:0.06em; }
.stat-value {
  font-family:'Playfair Display', Georgia, serif;
  font-size:28px; font-weight:600; color:var(--text-heading); line-height:1;
}
.stat-change { font-size:12px; margin-top:6px; font-weight:500; }
.stat-change.up { color:var(--success); }
.stat-change.down { color:var(--danger); }

/* ‚ïê‚ïê‚ïê AVATAR ‚ïê‚ïê‚ïê */
.avatar {
  width:36px; height:36px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-size:13px; font-weight:600; color:#fff; flex-shrink:0;
}

/* ‚ïê‚ïê‚ïê FORM ELEMENTS ‚ïê‚ïê‚ïê */
.form-group { margin-bottom:18px; }
.form-label { display:block; font-size:13px; font-weight:500; color:var(--text-secondary); margin-bottom:6px; }
.form-input {
  width:100%; padding:10px 14px; font-size:14px; font-family:inherit;
  color:var(--text-primary); background:var(--card-bg);
  border:1.5px solid var(--card-border); border-radius:10px; outline:none;
  transition:border-color 0.2s ease, box-shadow 0.2s ease;
}
.form-input:focus { border-color:var(--brown-warm); box-shadow:0 0 0 3px rgba(175,129,95,0.1); }
textarea.form-input { min-height:80px; resize:vertical; line-height:1.5; }
.form-hint { font-size:12px; color:var(--text-muted); margin-top:4px; }

/* ‚ïê‚ïê‚ïê TOGGLE SWITCH ‚ïê‚ïê‚ïê */
.toggle-row {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 0; border-bottom:1px solid var(--card-border);
}
.toggle-row:last-child { border-bottom:none; }
.toggle-info { flex:1; }
.toggle-title { font-size:14px; font-weight:500; color:var(--text-primary); }
.toggle-desc { font-size:12.5px; color:var(--text-muted); margin-top:2px; }
.toggle-switch {
  width:44px; height:24px; border-radius:12px; background:#d4c8bc;
  cursor:pointer; position:relative; transition:background 0.2s ease; flex-shrink:0;
  border:none; padding:0;
}
.toggle-switch::after {
  content:''; position:absolute; left:2px; top:2px;
  width:20px; height:20px; border-radius:50%; background:#fff;
  box-shadow:0 1px 3px rgba(0,0,0,0.15); transition:transform 0.2s ease;
}
.toggle-switch.on { background:var(--success); }
.toggle-switch.on::after { transform:translateX(20px); }

/* ‚ïê‚ïê‚ïê SEARCH ‚ïê‚ïê‚ïê */
.search-box {
  display:flex; align-items:center; gap:10px; padding:0 14px;
  height:40px; border-radius:10px; background:var(--card-bg);
  border:1.5px solid var(--card-border); transition:border-color 0.2s ease;
  max-width:280px;
}
.search-box:focus-within { border-color:var(--brown-warm); }
.search-box input {
  border:none; outline:none; background:transparent; font-size:13.5px;
  font-family:inherit; color:var(--text-primary); flex:1; width:100%;
}
.search-box input::placeholder { color:var(--text-muted); }

/* ‚ïê‚ïê‚ïê POST / COMMENT ‚ïê‚ïê‚ïê */
.post-card { margin-bottom:16px; }
.post-header { display:flex; align-items:center; gap:12px; margin-bottom:10px; }
.post-meta { flex:1; }
.post-author { font-size:14px; font-weight:600; color:var(--text-primary); }
.post-time { font-size:12px; color:var(--text-muted); }
.post-body { font-size:14px; line-height:1.6; color:var(--text-secondary); margin-bottom:12px; }
.post-actions { display:flex; gap:16px; padding-top:10px; border-top:1px solid var(--card-border); }
.post-action {
  display:flex; align-items:center; gap:5px; font-size:12.5px; font-weight:500;
  color:var(--text-muted); cursor:pointer; border:none; background:none;
  font-family:inherit; padding:4px 0; transition:color 0.2s ease;
}
.post-action:hover { color:var(--brown-warm); }

/* ‚ïê‚ïê‚ïê CHAT ‚ïê‚ïê‚ïê */
.chat-container {
  display:flex; flex-direction:column; height:calc(100vh - 180px);
  background:var(--card-bg); border-radius:14px; border:1px solid var(--card-border);
  overflow:hidden;
}
.chat-messages { flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:12px; }
.chat-messages::-webkit-scrollbar { width:4px; }
.chat-messages::-webkit-scrollbar-thumb { background:rgba(175,129,95,0.15); border-radius:2px; }
.chat-bubble {
  max-width:75%; padding:12px 16px; border-radius:14px;
  font-size:13.5px; line-height:1.5;
}
.chat-bubble.user {
  align-self:flex-end; background:var(--brown-deep); color:var(--cream);
  border-bottom-right-radius:4px;
}
.chat-bubble.ai {
  align-self:flex-start; background:var(--cream-light); color:var(--text-primary);
  border-bottom-left-radius:4px;
}
.chat-bubble .ai-label {
  font-size:10.5px; font-weight:600; text-transform:uppercase; letter-spacing:0.08em;
  color:var(--brown-warm); margin-bottom:4px;
}
.chat-input-bar {
  display:flex; align-items:center; gap:10px; padding:14px 16px;
  border-top:1px solid var(--card-border); background:var(--cream-pale);
}
.chat-input {
  flex:1; padding:10px 14px; font-size:14px; font-family:inherit;
  background:var(--card-bg); border:1.5px solid var(--card-border);
  border-radius:10px; outline:none; color:var(--text-primary);
}
.chat-input:focus { border-color:var(--brown-warm); }
.chat-send {
  width:40px; height:40px; border-radius:10px; border:none;
  background:var(--brown-deep); color:var(--cream); cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:background 0.2s ease;
}
.chat-send:hover { background:#4a302c; }

/* ‚ïê‚ïê‚ïê PROGRESS BAR ‚ïê‚ïê‚ïê */
.progress-bar { height:6px; background:var(--cream-light); border-radius:3px; overflow:hidden; }
.progress-fill { height:100%; border-radius:3px; transition:width 0.6s cubic-bezier(0.22,1,0.36,1); }

/* ‚ïê‚ïê‚ïê VOTE BAR ‚ïê‚ïê‚ïê */
.vote-bar { display:flex; gap:8px; align-items:center; margin-top:8px; }
.vote-btn {
  display:flex; align-items:center; gap:5px; padding:6px 14px;
  border-radius:8px; border:1.5px solid var(--card-border);
  background:transparent; font-size:12.5px; font-weight:500;
  font-family:inherit; cursor:pointer; color:var(--text-secondary);
  transition:all 0.2s ease;
}
.vote-btn:hover { border-color:var(--brown-warm); color:var(--brown-deep); }
.vote-btn.voted { border-color:var(--success); background:rgba(107,138,94,0.08); color:var(--success); }
.vote-count { font-size:12px; color:var(--text-muted); }

/* ‚ïê‚ïê‚ïê SECTION CARD ‚ïê‚ïê‚ïê */
.section-card { margin-bottom:20px; }
.section-card .card-body > h3 {
  font-size:15px; font-weight:600; color:var(--text-heading); margin-bottom:14px;
}

/* ‚ïê‚ïê‚ïê LIST ITEM ‚ïê‚ïê‚ïê */
.list-item {
  display:flex; align-items:center; gap:14px; padding:12px 0;
  border-bottom:1px solid var(--card-border);
}
.list-item:last-child { border-bottom:none; }
.list-item-icon {
  width:40px; height:40px; border-radius:10px;
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
}
.list-item-content { flex:1; min-width:0; }
.list-item-title { font-size:14px; font-weight:500; color:var(--text-primary); }
.list-item-sub { font-size:12.5px; color:var(--text-muted); margin-top:1px; }

/* ‚ïê‚ïê‚ïê SECURITY KEY ‚ïê‚ïê‚ïê */
.security-item {
  display:flex; align-items:center; gap:14px; padding:14px 16px;
  background:var(--cream-pale); border-radius:10px; margin-bottom:8px;
}
.security-item-icon {
  width:40px; height:40px; border-radius:10px; background:var(--card-bg);
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
  border:1px solid var(--card-border);
}
.security-item-info { flex:1; }
.security-item-name { font-size:14px; font-weight:500; color:var(--text-primary); }
.security-item-date { font-size:12px; color:var(--text-muted); }

/* ‚ïê‚ïê‚ïê TWO COLUMN ‚ïê‚ïê‚ïê */
.two-col { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.three-col { display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px; }

/* ‚ïê‚ïê‚ïê TOKEN DISPLAY ‚ïê‚ïê‚ïê */
.token-hero {
  text-align:center; padding:32px 20px; margin-bottom:20px;
  background:linear-gradient(135deg, var(--brown-deep) 0%, #6b4a3a 100%);
  border-radius:16px; color:var(--cream);
}
.token-balance {
  font-family:'Playfair Display', Georgia, serif;
  font-size:48px; font-weight:700; line-height:1; margin-bottom:4px;
}
.token-label { font-size:13px; opacity:0.7; margin-bottom:16px; }
.token-actions { display:flex; gap:10px; justify-content:center; }
.token-btn {
  padding:8px 20px; border-radius:20px; border:1.5px solid rgba(237,214,183,0.3);
  background:transparent; color:var(--cream); font-size:13px; font-weight:500;
  font-family:inherit; cursor:pointer; transition:all 0.2s ease;
}
.token-btn:hover { background:rgba(237,214,183,0.1); border-color:var(--cream); }

/* ‚ïê‚ïê‚ïê FINANCIALS CHART PLACEHOLDER ‚ïê‚ïê‚ïê */
.chart-placeholder {
  height:200px; border-radius:12px; background:var(--cream-pale);
  display:flex; align-items:center; justify-content:center; position:relative;
  overflow:hidden;
}
.chart-bars { display:flex; align-items:flex-end; gap:8px; height:140px; padding:0 20px; }
.chart-bar {
  width:28px; border-radius:4px 4px 0 0;
  transition:height 0.6s cubic-bezier(0.22,1,0.36,1);
}

/* ‚ïê‚ïê‚ïê ON-CHAIN ‚ïê‚ïê‚ïê */
.onchain-hash {
  font-family:'JetBrains Mono', monospace; font-size:12px; color:var(--info);
  background:rgba(91,122,138,0.08); padding:3px 8px; border-radius:4px;
  word-break:break-all;
}

/* ‚ïê‚ïê‚ïê MODAL / SLIDE PANEL ‚ïê‚ïê‚ïê */
.modal-overlay {
  position:fixed; inset:0; z-index:1000;
  background:rgba(58,46,42,0.45); backdrop-filter:blur(4px);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none;
  transition:opacity 0.25s ease;
}
.modal-overlay.open { opacity:1; pointer-events:auto; }
.modal-panel {
  background:var(--card-bg); border-radius:18px;
  box-shadow:0 20px 60px rgba(89,57,52,0.18);
  width:90%; max-width:680px; max-height:88vh;
  display:flex; flex-direction:column;
  transform:translateY(16px) scale(0.97);
  transition:transform 0.3s cubic-bezier(0.22,1,0.36,1);
  overflow:hidden;
}
.modal-overlay.open .modal-panel { transform:translateY(0) scale(1); }
.modal-panel.wide { max-width:840px; }
.modal-header {
  display:flex; align-items:center; justify-content:space-between;
  padding:20px 24px 16px; border-bottom:1px solid var(--card-border);
  flex-shrink:0;
}
.modal-header-left { display:flex; align-items:center; gap:12px; }
.modal-title {
  font-family:'Playfair Display', Georgia, serif;
  font-size:19px; font-weight:700; color:var(--text-heading);
}
.modal-subtitle { font-size:12.5px; color:var(--text-muted); margin-top:1px; }
.modal-close {
  width:36px; height:36px; border-radius:10px; border:none;
  background:var(--cream-light); color:var(--text-muted);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:all 0.2s ease; flex-shrink:0;
}
.modal-close:hover { background:var(--accent-light); color:var(--text-primary); }
.modal-body {
  padding:24px; overflow-y:auto; flex:1;
}
.modal-body::-webkit-scrollbar { width:4px; }
.modal-body::-webkit-scrollbar-thumb { background:rgba(175,129,95,0.15); border-radius:2px; }
.modal-footer {
  display:flex; align-items:center; justify-content:flex-end; gap:10px;
  padding:16px 24px; border-top:1px solid var(--card-border);
  flex-shrink:0; background:var(--cream-pale);
}
.modal-footer .btn { min-width:100px; justify-content:center; }

/* Form layout inside modals */
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.form-row.three { grid-template-columns:1fr 1fr 1fr; }
.form-section { margin-bottom:24px; }
.form-section-title {
  font-size:14px; font-weight:600; color:var(--text-heading);
  margin-bottom:12px; padding-bottom:8px;
  border-bottom:1px solid var(--card-border);
  display:flex; align-items:center; gap:8px;
}
.form-select {
  width:100%; padding:10px 14px; font-size:14px; font-family:inherit;
  color:var(--text-primary); background:var(--card-bg);
  border:1.5px solid var(--card-border); border-radius:10px; outline:none;
  transition:border-color 0.2s ease; appearance:none; cursor:pointer;
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23a89888' stroke-width='2' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 14px center;
}
.form-select:focus { border-color:var(--brown-warm); }
.form-checkbox-row {
  display:flex; align-items:center; gap:10px; padding:8px 0;
}
.form-checkbox {
  width:20px; height:20px; border-radius:6px;
  border:2px solid var(--card-border); background:transparent;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:all 0.2s ease; flex-shrink:0;
}
.form-checkbox.checked { background:var(--success); border-color:var(--success); }
.form-checkbox-label { font-size:13.5px; color:var(--text-primary); cursor:pointer; }
.form-tag-input {
  display:flex; flex-wrap:wrap; gap:6px; padding:8px 12px;
  min-height:44px; border:1.5px solid var(--card-border);
  border-radius:10px; background:var(--card-bg); align-items:center;
  transition:border-color 0.2s ease; cursor:text;
}
.form-tag-input:focus-within { border-color:var(--brown-warm); }
.form-tag {
  display:inline-flex; align-items:center; gap:4px;
  padding:3px 10px; border-radius:6px; font-size:12px; font-weight:500;
  background:var(--accent-light); color:var(--olive);
}
.form-tag button {
  background:none; border:none; color:var(--text-muted); cursor:pointer;
  font-size:14px; line-height:1; padding:0 0 0 2px;
}
.form-tag-input input {
  border:none; outline:none; background:transparent; font-size:13px;
  font-family:inherit; color:var(--text-primary); flex:1; min-width:80px;
}
.char-count { font-size:11px; color:var(--text-muted); text-align:right; margin-top:2px; }

/* Detail view specifics */
.detail-header {
  display:flex; align-items:flex-start; justify-content:space-between;
  margin-bottom:20px; gap:16px;
}
.detail-title {
  font-family:'Playfair Display', Georgia, serif;
  font-size:20px; font-weight:700; color:var(--text-heading); line-height:1.3;
}
.detail-meta {
  display:flex; flex-wrap:wrap; gap:12px; margin-top:8px;
  font-size:12.5px; color:var(--text-muted);
}
.detail-meta-item { display:flex; align-items:center; gap:4px; }
.detail-section {
  margin-bottom:20px; padding-bottom:20px;
  border-bottom:1px solid var(--card-border);
}
.detail-section:last-child { border-bottom:none; margin-bottom:0; padding-bottom:0; }
.detail-section-title {
  font-size:13px; font-weight:600; text-transform:uppercase;
  letter-spacing:0.06em; color:var(--text-muted); margin-bottom:10px;
}
.vote-results {
  display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:14px;
}
.vote-result-card {
  text-align:center; padding:14px; border-radius:12px; background:var(--cream-pale);
}
.vote-result-value {
  font-family:'Playfair Display', Georgia, serif;
  font-size:28px; font-weight:700; line-height:1;
}
.vote-result-label { font-size:11.5px; color:var(--text-muted); margin-top:4px; font-weight:500; }
.comment-item {
  display:flex; gap:10px; padding:12px 0;
  border-bottom:1px solid var(--card-border);
}
.comment-item:last-child { border-bottom:none; }
.comment-body { font-size:13.5px; line-height:1.5; color:var(--text-secondary); }
.comment-author { font-size:13px; font-weight:600; color:var(--text-primary); }
.comment-time { font-size:11.5px; color:var(--text-muted); margin-left:8px; }

/* Timeline */
.timeline-item {
  display:flex; gap:14px; padding:10px 0; position:relative;
}
.timeline-item::before {
  content:''; position:absolute; left:15px; top:38px; bottom:-10px;
  width:1px; background:var(--card-border);
}
.timeline-item:last-child::before { display:none; }
.timeline-dot {
  width:30px; height:30px; border-radius:50%; flex-shrink:0;
  display:flex; align-items:center; justify-content:center;
  background:var(--cream-light); z-index:1;
}
.timeline-content { flex:1; padding-top:3px; }
.timeline-text { font-size:13px; color:var(--text-secondary); }
.timeline-date { font-size:11.5px; color:var(--text-muted); margin-top:2px; }

/* ‚ïê‚ïê‚ïê ANIMATIONS ‚ïê‚ïê‚ïê */
@keyframes fadeIn {
  from { opacity:0; transform:translateY(6px); }
  to { opacity:1; transform:translateY(0); }
}
@keyframes slideIn {
  from { opacity:0; transform:translateX(-8px); }
  to { opacity:1; transform:translateX(0); }
}

/* ‚ïê‚ïê‚ïê RESPONSIVE ‚ïê‚ïê‚ïê */
@media (max-width:1100px) {
  .two-col, .three-col { grid-template-columns:1fr; }
}
@media (max-width:768px) {
  .sidebar { width:60px; min-width:60px; }
  .sidebar-logo svg { width:28px; height:28px; }
  .sidebar-logo { padding:18px 16px; }
  .nav-item span { display:none; }
  .nav-item { justify-content:center; padding:10px; }
  .nav-item.active::before { display:none; }
  .main-content { padding:20px 16px; }
  .stats-row { grid-template-columns:1fr 1fr; }
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="sidebar">
  <div class="sidebar-logo">
    <svg width="48" height="48" viewBox="0 0 120 120" fill="none">
      <g transform="translate(10,10)">
        <path d="M50 0 L95 25 L95 35 L55 13 L55 100 L45 100 L45 13 L5 35 L5 25 Z" fill="#edd6b7" opacity="0.9"/>
        <path d="M25 40 L70 15 L70 25 L30 47 L30 100 L20 100 L20 47 Z" fill="#edd6b7" opacity="0.6"/>
        <path d="M65 50 L65 100 L75 100 L75 45 L100 32 L100 25 Z" fill="#edd6b7" opacity="0.35"/>
      </g>
    </svg>
  </div>
  <div class="sidebar-nav" id="sidebarNav"></div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="main-wrapper">
  <main class="main-content" id="mainContent"></main>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal-panel" id="modalPanel"></div>
</div>

<script>
// ‚ïê‚ïê‚ïê ICON HELPER ‚ïê‚ïê‚ïê
function I(name,s=20,c='currentColor',sw=1.8){
const m={
home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>',
zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>',
chat:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>',
users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',
smile:'<circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/>',
git:'<circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M6 21V9a9 9 0 0 0 9 9"/>',
folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>',
docs:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>',
token:'<circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/>',
pie:'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/>',
dollar:'<line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>',
search:'<circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>',
settings:'<circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.26.6.85 1 1.51 1H21a2 2 0 0 1 0 4h-.09c-.66 0-1.25.4-1.51 1z"/>',
logout:'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>',
check:'<polyline points="20 6 9 17 4 12"/>',
plus:'<line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>',
chevron:'<polyline points="9 18 15 12 9 6"/>',
file:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>',
shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>',
key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>',
lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>',
bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/>',
globe:'<circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>',
heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>',
send:'<line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>',
download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>',
upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>',
user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>',
building:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><line x1="9" y1="22" x2="9" y2="2"/><line x1="15" y1="22" x2="15" y2="2"/><line x1="4" y1="12" x2="20" y2="12"/>',
rss:'<path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>',
thumbsUp:'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/>',
msgCircle:'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>',
link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>',
fingerprint:'<path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10"/><path d="M12 2a14.5 14.5 0 0 0 0 20"/><path d="M2 12h4"/><circle cx="12" cy="12" r="2"/>',
smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/>',
};
return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" stroke="${c}" stroke-width="${sw}" stroke-linecap="round" stroke-linejoin="round">${m[name]||''}</svg>`;
}

// ‚ïê‚ïê‚ïê NAV CONFIG ‚ïê‚ïê‚ïê
const NAV=[
  {id:'home',icon:'home',label:'Home'},
  {id:'whatsup',icon:'zap',label:"What's Up?"},
  {id:'conversations',icon:'chat',label:'Conversations'},
  {id:'contacts',icon:'users',label:'Contacts'},
  {id:'opportunities',icon:'smile',label:'Opportunities'},
  {id:'decisions',icon:'git',label:'Decisions'},
  {id:'projects',icon:'folder',label:'Projects'},
  {id:'docs',icon:'docs',label:'Docs'},
  {id:'tokens',icon:'token',label:'Tokens'},
  {id:'operations',icon:'pie',label:'Operations'},
  {id:'financials',icon:'dollar',label:'Financials'},
  {id:'reports',icon:'search',label:'Reports'},
  {id:'_spacer'},
  {id:'_divider'},
  {id:'settings',icon:'settings',label:'Settings'},
  {id:'logout',icon:'logout',label:'Log Out'},
];

// Build sidebar
const sidebarNav=document.getElementById('sidebarNav');
NAV.forEach(n=>{
  if(n.id==='_spacer'){sidebarNav.innerHTML+='<div class="nav-spacer"></div>';return;}
  if(n.id==='_divider'){sidebarNav.innerHTML+='<div class="nav-divider"></div>';return;}
  const cls=n.id==='home'?'nav-item active':'nav-item';
  sidebarNav.innerHTML+=`<button class="${cls}" data-nav="${n.id}" onclick="navigate('${n.id}')">${I(n.icon,20)}<span>${n.label}</span></button>`;
});

// ‚ïê‚ïê‚ïê NAVIGATION ‚ïê‚ïê‚ïê
let currentPage='home';
function navigate(id){
  if(id==='logout')return;
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.toggle('active',n.dataset.nav===id));
  currentPage=id;
  render();
}

// ‚ïê‚ïê‚ïê RENDER ‚ïê‚ïê‚ïê
const mc=document.getElementById('mainContent');
function render(){
  mc.style.opacity='0';
  setTimeout(()=>{
    mc.innerHTML=pages[currentPage]?pages[currentPage]():'';
    mc.scrollTop=0;
    mc.style.opacity='1';
    if(currentPage==='reports')initChat();
    if(currentPage==='financials')animateBars();
    if(currentPage==='tokens')animateTokens();
  },150);
}

// ‚ïê‚ïê‚ïê HELPER: TABS ‚ïê‚ïê‚ïê
function tabsHTML(tabs,active=0,id='tabs'){
  return `<div class="tabs" id="${id}">${tabs.map((t,i)=>`<button class="tab-btn${i===active?' active':''}" data-tab="${id}-${i}" onclick="switchTab('${id}',${i})">${t}</button>`).join('')}</div>`;
}
function switchTab(id,idx){
  document.querySelectorAll('#'+id+' .tab-btn').forEach((b,i)=>b.classList.toggle('active',i===idx));
  document.querySelectorAll('.tp-'+id).forEach((p,i)=>{p.style.display=i===idx?'block':'none';});
}
function tp(id,idx){return `<div class="tp-${id}" style="display:${idx===0?'block':'none'}">`;}
const tpc='</div>';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PAGE CONTENT GENERATORS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const pages={};

// ‚îÄ‚îÄ‚îÄ HOME ‚îÄ‚îÄ‚îÄ
pages.home=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon" style="background:var(--brown-deep)">${I('home',22,'#edd6b7')}</div>
    <div><div class="page-title">Dashboard</div><div class="page-subtitle">Welcome back</div></div>
  </div>
</div>
<div class="stats-row">
  <div class="stat-card"><div class="stat-label">Open Tasks</div><div class="stat-value">12</div><div class="stat-change up">‚Üë 3 this week</div></div>
  <div class="stat-card"><div class="stat-label">Active Teams</div><div class="stat-value">3</div></div>
  <div class="stat-card"><div class="stat-label">Due Soon</div><div class="stat-value" style="color:var(--warning)">5</div></div>
  <div class="stat-card"><div class="stat-label">Overdue</div><div class="stat-value" style="color:var(--danger)">2</div><div class="stat-change down">‚Üì 1 from last week</div></div>
</div>
<div class="two-col">
  <div class="card section-card"><div class="card-body">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px">
      <span style="font-size:15px;font-weight:700;color:var(--text-heading)">Updates</span>${I('rss',16,'#a89888')}
    </div>
    <p style="font-size:13px;color:var(--text-muted);font-style:italic">No new updates</p>
  </div></div>
  <div class="card section-card"><div class="card-body">
    <h3>What's up?</h3>
    <p style="font-size:13.5px;color:var(--text-secondary);line-height:1.5;margin-bottom:14px">What's going on and who's doing it?</p>
    <button class="btn" style="width:100%;justify-content:center" onclick="navigate('conversations')">Community Planning</button>
  </div></div>
</div>`;

// ‚îÄ‚îÄ‚îÄ WHAT'S UP ‚îÄ‚îÄ‚îÄ
pages.whatsup=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon">${I('zap',22,'var(--brown-warm)')}</div>
    <div><div class="page-title">What's Up?</div><div class="page-subtitle">Community activity feed</div></div>
  </div>
</div>
<div class="card" style="margin-bottom:16px"><div class="card-body">
  <div style="display:flex;gap:12px;align-items:flex-start">
    <div class="avatar" style="background:var(--brown-deep)">MC</div>
    <textarea class="form-input" placeholder="Share an update with the community‚Ä¶" style="min-height:60px"></textarea>
  </div>
  <div style="display:flex;justify-content:flex-end;margin-top:10px"><button class="btn btn-primary btn-sm" onclick="openNewPost()">Post Update</button></div>
</div></div>
<div class="card post-card"><div class="card-body">
  <div class="post-header"><div class="avatar" style="background:var(--olive)">SC</div><div class="post-meta"><div class="post-author">Sarah Chen</div><div class="post-time">2 hours ago</div></div></div>
  <div class="post-body">KERI delegation module has been merged. Next steps: integration testing with the identity wallet. Looking for volunteers to help with QA.</div>
  <div class="post-actions"><button class="post-action">${I('thumbsUp',14)} 8</button><button class="post-action">${I('msgCircle',14)} 3 Comments</button></div>
</div></div>
<div class="card post-card"><div class="card-body">
  <div class="post-header"><div class="avatar" style="background:var(--info)">AR</div><div class="post-meta"><div class="post-author">Alex Rivera</div><div class="post-time">Yesterday</div></div></div>
  <div class="post-body">Community governance vote on the new SSI credential schema is now open. Please cast your vote in the Decisions section before March 15.</div>
  <div class="post-actions"><button class="post-action">${I('thumbsUp',14)} 14</button><button class="post-action">${I('msgCircle',14)} 7 Comments</button></div>
</div></div>`;

// ‚îÄ‚îÄ‚îÄ DECISIONS ‚îÄ‚îÄ‚îÄ
pages.decisions=()=>{
const proposals=[
{id:'DEC-024',title:'Adopt SSI Credential Schema v2',author:'Sarah Chen',date:'Mar 1, 2026',closes:'Mar 15',desc:'Upgrade SSI credential schema to v2 to support KERI delegation, multi-sig attestations, and cross-chain anchoring.',vFor:18,vAgainst:3,vAbstain:4,total:32,status:'active',cat:'Technical',myVote:'For'},
{id:'DEC-023',title:'Community Treasury Allocation Q2',author:'Governance Council',date:'Feb 28',closes:'Mar 12',desc:'Allocate 15% of community treasury to infrastructure, 10% to education, and 5% to outreach for Q2 2026.',vFor:10,vAgainst:2,vAbstain:2,total:32,status:'active',cat:'Treasury',myVote:null},
{id:'DEC-022',title:'Add Constitutional Committee Role',author:'Mark',date:'Feb 20',closes:'Mar 5',desc:'Establish a Constitutional Committee to oversee governance protocol compliance and arbitration.',vFor:6,vAgainst:1,vAbstain:2,total:32,status:'active',cat:'Governance',myVote:null},
{id:'DEC-021',title:'KERI Delegation Protocol Adoption',author:'Sarah Chen',date:'Feb 5',closes:'Feb 20',desc:'Adopt KERI delegation protocol as the standard for multi-level credential issuance within the community.',vFor:24,vAgainst:4,vAbstain:2,total:32,status:'passed',cat:'Technical',myVote:'For'},
{id:'DEC-020',title:'Increase Staking Rewards by 10%',author:'Alex Rivera',date:'Jan 28',closes:'Feb 10',desc:'Proposal to increase staking reward rate by 10% to incentivise long-term token holders.',vFor:22,vAgainst:5,vAbstain:3,total:32,status:'passed',cat:'Treasury',myVote:'For'},
{id:'DEC-019',title:'Community Brand Refresh',author:'Mei Lin',date:'Jan 20',closes:'Feb 3',desc:'Modernise TANA branding with updated logo, colour palette, and typography across all platforms.',vFor:20,vAgainst:6,vAbstain:4,total:32,status:'passed',cat:'Community',myVote:'Against'},
{id:'DEC-018',title:'Mandatory KYC for All Members',author:'James Whitfield',date:'Jan 15',closes:'Jan 28',desc:'Require full KYC for all new and existing members.',vFor:8,vAgainst:20,vAbstain:4,total:32,status:'rejected',cat:'Policy',myVote:'Against'},
{id:'DEC-017',title:'Remove Anonymous Voting Option',author:'External Contributor',date:'Jan 10',closes:'Jan 23',desc:'Remove anonymous voting to increase transparency in governance.',vFor:10,vAgainst:18,vAbstain:2,total:32,status:'rejected',cat:'Governance',myVote:'Against'},
{id:'DEC-025',title:'Mobile Wallet Push Notifications',author:'James Whitfield',date:'Mar 2',closes:'',desc:'Add push notification support to the identity wallet for credential requests, governance votes, and updates.',vFor:0,vAgainst:0,vAbstain:0,total:32,status:'draft',cat:'Technical',myVote:null},
];
const renderProposal=(p)=>{
const voted=p.vFor+p.vAgainst+p.vAbstain;const pct=voted>0?Math.round(p.vFor/voted*100):0;
const statusBadge=p.status==='active'?'open':p.status==='passed'?'active':p.status==='rejected'?'closed':'pending';
const statusText=p.status==='active'?'Active':p.status==='passed'?'Passed':p.status==='rejected'?'Rejected':'Draft';
return `<div class="card section-card" style="margin-bottom:16px"><div class="card-body" style="cursor:pointer" onclick="openViewProposal('${p.id}')">
<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px"><div><h3 style="margin-bottom:4px">${p.id}: ${p.title}</h3><div style="font-size:12.5px;color:var(--text-muted)">Proposed by ${p.author} ¬∑ ${p.date}${p.closes?' ¬∑ Closes '+p.closes:''}</div></div><div><span class="badge badge-${statusBadge}">${statusText}</span> <span class="badge badge-info">${p.cat}</span></div></div>
<p style="font-size:13.5px;color:var(--text-secondary);line-height:1.6;margin-bottom:12px">${p.desc}</p>
${p.status!=='draft'?`<div style="display:flex;gap:24px;margin-bottom:10px"><div><span style="font-size:22px;font-weight:700;color:var(--success)">${p.vFor}</span><span style="font-size:12px;color:var(--text-muted)"> For</span></div><div><span style="font-size:22px;font-weight:700;color:var(--danger)">${p.vAgainst}</span><span style="font-size:12px;color:var(--text-muted)"> Against</span></div><div><span style="font-size:22px;font-weight:700;color:var(--text-muted)">${p.vAbstain}</span><span style="font-size:12px;color:var(--text-muted)"> Abstain</span></div></div>
<div class="progress-bar" style="margin-bottom:10px"><div class="progress-fill" style="width:${pct}%;background:${pct>=60?'var(--success)':'var(--warning)'}"></div></div>
<div class="vote-bar">${p.myVote?`<button class="vote-btn voted">${I('check',14,'var(--success)',2)} Voted ${p.myVote}</button>`:`<button class="vote-btn">${I('thumbsUp',14)} Vote For</button><button class="vote-btn">Against</button><button class="vote-btn">Abstain</button>`}<span class="vote-count">${voted} of ${p.total} voted</span></div>`:'<div class="vote-bar"><span class="vote-count" style="font-style:italic">Draft ‚Äî not yet open for voting</span></div>'}
</div></div>`;};
const active=proposals.filter(p=>p.status==='active'),passed=proposals.filter(p=>p.status==='passed'),rejected=proposals.filter(p=>p.status==='rejected'),draft=proposals.filter(p=>p.status==='draft');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('git',22,'var(--brown-warm)')}</div><div><div class="page-title">Decisions</div><div class="page-subtitle">Community governance decisions</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openNewProposal()">${I('plus',14,'#edd6b7')} New Proposal</button></div></div>
${tabsHTML(['Active ('+active.length+')','Passed ('+passed.length+')','Rejected ('+rejected.length+')','Draft ('+draft.length+')'],0,'decTabs')}
${tp('decTabs',0)}${active.map(renderProposal).join('')}${tpc}
${tp('decTabs',1)}${passed.map(renderProposal).join('')}${tpc}
${tp('decTabs',2)}${rejected.map(renderProposal).join('')}${tpc}
${tp('decTabs',3)}${draft.map(renderProposal).join('')}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ CONVERSATIONS ‚îÄ‚îÄ‚îÄ
pages.conversations=()=>{
const posts=[
{id:1,author:'Governance Council',avatar:'GC',color:'var(--brown-deep)',time:'2 hours ago',title:'üì¢ Q2 Budget Vote Now Open',body:'The Q2 community treasury allocation proposal is now live. All members are encouraged to review the proposal in Decisions and cast their vote before March 12.',likes:14,comments:7,badge:'Announcement'},
{id:2,author:'Sarah Chen',avatar:'SC',color:'var(--olive)',time:'5 hours ago',title:'KERI Delegation Module ‚Äî Testing Help Needed',body:'The delegation module PR has been merged! We need volunteers for integration testing with the identity wallet.',likes:8,comments:3,badge:'Discussion'},
{id:3,author:'Alex Rivera',avatar:'AR',color:'var(--info)',time:'Yesterday',title:'How do we handle cross-chain credential verification?',body:"I've been thinking about how credentials issued on one chain can be verified on another. Has anyone explored LayerZero or similar bridging?",likes:6,comments:11,badge:'Question'},
{id:4,author:'Mark',avatar:'MC',color:'var(--brown-warm)',time:'2 days ago',title:'üì¢ New SSI Wallet Release v2.3',body:'The latest wallet release includes IndexedDB storage, KERI delegation events, and improved key management via Web Crypto API.',likes:19,comments:5,badge:'Announcement'},
{id:5,author:'James Whitfield',avatar:'JW',color:'#7a6a8a',time:'3 days ago',title:'Community meetup format ‚Äî thoughts?',body:'Should we switch from monthly to bi-weekly meetups? The governance workload is increasing and more frequent sync would help.',likes:4,comments:8,badge:'Discussion'},
{id:6,author:'Mei Lin',avatar:'ML',color:'var(--success)',time:'4 days ago',title:'What DID method should we standardize on?',body:'We currently support did:keri and did:web. Should we commit to one, or maintain both? Curious about interop considerations.',likes:7,comments:14,badge:'Question'},
];
const renderPost=(p)=>`<div class="card post-card"><div class="card-body" style="cursor:pointer" onclick="openViewPost(${p.id})">
<div class="post-header"><div class="avatar" style="background:${p.color}">${p.avatar}</div><div class="post-meta"><div class="post-author">${p.author} <span class="badge badge-info" style="margin-left:6px">${p.badge}</span></div><div class="post-time">${p.time}</div></div></div>
<div style="font-size:15px;font-weight:600;color:var(--text-primary);margin-bottom:6px">${p.title}</div>
<div class="post-body">${p.body}</div>
<div class="post-actions"><button class="post-action">${I('thumbsUp',14)} ${p.likes}</button><button class="post-action">${I('msgCircle',14)} ${p.comments} Comments</button><button class="post-action">${I('link',14)} Share</button></div>
</div></div>`;
return `
<div class="page-header">
  <div class="page-header-left"><div class="page-icon">${I('chat',22,'var(--brown-warm)')}</div><div><div class="page-title">Conversations</div><div class="page-subtitle">Posts & comments</div></div></div>
  <div class="header-actions"><button class="btn btn-primary" onclick="openNewPost()">${I('plus',14,'#edd6b7')} New Post</button></div>
</div>
${tabsHTML(['All Posts ('+posts.length+')','Announcements ('+posts.filter(p=>p.badge==='Announcement').length+')','Discussion ('+posts.filter(p=>p.badge==='Discussion').length+')','Questions ('+posts.filter(p=>p.badge==='Question').length+')'],0,'convTabs')}
${tp('convTabs',0)}${posts.map(renderPost).join('')}${tpc}
${tp('convTabs',1)}${posts.filter(p=>p.badge==='Announcement').map(renderPost).join('')}${tpc}
${tp('convTabs',2)}${posts.filter(p=>p.badge==='Discussion').map(renderPost).join('')}${tpc}
${tp('convTabs',3)}${posts.filter(p=>p.badge==='Question').map(renderPost).join('')}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ CONTACTS ‚îÄ‚îÄ‚îÄ
pages.contacts=()=>{
const contacts=[
{name:'selfdriven Foundation',type:'Organisation',role:'Governance Body',loc:'Global',status:'active',avatar:'SF',color:'var(--brown-deep)',team:'Governance Council'},
{name:'Sarah Chen',type:'Individual',role:'Identity Lead',loc:'Singapore',status:'active',avatar:'SC',color:'var(--olive)',team:'Identity Working Group'},
{name:'Alex Rivera',type:'Individual',role:'Developer',loc:'Austin, TX',status:'active',avatar:'AR',color:'var(--info)',team:'Development'},
{name:'Cardano Foundation',type:'Organisation',role:'Partner',loc:'Zug, Switzerland',status:'active',avatar:'CF',color:'#2a4b7c',team:''},
{name:'TANA Insurance Co.',type:'Organisation',role:'Member Org',loc:'Sydney, AU',status:'active',avatar:'TI',color:'var(--brown-warm)',team:'Operations'},
{name:'James Whitfield',type:'Individual',role:'Facilitator',loc:'London, UK',status:'pending',avatar:'JW',color:'#7a6a8a',team:'Governance Council'},
{name:'Mei Lin',type:'Individual',role:'Contributor',loc:'Taipei',status:'active',avatar:'ML',color:'var(--success)',team:'Development'},
{name:'David Park',type:'Individual',role:'Security Analyst',loc:'Seoul',status:'active',avatar:'DP',color:'#5a7a6a',team:'Identity Working Group'},
];
const renderTable=(list)=>`<div class="card"><div class="card-body" style="padding:0"><table class="data-table">
<thead><tr><th>Name</th><th>Type</th><th>Role</th><th>Location</th><th>Status</th></tr></thead><tbody>
${list.map(c=>`<tr style="cursor:pointer" onclick="openViewContact('${c.name.replace(/'/g,"\\'")}')">
<td><div style="display:flex;align-items:center;gap:10px"><div class="avatar" style="background:${c.color};width:32px;height:32px;font-size:11px;border-radius:8px">${c.avatar}</div><span style="font-weight:500">${c.name}</span></div></td>
<td><span style="display:flex;align-items:center;gap:5px">${I(c.type==='Organisation'?'building':'user',14,'#a89888')} ${c.type}</span></td>
<td>${c.role}</td><td>${c.loc}</td>
<td><span class="badge badge-${c.status==='active'?'open':'pending'}">${c.status==='active'?'Active':'Pending'}</span></td>
</tr>`).join('')}</tbody></table></div></div>`;
const teams=[{name:'Identity Working Group',members:2,lead:'Sarah Chen'},{name:'Governance Council',members:2,lead:'James Whitfield'},{name:'Development',members:2,lead:'Alex Rivera'},{name:'Operations',members:1,lead:'TANA Insurance Co.'}];
return `
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('users',22,'var(--brown-warm)')}</div><div><div class="page-title">Contacts</div><div class="page-subtitle">Organisations & individuals</div></div></div>
<div class="header-actions"><div class="search-box">${I('search',16,'#a89888')}<input placeholder="Search contacts‚Ä¶"></div><button class="btn btn-primary" onclick="openAddContact()">${I('plus',14,'#edd6b7')} Add Contact</button></div></div>
${tabsHTML(['All ('+contacts.length+')','Organisations ('+contacts.filter(c=>c.type==='Organisation').length+')','Individuals ('+contacts.filter(c=>c.type==='Individual').length+')','Teams ('+teams.length+')'],0,'ctTabs')}
${tp('ctTabs',0)}${renderTable(contacts)}${tpc}
${tp('ctTabs',1)}${renderTable(contacts.filter(c=>c.type==='Organisation'))}${tpc}
${tp('ctTabs',2)}${renderTable(contacts.filter(c=>c.type==='Individual'))}${tpc}
${tp('ctTabs',3)}
${teams.map(t=>`<div class="card section-card"><div class="card-body" style="cursor:pointer" onclick="openViewTeam(${t.id})"><div style="display:flex;justify-content:space-between;align-items:center">
<div><h3 style="margin-bottom:4px">${t.name}</h3><div style="font-size:12.5px;color:var(--text-muted)">Lead: ${t.lead} ¬∑ ${t.members} members</div></div>
<button class="btn btn-sm" onclick="event.stopPropagation();openViewTeam(${t.id})">View Team</button></div></div></div>`).join('')}
${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ OPPORTUNITIES ‚îÄ‚îÄ‚îÄ
pages.opportunities=()=>{
const opps=[
{id:1,title:'Cross-Chain Identity Resolution',desc:'Implement LayerZero integration for cross-chain SSI credential verification between Cardano and Ethereum.',impact:'High',votes:14,status:'open',author:'Alex Rivera',area:'Infrastructure',effort:'Large'},
{id:2,title:'Community Onboarding Portal',desc:'Create an interactive onboarding experience for new members with guided SSI wallet setup and credential issuance.',impact:'Medium',votes:9,status:'review',author:'Mei Lin',area:'Community',effort:'Medium'},
{id:3,title:'AI-Assisted Governance Summaries',desc:'Use AI to generate plain-language summaries of governance proposals to improve participation.',impact:'High',votes:22,status:'open',author:'Sarah Chen',area:'Governance',effort:'Medium'},
{id:4,title:'Mobile Wallet Push Notifications',desc:'Add push notification support to the identity wallet for credential requests and governance votes.',impact:'Medium',votes:7,status:'open',author:'James Whitfield',area:'Infrastructure',effort:'Small'},
{id:5,title:'Multi-Sig Treasury Management',desc:'Implement multi-signature approval workflow for treasury transactions above $5,000.',impact:'High',votes:18,status:'review',author:'Mark',area:'Security',effort:'Large'},
{id:6,title:'SSI Credential Revocation Registry',desc:'Build an on-chain credential revocation registry for KERI-based credentials.',impact:'High',votes:25,status:'approved',author:'Sarah Chen',area:'Identity',effort:'Large'},
{id:7,title:'Governance Dashboard Analytics',desc:'Real-time analytics dashboard showing voting patterns, participation trends, and quorum tracking.',impact:'Medium',votes:16,status:'approved',author:'Alex Rivera',area:'Governance',effort:'Medium'},
{id:8,title:'Community Skills Directory',desc:'Searchable directory mapping member skills to project needs for better resource allocation.',impact:'Medium',votes:12,status:'approved',author:'Mei Lin',area:'Community',effort:'Small'},
{id:9,title:'KERI Witness Network Expansion',desc:'Deploy additional KERI witness nodes across 3 geographic regions for redundancy.',impact:'High',votes:20,status:'approved',author:'Mark',area:'Infrastructure',effort:'Large'},
{id:10,title:'Token Staking Rewards v2',desc:'Updated staking model with tiered rewards based on governance participation.',impact:'High',votes:28,status:'approved',author:'Governance Council',area:'Treasury',effort:'Large'},
{id:11,title:'Automated Meeting Minutes',desc:'AI transcription and summary generation for governance meetings.',impact:'Medium',votes:14,status:'approved',author:'James Whitfield',area:'Governance',effort:'Small'},
{id:12,title:'Developer API Documentation',desc:'Comprehensive API documentation portal with interactive examples.',impact:'Medium',votes:11,status:'approved',author:'Alex Rivera',area:'Documentation',effort:'Medium'},
{id:13,title:'Member Referral Programme',desc:'Token-incentivised referral programme for community growth.',impact:'Medium',votes:9,status:'approved',author:'Mei Lin',area:'Community',effort:'Small'},
{id:14,title:'Legacy System Migration Tool',desc:'Tool to migrate data from legacy identity systems to KERI-based credentials.',impact:'Low',votes:3,status:'archived',author:'External Contributor',area:'Infrastructure',effort:'Extra Large'},
{id:15,title:'Physical Meetup Fund',desc:'Dedicated fund for in-person community meetups and workshops.',impact:'Low',votes:5,status:'archived',author:'James Whitfield',area:'Community',effort:'Small'},
];
const renderOpp=(o)=>`<div class="card section-card" style="cursor:pointer" onclick="openViewOpportunity(${o.id})"><div class="card-body">
<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px"><h3 style="margin-bottom:0">${o.title}</h3><div><span class="badge badge-${o.status==='open'?'open':o.status==='review'?'pending':o.status==='approved'?'active':'closed'}">${o.status==='open'?'Open':o.status==='review'?'Under Review':o.status==='approved'?'Approved':'Archived'}</span></div></div>
<div style="font-size:12.5px;color:var(--text-muted);margin-bottom:8px">Submitted by ${o.author} ¬∑ Impact: <strong style="color:${o.impact==='High'?'var(--danger)':o.impact==='Medium'?'var(--warning)':'var(--text-muted)'}">${o.impact}</strong> ¬∑ Area: ${o.area} ¬∑ Effort: ${o.effort}</div>
<p style="font-size:13.5px;color:var(--text-secondary);line-height:1.6;margin-bottom:12px">${o.desc}</p>
<div class="vote-bar"><button class="vote-btn">${I('thumbsUp',14)} ${o.votes} Upvotes</button><button class="vote-btn">${I('msgCircle',14)} Discuss</button></div>
</div></div>`;
const open=opps.filter(o=>o.status==='open'),review=opps.filter(o=>o.status==='review'),approved=opps.filter(o=>o.status==='approved'),archived=opps.filter(o=>o.status==='archived');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('smile',22,'var(--brown-warm)')}</div><div><div class="page-title">Opportunities</div><div class="page-subtitle">Community improvements for consideration</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openSubmitOpportunity()">${I('plus',14,'#edd6b7')} Submit Opportunity</button></div></div>
<div class="stats-row"><div class="stat-card"><div class="stat-label">Open</div><div class="stat-value">${open.length}</div></div><div class="stat-card"><div class="stat-label">Under Review</div><div class="stat-value" style="color:var(--warning)">${review.length}</div></div><div class="stat-card"><div class="stat-label">Approved</div><div class="stat-value" style="color:var(--success)">${approved.length}</div></div><div class="stat-card"><div class="stat-label">Impact Score</div><div class="stat-value">87</div></div></div>
${tabsHTML(['Open ('+open.length+')','Under Review ('+review.length+')','Approved ('+approved.length+')','Archived ('+archived.length+')'],0,'oppTabs')}
${tp('oppTabs',0)}${open.map(renderOpp).join('')}${tpc}
${tp('oppTabs',1)}${review.map(renderOpp).join('')}${tpc}
${tp('oppTabs',2)}${approved.map(renderOpp).join('')}${tpc}
${tp('oppTabs',3)}${archived.map(renderOpp).join('')}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ PROJECTS ‚îÄ‚îÄ‚îÄ
pages.projects=()=>`
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('folder',22,'var(--brown-warm)')}</div><div><div class="page-title">Projects</div><div class="page-subtitle">Community projects with tasks</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openNewProject()">${I('plus',14,'#edd6b7')} New Project</button></div></div>
${[
{id:1,name:'Identity Wallet v2',progress:68,tasks:24,done:16,members:['SC','AR','ML'],color:'var(--success)',lead:'Sarah Chen',cat:'Development',desc:'Next-generation SSI wallet with KERI delegation, IndexedDB storage, and Web Crypto API integration.'},
{id:2,name:'Governance Framework',progress:45,tasks:18,done:8,members:['GC','JW'],color:'var(--warning)',lead:'James Whitfield',cat:'Governance',desc:'Comprehensive governance framework defining roles, voting processes, and dispute resolution.'},
{id:3,name:'Community Portal Redesign',progress:12,tasks:30,done:4,members:['AR','ML','SC'],color:'var(--danger)',lead:'Alex Rivera',cat:'Design',desc:'Complete redesign of the community portal with improved UX, accessibility, and mobile responsiveness.'},
{id:4,name:'KERI Delegation Module',progress:92,tasks:15,done:14,members:['SC','MC'],color:'var(--success)',lead:'Sarah Chen',cat:'Development',desc:'KERI delegation event handling module for multi-level credential issuance and verification.'},
].map(p=>`
<div class="card section-card" style="cursor:pointer" onclick="openViewProject(${p.id})"><div class="card-body">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <div><h3 style="margin-bottom:4px">${p.name}</h3><div style="font-size:12.5px;color:var(--text-muted)">${p.done} of ${p.tasks} tasks complete ¬∑ Lead: ${p.lead}</div></div>
    <div style="display:flex;align-items:center;gap:8px"><div style="display:flex">${p.members.map((m,i)=>`<div class="avatar" style="background:var(--brown-warm);width:28px;height:28px;font-size:10px;border-radius:7px;margin-left:${i>0?'-6':'0'}px;border:2px solid #fff">${m}</div>`).join('')}</div><span class="badge badge-active">${p.progress}%</span></div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:${p.progress}%;background:${p.color}"></div></div>
  <div style="margin-top:12px;display:flex;gap:6px"><span class="badge badge-info">${p.cat}</span></div>
</div></div>`).join('')}`;

// ‚îÄ‚îÄ‚îÄ DOCS ‚îÄ‚îÄ‚îÄ
pages.docs=()=>{
const docs=[
{id:1,name:'Community Constitution v3.2',cat:'Governance',author:'Governance Council',date:'Mar 1, 2026',size:'245 KB',desc:'The foundational document defining the community structure, rights, and governance processes.'},
{id:2,name:'SSI Credential Schema v2 Spec',cat:'Technical',author:'Sarah Chen',date:'Feb 28, 2026',size:'1.2 MB',desc:'Technical specification for the v2 credential schema supporting KERI delegation and cross-chain anchoring.'},
{id:3,name:'KERI Delegation Architecture',cat:'Technical',author:'Mark',date:'Feb 25, 2026',size:'890 KB',desc:'Architecture document for multi-level delegation events, witness configuration, and key rotation.'},
{id:4,name:'Q1 2026 Treasury Report',cat:'Governance',author:'Operations',date:'Feb 20, 2026',size:'340 KB',desc:'Quarterly financial report covering income, expenditure, staking rewards, and on-chain transactions.'},
{id:5,name:'New Member Onboarding Guide',cat:'Template',author:'Alex Rivera',date:'Feb 15, 2026',size:'156 KB',desc:'Step-by-step template for onboarding new community members including wallet setup and credential issuance.'},
{id:6,name:'Governance Proposal Template',cat:'Template',author:'Governance Council',date:'Feb 10, 2026',size:'42 KB',desc:'Standard template for submitting governance proposals with required sections and voting parameters.'},
{id:7,name:'Identity Wallet API Reference',cat:'Technical',author:'Alex Rivera',date:'Feb 5, 2026',size:'2.1 MB',desc:'Full API reference for the identity wallet including endpoints, authentication, and example requests.'},
{id:8,name:'Voting Process Guide',cat:'Governance',author:'James Whitfield',date:'Jan 28, 2026',size:'120 KB',desc:'Detailed guide explaining the community voting process, quorum rules, and delegation procedures.'},
{id:9,name:'Project Brief Template',cat:'Template',author:'Mei Lin',date:'Jan 20, 2026',size:'38 KB',desc:'Template for drafting project briefs with scope, timeline, resource requirements, and success criteria.'},
];
const renderTable=(list)=>`<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Document</th><th>Category</th><th>Author</th><th>Modified</th><th>Size</th></tr></thead><tbody>
${list.map(d=>`<tr style="cursor:pointer" onclick="openViewDoc(${d.id})"><td><div style="display:flex;align-items:center;gap:10px">${I('file',18,'var(--brown-warm)')}<span style="font-weight:500">${d.name}</span></div></td><td><span class="badge badge-info">${d.cat}</span></td><td>${d.author}</td><td>${d.date}</td><td>${d.size}</td></tr>`).join('')}
</tbody></table></div></div>`;
const gov=docs.filter(d=>d.cat==='Governance'),tech=docs.filter(d=>d.cat==='Technical'),tmpl=docs.filter(d=>d.cat==='Template');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('docs',22,'var(--brown-warm)')}</div><div><div class="page-title">Docs</div><div class="page-subtitle">Share community documents</div></div></div><div class="header-actions"><div class="search-box">${I('search',16,'#a89888')}<input placeholder="Search documents‚Ä¶"></div><button class="btn btn-primary" onclick="openUploadDoc()">${I('upload',14,'#edd6b7')} Upload</button></div></div>
${tabsHTML(['All ('+docs.length+')','Governance ('+gov.length+')','Technical ('+tech.length+')','Templates ('+tmpl.length+')'],0,'docTabs')}
${tp('docTabs',0)}${renderTable(docs)}${tpc}
${tp('docTabs',1)}${renderTable(gov)}${tpc}
${tp('docTabs',2)}${renderTable(tech)}${tpc}
${tp('docTabs',3)}${renderTable(tmpl)}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ TOKENS ‚îÄ‚îÄ‚îÄ
pages.tokens=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon">${I('token',22,'var(--brown-warm)')}</div>
    <div><div class="page-title">Tokens</div><div class="page-subtitle">Community participation tokens</div></div>
  </div>
</div>
<div class="token-hero" id="tokenHero">
  <div style="font-size:13px;opacity:0.6;margin-bottom:4px">Your Balance</div>
  <div class="token-balance" id="tokenVal">0</div>
  <div class="token-label">TANA Tokens</div>
  <div class="token-actions">
    <button class="token-btn" onclick="openTokenHistory()">Transaction History</button>
    <button class="token-btn" onclick="openTokenRedeem()">Redeem</button>
  </div>
</div>
<div class="stats-row">
  <div class="stat-card"><div class="stat-label">Earned This Month</div><div class="stat-value" style="color:var(--success)">+142</div></div>
  <div class="stat-card"><div class="stat-label">Governance Votes</div><div class="stat-value">48</div></div>
  <div class="stat-card"><div class="stat-label">Community Rank</div><div class="stat-value">#7</div></div>
  <div class="stat-card"><div class="stat-label">Streak</div><div class="stat-value">14d</div></div>
</div>
<div class="card section-card"><div class="card-body">
<h3>Recent Activity</h3>
${[
{action:'Voted on DEC-024',tokens:'+15',time:'2 hours ago',type:'up'},
{action:'Completed PR review',tokens:'+25',time:'Yesterday',type:'up'},
{action:'Submitted opportunity',tokens:'+10',time:'2 days ago',type:'up'},
{action:'Attended governance meeting',tokens:'+20',time:'3 days ago',type:'up'},
{action:'Redeemed for community credits',tokens:'-50',time:'1 week ago',type:'down'},
].map(a=>`
<div class="list-item">
  <div class="list-item-icon" style="background:${a.type==='up'?'rgba(107,138,94,0.1)':'rgba(192,96,74,0.1)'}">${I(a.type==='up'?'plus':'download',18,a.type==='up'?'var(--success)':'var(--danger)')}</div>
  <div class="list-item-content"><div class="list-item-title">${a.action}</div><div class="list-item-sub">${a.time}</div></div>
  <div style="font-size:14px;font-weight:600;color:${a.type==='up'?'var(--success)':'var(--danger)'}">${a.tokens}</div>
</div>`).join('')}
</div></div>`;

// ‚îÄ‚îÄ‚îÄ OPERATIONS ‚îÄ‚îÄ‚îÄ
pages.operations=()=>`
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('pie',22,'var(--brown-warm)')}</div><div><div class="page-title">Operations</div><div class="page-subtitle">Community resources, products & orders</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openAddResource()">${I('plus',14,'#edd6b7')} Add Resource</button></div></div>
<div class="stats-row"><div class="stat-card"><div class="stat-label">Active Resources</div><div class="stat-value">18</div></div><div class="stat-card"><div class="stat-label">Products</div><div class="stat-value">6</div></div><div class="stat-card"><div class="stat-label">Pending Orders</div><div class="stat-value" style="color:var(--warning)">3</div></div><div class="stat-card"><div class="stat-label">Utilisation</div><div class="stat-value">78%</div></div></div>
${tabsHTML(['Resources (5)','Products (6)','Orders (3)'],0,'opsTabs')}
${tp('opsTabs',0)}
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Resource</th><th>Type</th><th>Status</th><th>Allocation</th><th>Utilisation</th></tr></thead><tbody>
${[
{name:'AWS Infrastructure',type:'Cloud',status:'active',alloc:'Operations',util:82},
{name:'Identity Wallet API',type:'Service',status:'active',alloc:'Development',util:64},
{name:'KERI Node Cluster',type:'Infrastructure',status:'active',alloc:'Identity WG',util:91},
{name:'Community Portal Hosting',type:'Cloud',status:'active',alloc:'Operations',util:45},
{name:'Cardano Node',type:'Infrastructure',status:'maintenance',alloc:'Blockchain',util:0},
].map(r=>`<tr><td style="font-weight:500">${r.name}</td><td><span class="badge badge-info">${r.type}</span></td><td><span class="badge badge-${r.status==='active'?'open':'pending'}">${r.status==='active'?'Active':'Maintenance'}</span></td><td>${r.alloc}</td><td><div style="display:flex;align-items:center;gap:8px"><div class="progress-bar" style="width:80px"><div class="progress-fill" style="width:${r.util}%;background:${r.util>80?'var(--danger)':r.util>50?'var(--warning)':'var(--success)'}"></div></div><span style="font-size:12px;color:var(--text-muted)">${r.util}%</span></div></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}
${tp('opsTabs',1)}
<div style="display:flex;justify-content:flex-end;margin-bottom:12px"><button class="btn btn-primary btn-sm" onclick="openAddProduct()">${I('plus',14,'#edd6b7')} Add Product</button></div>
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Product</th><th>Type</th><th>Version</th><th>Users</th><th>Status</th></tr></thead><tbody>
${[
{id:1,name:'Identity Wallet',type:'Application',ver:'v2.3.1',users:1247,status:'active'},
{id:2,name:'Governance Portal',type:'Web App',ver:'v3.0.0',users:892,status:'active'},
{id:3,name:'KERI Witness Node',type:'Service',ver:'v1.4.2',users:24,status:'active'},
{id:4,name:'Community API',type:'API',ver:'v5.0.43',users:156,status:'active'},
{id:5,name:'Mobile Companion',type:'Mobile App',ver:'v1.1.0',users:643,status:'beta'},
{id:6,name:'Analytics Dashboard',type:'Web App',ver:'v0.9.3',users:45,status:'beta'},
].map(p=>`<tr style="cursor:pointer" onclick="openViewProduct(${p.id})"><td style="font-weight:500">${p.name}</td><td><span class="badge badge-info">${p.type}</span></td><td><code style="font-size:12px;background:var(--accent-light);padding:2px 8px;border-radius:4px">${p.ver}</code></td><td>${p.users.toLocaleString()}</td><td><span class="badge badge-${p.status==='active'?'open':'pending'}">${p.status==='active'?'Active':'Beta'}</span></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}
${tp('opsTabs',2)}
<div style="display:flex;justify-content:flex-end;margin-bottom:12px"><button class="btn btn-primary btn-sm" onclick="openAddOrder()">${I('plus',14,'#edd6b7')} Add Order</button></div>
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Order</th><th>Requestor</th><th>Type</th><th>Date</th><th>Status</th></tr></thead><tbody>
${[
{id:'ORD-042',req:'Alex Rivera',type:'SSL Certificate Renewal',date:'Mar 1, 2026',status:'pending'},
{id:'ORD-041',req:'Operations',type:'AWS Reserved Instance',date:'Feb 28, 2026',status:'pending'},
{id:'ORD-040',req:'Sarah Chen',type:'KERI Node Scale-up',date:'Feb 25, 2026',status:'pending'},
{id:'ORD-039',req:'Mark',type:'Domain Registration',date:'Feb 20, 2026',status:'complete'},
{id:'ORD-038',req:'James Whitfield',type:'Video Conferencing License',date:'Feb 15, 2026',status:'complete'},
].map(o=>`<tr style="cursor:pointer" onclick="openViewOrder('${o.id}')"><td style="font-weight:500">${o.id}</td><td>${o.req}</td><td>${o.type}</td><td>${o.date}</td><td><span class="badge badge-${o.status==='pending'?'pending':'active'}">${o.status==='pending'?'Pending':'Complete'}</span></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}`;

// ‚îÄ‚îÄ‚îÄ FINANCIALS ‚îÄ‚îÄ‚îÄ
pages.financials=()=>{
const txns=[
{id:1,desc:'AWS Infrastructure',amount:'-$1,240',raw:-1240,type:'expense',cat:'Infrastructure',date:'Mar 1, 2026',method:'Bank Transfer'},
{id:2,desc:'Member contributions',amount:'+$3,200',raw:3200,type:'income',cat:'Contributions',date:'Feb 28, 2026',method:'Bank Transfer'},
{id:3,desc:'KERI node hosting',amount:'-$680',raw:-680,type:'expense',cat:'Hosting',date:'Feb 25, 2026',method:'Bank Transfer'},
{id:4,desc:'Partner grant (Cardano)',amount:'+$5,000',raw:5000,type:'income',cat:'Grants',date:'Feb 20, 2026',method:'On-Chain'},
{id:5,desc:'Domain renewals',amount:'-$320',raw:-320,type:'expense',cat:'Services',date:'Feb 18, 2026',method:'Credit Card'},
{id:6,desc:'Staking rewards Feb',amount:'+$1,200',raw:1200,type:'income',cat:'Staking Rewards',date:'Feb 15, 2026',method:'On-Chain'},
{id:7,desc:'Video conferencing license',amount:'-$450',raw:-450,type:'expense',cat:'Services',date:'Feb 12, 2026',method:'Credit Card'},
{id:8,desc:'Community event sponsorship',amount:'+$2,500',raw:2500,type:'income',cat:'Contributions',date:'Feb 10, 2026',method:'Bank Transfer'},
{id:9,desc:'SSL certificates',amount:'-$180',raw:-180,type:'expense',cat:'Infrastructure',date:'Feb 8, 2026',method:'Credit Card'},
];
const chain=[
{hash:'0x8f2a...c4b1',type:'Treasury Deposit',amount:'‚Ç≥5,000',block:'#12,847,392',date:'Mar 1',status:'confirmed'},
{hash:'0x3e7b...91d5',type:'Governance Reward',amount:'‚Ç≥250',block:'#12,846,108',date:'Feb 28',status:'confirmed'},
{hash:'0xa1c9...f8e2',type:'Staking Reward',amount:'‚Ç≥1,200',block:'#12,840,551',date:'Feb 25',status:'confirmed'},
{hash:'0xd4f1...a7c3',type:'Infrastructure Payment',amount:'‚Ç≥800',block:'#12,835,219',date:'Feb 20',status:'confirmed'},
{hash:'0xb2e8...39f6',type:'Member Reward',amount:'‚Ç≥150',block:'#12,830,004',date:'Feb 15',status:'confirmed'},
];
const renderTxTable=(list)=>`<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Description</th><th>Category</th><th>Date</th><th>Method</th><th style="text-align:right">Amount</th></tr></thead><tbody>
${list.map(t=>`<tr style="cursor:pointer" onclick="openViewTransaction(${t.id})"><td style="font-weight:500">${t.desc}</td><td><span class="badge badge-info">${t.cat}</span></td><td>${t.date}</td><td>${t.method}</td><td style="text-align:right;font-weight:600;color:${t.raw>0?'var(--success)':'var(--danger)'}">${t.amount}</td></tr>`).join('')}
</tbody></table></div></div>`;
const expenses=txns.filter(t=>t.type==='expense'),income=txns.filter(t=>t.type==='income');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('dollar',22,'var(--brown-warm)')}</div><div><div class="page-title">Financials</div><div class="page-subtitle">Expenses, income, reporting & on-chain</div></div></div><div class="header-actions"><button class="btn" onclick="openExportReport('financials')">${I('download',14)} Export</button><button class="btn btn-primary" onclick="openAddTransaction()">${I('plus',14,'#edd6b7')} Add Transaction</button></div></div>
<div class="stats-row"><div class="stat-card"><div class="stat-label">Total Balance</div><div class="stat-value">$48,250</div><div class="stat-change up">‚Üë 12% from last month</div></div><div class="stat-card"><div class="stat-label">Monthly Income</div><div class="stat-value" style="color:var(--success)">$8,400</div></div><div class="stat-card"><div class="stat-label">Monthly Expenses</div><div class="stat-value" style="color:var(--danger)">$5,200</div></div><div class="stat-card"><div class="stat-label">On-Chain Treasury</div><div class="stat-value">‚Ç≥125K</div></div></div>
${tabsHTML(['Overview','Expenses ('+expenses.length+')','Income ('+income.length+')','On-Chain ('+chain.length+')'],0,'finTabs')}
${tp('finTabs',0)}
<div class="two-col"><div class="card section-card"><div class="card-body"><h3>Monthly Overview</h3><div class="chart-placeholder"><div class="chart-bars" id="chartBars">${['Jan','Feb','Mar','Apr','May','Jun'].map((m,i)=>`<div style="text-align:center;flex:1"><div class="chart-bar" data-h="${[60,75,55,80,70,90][i]}" style="height:0;background:${i<5?'var(--brown-warm)':'var(--brown-deep)'};width:100%;margin:0 auto"></div><div style="font-size:10px;color:var(--text-muted);margin-top:6px">${m}</div></div>`).join('')}</div></div></div></div>
<div class="card section-card"><div class="card-body"><h3>Recent Transactions</h3>
${txns.slice(0,5).map(t=>`<div class="list-item" style="cursor:pointer" onclick="openViewTransaction(${t.id})"><div class="list-item-icon" style="background:${t.type==='income'?'rgba(107,138,94,0.1)':'rgba(192,96,74,0.1)'}">${I(t.type==='income'?'plus':'download',18,t.type==='income'?'var(--success)':'var(--danger)')}</div><div class="list-item-content"><div class="list-item-title">${t.desc}</div><div class="list-item-sub">${t.date}</div></div><div style="font-size:14px;font-weight:600;color:${t.type==='income'?'var(--success)':'var(--danger)'}">${t.amount}</div></div>`).join('')}
</div></div></div>
${tpc}
${tp('finTabs',1)}${renderTxTable(expenses)}${tpc}
${tp('finTabs',2)}${renderTxTable(income)}${tpc}
${tp('finTabs',3)}
<div class="card"><div class="card-body" style="padding:0"><div style="overflow-x:auto"><table class="data-table"><thead><tr><th>Tx Hash</th><th>Type</th><th>Amount</th><th>Block</th><th>Date</th><th>Status</th></tr></thead><tbody>
${chain.map(tx=>`<tr><td><span class="onchain-hash">${tx.hash}</span></td><td>${tx.type}</td><td style="font-weight:500">${tx.amount}</td><td style="font-size:12px">${tx.block}</td><td>${tx.date}</td><td><span class="badge badge-open">Confirmed</span></td></tr>`).join('')}
</tbody></table></div></div></div>
${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ REPORTS ‚îÄ‚îÄ‚îÄ
pages.reports=()=>`
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('search',22,'var(--brown-warm)')}</div><div><div class="page-title">Reports</div><div class="page-subtitle">AI-powered community insights</div></div></div><div class="header-actions"><button class="btn" onclick="openExportReport('reports')">${I('download',14)} Export Report</button></div></div>
${tabsHTML(['AI Chat','Generated Reports (4)','Metrics'],0,'rptTabs')}
${tp('rptTabs',0)}
<div class="chat-container" id="chatContainer"><div class="chat-messages" id="chatMessages"><div class="chat-bubble ai"><div class="ai-label">TANA AI</div>Hello! I can help you explore community data and generate reports. Try asking me about membership trends, governance participation, token distribution, or project progress.</div></div><div class="chat-input-bar"><input class="chat-input" id="chatInput" placeholder="Ask about community data‚Ä¶" onkeydown="if(event.key==='Enter')sendChat()"><button class="chat-send" onclick="sendChat()">${I('send',18,'#edd6b7')}</button></div></div>
${tpc}
${tp('rptTabs',1)}
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Report</th><th>Type</th><th>Generated</th><th>Period</th><th>Action</th></tr></thead><tbody>
${[
{name:'Q1 2026 Community Summary',type:'Quarterly',date:'Mar 1, 2026',period:'Jan‚ÄìMar 2026'},
{name:'February Governance Report',type:'Monthly',date:'Feb 28, 2026',period:'Feb 2026'},
{name:'Token Distribution Analysis',type:'Ad-hoc',date:'Feb 20, 2026',period:'All time'},
{name:'Member Engagement Scorecard',type:'Monthly',date:'Feb 15, 2026',period:'Feb 2026'},
].map(r=>`<tr><td style="font-weight:500"><div style="display:flex;align-items:center;gap:10px">${I('file',18,'var(--brown-warm)')}<span>${r.name}</span></div></td><td><span class="badge badge-info">${r.type}</span></td><td>${r.date}</td><td>${r.period}</td><td><button class="btn btn-sm">${I('download',12)} Download</button></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}
${tp('rptTabs',2)}
<div class="stats-row"><div class="stat-card"><div class="stat-label">Active Members</div><div class="stat-value">142</div><div class="stat-change up">‚Üë 8% from last month</div></div><div class="stat-card"><div class="stat-label">Governance Participation</div><div class="stat-value">72%</div><div class="stat-change up">‚Üë 5%</div></div><div class="stat-card"><div class="stat-label">Avg. Response Time</div><div class="stat-value">2.4h</div><div class="stat-change down">‚Üì 15%</div></div><div class="stat-card"><div class="stat-label">Project Completion Rate</div><div class="stat-value">84%</div></div></div>
<div class="two-col">
<div class="card section-card"><div class="card-body"><h3>Participation by Area</h3>
${[{name:'Governance',pct:72,color:'var(--success)'},{name:'Development',pct:58,color:'var(--info)'},{name:'Community',pct:85,color:'var(--brown-warm)'},{name:'Identity',pct:45,color:'var(--warning)'},{name:'Operations',pct:62,color:'var(--olive)'}].map(a=>`<div style="margin-bottom:12px"><div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:4px"><span>${a.name}</span><span style="font-weight:600">${a.pct}%</span></div><div class="progress-bar"><div class="progress-fill" style="width:${a.pct}%;background:${a.color}"></div></div></div>`).join('')}
</div></div>
<div class="card section-card"><div class="card-body"><h3>Monthly Activity Trend</h3>
${[{month:'Mar 2026',votes:48,posts:23,tasks:67},{month:'Feb 2026',votes:42,posts:31,tasks:54},{month:'Jan 2026',votes:38,posts:19,tasks:45},{month:'Dec 2025',votes:35,posts:27,tasks:52}].map(m=>`<div class="list-item"><div class="list-item-content"><div class="list-item-title">${m.month}</div><div class="list-item-sub">${m.votes} votes ¬∑ ${m.posts} posts ¬∑ ${m.tasks} tasks completed</div></div></div>`).join('')}
</div></div>
</div>
${tpc}`;

// ‚îÄ‚îÄ‚îÄ SETTINGS ‚îÄ‚îÄ‚îÄ
pages.settings=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon">${I('settings',22,'var(--brown-warm)')}</div>
    <div><div class="page-title">Settings</div><div class="page-subtitle">Account & security</div></div>
  </div>
</div>
${tabsHTML(['Profile','Security','Notifications','Privacy'])}

<div class="two-col">
<div>
  <div class="card section-card"><div class="card-body">
    <h3>${I('shield',16,'var(--brown-warm)')} Authentication</h3>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Multi-Factor Authentication (MFA)</div><div class="toggle-desc">Require a second factor when signing in</div></div>
      <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
    </div>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Passkey Authentication</div><div class="toggle-desc">Use biometric or device-based passkeys for passwordless login</div></div>
      <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
    </div>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">SSI Credential Login</div><div class="toggle-desc">Authenticate using your Self-Sovereign Identity credential</div></div>
      <button class="toggle-switch" onclick="this.classList.toggle('on')"></button>
    </div>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Session Timeout</div><div class="toggle-desc">Automatically log out after 30 minutes of inactivity</div></div>
      <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
    </div>
  </div></div>

  <div class="card section-card"><div class="card-body">
    <h3>${I('key',16,'var(--brown-warm)')} Registered Passkeys</h3>
    <div class="security-item">
      <div class="security-item-icon">${I('fingerprint',20,'var(--brown-warm)')}</div>
      <div class="security-item-info"><div class="security-item-name">MacBook Pro Touch ID</div><div class="security-item-date">Added Feb 15, 2026</div></div>
      <button class="btn btn-sm btn-ghost" style="color:var(--danger)">Remove</button>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('smartphone',20,'var(--brown-warm)')}</div>
      <div class="security-item-info"><div class="security-item-name">iPhone Face ID</div><div class="security-item-date">Added Jan 8, 2026</div></div>
      <button class="btn btn-sm btn-ghost" style="color:var(--danger)">Remove</button>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('key',20,'var(--brown-warm)')}</div>
      <div class="security-item-info"><div class="security-item-name">YubiKey 5C</div><div class="security-item-date">Added Dec 20, 2025</div></div>
      <button class="btn btn-sm btn-ghost" style="color:var(--danger)">Remove</button>
    </div>
    <button class="btn" style="margin-top:12px;width:100%;justify-content:center" onclick="openRegisterPasskey()">${I('plus',14)} Register New Passkey</button>
  </div></div>
</div>

<div>
  <div class="card section-card"><div class="card-body">
    <h3>${I('lock',16,'var(--brown-warm)')} MFA Methods</h3>
    <div class="security-item">
      <div class="security-item-icon">${I('smartphone',20,'var(--success)')}</div>
      <div class="security-item-info"><div class="security-item-name">Authenticator App</div><div class="security-item-date">Primary ¬∑ Configured</div></div>
      <span class="badge badge-open">Active</span>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('smartphone',20,'var(--text-muted)')}</div>
      <div class="security-item-info"><div class="security-item-name">SMS Backup</div><div class="security-item-date">+61 ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢42</div></div>
      <span class="badge badge-info">Backup</span>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('key',20,'var(--text-muted)')}</div>
      <div class="security-item-info"><div class="security-item-name">Recovery Codes</div><div class="security-item-date">6 of 10 remaining</div></div>
      <button class="btn btn-sm" onclick="openRegenerateCodes()">Regenerate</button>
    </div>
  </div></div>

  <div class="card section-card"><div class="card-body">
    <h3>${I('globe',16,'var(--brown-warm)')} Active Sessions</h3>
    ${[
      {device:'Chrome on macOS',loc:'Sydney, AU',time:'Current session',current:true},
      {device:'Safari on iPhone',loc:'Sydney, AU',time:'2 hours ago',current:false},
      {device:'Firefox on Ubuntu',loc:'Singapore',time:'3 days ago',current:false},
    ].map(s=>`
    <div class="list-item">
      <div class="list-item-icon" style="background:${s.current?'rgba(107,138,94,0.1)':'var(--cream-light)'}">${I('globe',18,s.current?'var(--success)':'var(--text-muted)')}</div>
      <div class="list-item-content"><div class="list-item-title">${s.device} ${s.current?'<span class="badge badge-open" style="margin-left:6px">Current</span>':''}</div><div class="list-item-sub">${s.loc} ¬∑ ${s.time}</div></div>
      ${!s.current?'<button class="btn btn-sm btn-ghost" style="color:var(--danger)">Revoke</button>':''}
    </div>`).join('')}
    <button class="btn" style="margin-top:12px;width:100%;justify-content:center;color:var(--danger);border-color:rgba(192,96,74,0.3)">Revoke All Other Sessions</button>
  </div></div>

  <div class="card section-card"><div class="card-body">
    <h3>${I('shield',16,'var(--brown-warm)')} Password</h3>
    <div class="form-group"><label class="form-label">Current Password</label><input type="password" class="form-input" placeholder="Enter current password"></div>
    <div class="form-group"><label class="form-label">New Password</label><input type="password" class="form-input" placeholder="Enter new password"></div>
    <div class="form-group"><label class="form-label">Confirm Password</label><input type="password" class="form-input" placeholder="Confirm new password"></div>
    <button class="btn btn-primary" style="width:100%;justify-content:center">Update Password</button>
  </div></div>
</div>
</div>`;

// ‚îÄ‚îÄ‚îÄ CHAT FUNCTIONALITY ‚îÄ‚îÄ‚îÄ
function initChat(){
  const input=document.getElementById('chatInput');
  if(input)input.focus();
}
function sendChat(){
  const input=document.getElementById('chatInput');
  const msgs=document.getElementById('chatMessages');
  const val=input.value.trim();
  if(!val)return;
  msgs.innerHTML+=`<div class="chat-bubble user">${val}</div>`;
  input.value='';
  msgs.scrollTop=msgs.scrollHeight;
  setTimeout(()=>{
    const responses={
      'default':'Based on the community data, I can see that governance participation is up 23% this quarter with 32 active members. The most engaged areas are identity infrastructure (68% contribution rate) and governance voting (72% participation). Would you like me to generate a detailed report on any specific area?',
    };
    msgs.innerHTML+=`<div class="chat-bubble ai"><div class="ai-label">TANA AI</div>${responses.default}</div>`;
    msgs.scrollTop=msgs.scrollHeight;
  },1200);
}

// ‚îÄ‚îÄ‚îÄ ANIMATE CHART BARS ‚îÄ‚îÄ‚îÄ
function animateBars(){
  setTimeout(()=>{
    document.querySelectorAll('.chart-bar').forEach((b,i)=>{
      setTimeout(()=>{ b.style.height=b.dataset.h+'%'; },i*100);
    });
  },300);
}

// ‚îÄ‚îÄ‚îÄ ANIMATE TOKEN COUNT ‚îÄ‚îÄ‚îÄ
function animateTokens(){
  const el=document.getElementById('tokenVal');
  if(!el)return;
  let v=0;const target=1247;
  const step=()=>{
    v+=Math.ceil((target-v)/8);
    if(v>=target){el.textContent=target.toLocaleString();return;}
    el.textContent=v.toLocaleString();
    requestAnimationFrame(step);
  };
  setTimeout(step,400);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODAL SYSTEM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openModal(content,wide){
  const overlay=document.getElementById('modalOverlay');
  const panel=document.getElementById('modalPanel');
  panel.className='modal-panel'+(wide?' wide':'');
  panel.innerHTML=content;
  requestAnimationFrame(()=>overlay.classList.add('open'));
  document.addEventListener('keydown',escHandler);
}
function closeModal(){
  document.getElementById('modalOverlay').classList.remove('open');
  document.removeEventListener('keydown',escHandler);
}
function escHandler(e){if(e.key==='Escape')closeModal();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NEW PROPOSAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openNewProposal(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('git',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">New Proposal</div><div class="modal-subtitle">Submit a governance proposal for community vote</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Proposal Details</div>
      <div class="form-group">
        <label class="form-label">Proposal Title <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="e.g., Adopt new SSI credential schema" id="propTitle" oninput="document.getElementById('propTitleCount').textContent=this.value.length+'/120'">
        <div class="char-count" id="propTitleCount">0/120</div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
          <select class="form-select">
            <option value="">Select category‚Ä¶</option>
            <option>Governance</option>
            <option>Technical</option>
            <option>Treasury</option>
            <option>Membership</option>
            <option>Policy</option>
            <option>Constitutional</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Priority</label>
          <select class="form-select">
            <option>Normal</option>
            <option>High</option>
            <option>Critical</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Summary <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Brief summary of the proposal (displayed in list view)‚Ä¶" style="min-height:70px"></textarea>
        <div class="form-hint">Keep it concise ‚Äî 1-2 sentences that capture the essence</div>
      </div>
      <div class="form-group">
        <label class="form-label">Full Description <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Detailed proposal description. Include background context, rationale, specific changes proposed, and expected outcomes‚Ä¶" style="min-height:160px"></textarea>
        <div class="form-hint">Supports markdown formatting</div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('users',15,'var(--brown-warm)')} Voting Configuration</div>
      <div class="form-row three">
        <div class="form-group">
          <label class="form-label">Voting Period</label>
          <select class="form-select">
            <option>7 days</option>
            <option>14 days</option>
            <option>21 days</option>
            <option>30 days</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Quorum Required</label>
          <select class="form-select">
            <option>Simple Majority (50%+1)</option>
            <option>Two-Thirds (66%)</option>
            <option>Three-Quarters (75%)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Eligible Voters</label>
          <select class="form-select">
            <option>All Members</option>
            <option>Council Members Only</option>
            <option>Token Holders</option>
          </select>
        </div>
      </div>
      <div class="form-checkbox-row">
        <button class="form-checkbox checked" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
        <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Allow abstain votes</span>
      </div>
      <div class="form-checkbox-row">
        <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
        <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Anonymous voting (hide voter identity until closed)</span>
      </div>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Attachments & References</div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <span class="form-tag">governance <button onclick="this.parentElement.remove()">√ó</button></span>
          <span class="form-tag">SSI <button onclick="this.parentElement.remove()">√ó</button></span>
          <input placeholder="Add tag‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Supporting Documents</label>
        <div style="border:2px dashed var(--card-border);border-radius:12px;padding:28px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
          <div style="margin-bottom:6px">${I('upload',24,'var(--text-muted)')}</div>
          <div style="font-size:13.5px;color:var(--text-secondary)">Drag files here or <span style="color:var(--brown-warm);font-weight:500">browse</span></div>
          <div style="font-size:11.5px;color:var(--text-muted);margin-top:4px">PDF, DOCX, or images up to 10MB</div>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Related Proposals or Links</label>
        <input class="form-input" placeholder="Paste URL or search for related proposals‚Ä¶">
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save as Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('decisions')">Submit Proposal</button>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW PROPOSAL DETAIL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewProposal(id){
  const proposals={
    'DEC-024':{
      title:'Adopt SSI Credential Schema v2',
      status:'Active', category:'Technical',
      author:'Sarah Chen', authorAvatar:'SC', authorColor:'var(--olive)',
      created:'Mar 1, 2026', closes:'Mar 15, 2026',
      summary:'Proposal to upgrade the community\'s SSI credential schema to v2 to support KERI delegation, multi-sig attestations, and cross-chain anchoring.',
      description:'This proposal outlines the migration path from our current v1 credential schema to the new v2 specification. The upgrade introduces three key capabilities:\n\n1. KERI Delegation Support ‚Äî Enables hierarchical delegation of credential issuance authority through KERI event logs, allowing sub-organisations to issue credentials under the community\'s root identifier.\n\n2. Multi-Signature Attestations ‚Äî Requires multiple authorised parties to co-sign credential issuance for high-value credentials (e.g., governance roles, treasury access).\n\n3. Cross-Chain Anchoring ‚Äî Anchors credential revocation registries on both Cardano and Ethereum, enabling verification across ecosystems.\n\nThe migration will be phased over 6 weeks with backward compatibility maintained during the transition period.',
      votesFor:18, votesAgainst:3, votesAbstain:4, totalMembers:32,
      voted:true, votedChoice:'For',
      tags:['SSI','KERI','credentials','technical'],
    },
    'DEC-023':{
      title:'Community Treasury Allocation Q2',
      status:'Active', category:'Treasury',
      author:'Governance Council', authorAvatar:'GC', authorColor:'var(--brown-deep)',
      created:'Feb 28, 2026', closes:'Mar 12, 2026',
      summary:'Allocate 15% of community treasury to infrastructure development, 10% to education, and 5% to outreach programs for Q2 2026.',
      description:'This quarterly allocation proposal distributes community treasury funds across three priority areas identified in the annual planning session:\n\nInfrastructure (15% / ‚Ç≥18,750) ‚Äî Covers AWS hosting, KERI node cluster scaling, Cardano node maintenance, and identity wallet API infrastructure.\n\nEducation (10% / ‚Ç≥12,500) ‚Äî Funds developer workshops, SSI onboarding materials, video tutorials, and conference participation.\n\nOutreach (5% / ‚Ç≥6,250) ‚Äî Supports community growth initiatives including partner engagement, social media presence, and regional meetups.\n\nThe remaining 70% stays in reserve for operational expenses and emergency allocation.',
      votesFor:10, votesAgainst:2, votesAbstain:2, totalMembers:32,
      voted:false, votedChoice:null,
      tags:['treasury','budget','Q2'],
    },
    'DEC-022':{
      title:'Add Constitutional Committee Role',
      status:'Pending Quorum', category:'Governance',
      author:'Mark', authorAvatar:'MC', authorColor:'var(--brown-warm)',
      created:'Feb 20, 2026', closes:'Mar 5, 2026',
      summary:'Establish a Constitutional Committee to oversee governance protocol compliance and arbitration processes.',
      description:'This proposal establishes a 5-member Constitutional Committee (CC) responsible for:\n\nProtocol Compliance ‚Äî Reviewing all governance proposals for alignment with the Community Constitution before they go to vote.\n\nArbitration ‚Äî Resolving disputes between community members or between members and governance decisions.\n\nConstitutional Amendments ‚Äî Managing the formal process for proposing and ratifying changes to the Community Constitution.\n\nCC members serve 12-month rotating terms with staggered elections. Initial members will be nominated and confirmed through a special election within 30 days of this proposal passing.',
      votesFor:6, votesAgainst:1, votesAbstain:2, totalMembers:32,
      voted:false, votedChoice:null,
      tags:['governance','constitution','committee'],
    },
  };
  const p=proposals[id]||proposals['DEC-024'];
  const totalVotes=p.votesFor+p.votesAgainst+p.votesAbstain;
  const pctFor=totalVotes>0?Math.round(p.votesFor/totalVotes*100):0;
  const pctAgainst=totalVotes>0?Math.round(p.votesAgainst/totalVotes*100):0;
  const descParagraphs=p.description.split('\\n\\n').filter(Boolean).map(para=>`<p style="margin-bottom:12px">${para}</p>`).join('');

  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <span class="badge badge-${p.status==='Active'?'open':'pending'}">${p.status}</span>
      <span class="badge badge-info">${p.category}</span>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="detail-header">
      <div style="flex:1">
        <div style="font-size:12px;color:var(--text-muted);margin-bottom:4px;font-weight:600;letter-spacing:0.05em">${id}</div>
        <div class="detail-title">${p.title}</div>
        <div class="detail-meta">
          <span class="detail-meta-item"><div class="avatar" style="background:${p.authorColor};width:22px;height:22px;font-size:9px;border-radius:6px">${p.authorAvatar}</div> ${p.author}</span>
          <span class="detail-meta-item">${I('token',13,'#a89888')} Created ${p.created}</span>
          <span class="detail-meta-item">${I('token',13,'#a89888')} Closes ${p.closes}</span>
        </div>
      </div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Voting Results</div>
      <div class="vote-results">
        <div class="vote-result-card">
          <div class="vote-result-value" style="color:var(--success)">${p.votesFor}</div>
          <div class="vote-result-label">For (${pctFor}%)</div>
        </div>
        <div class="vote-result-card">
          <div class="vote-result-value" style="color:var(--danger)">${p.votesAgainst}</div>
          <div class="vote-result-label">Against (${pctAgainst}%)</div>
        </div>
        <div class="vote-result-card">
          <div class="vote-result-value" style="color:var(--text-muted)">${p.votesAbstain}</div>
          <div class="vote-result-label">Abstain</div>
        </div>
      </div>
      <div class="progress-bar" style="height:10px;border-radius:5px;margin-bottom:8px;display:flex;overflow:hidden;background:var(--cream-light)">
        <div style="width:${pctFor}%;background:var(--success);transition:width 0.6s ease"></div>
        <div style="width:${pctAgainst}%;background:var(--danger);transition:width 0.6s ease"></div>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text-muted)">
        <span>${totalVotes} of ${p.totalMembers} members voted</span>
        <span>${totalVotes>=Math.ceil(p.totalMembers/2)?'Quorum reached ‚úì':'Need '+(Math.ceil(p.totalMembers/2)-totalVotes)+' more for quorum'}</span>
      </div>
      ${!p.voted?`
      <div style="display:flex;gap:8px;margin-top:14px">
        <button class="btn btn-primary" style="flex:1;justify-content:center;background:var(--success);border-color:var(--success)">${I('check',14,'#fff')} Vote For</button>
        <button class="btn" style="flex:1;justify-content:center;color:var(--danger);border-color:var(--danger)">Vote Against</button>
        <button class="btn" style="flex:1;justify-content:center">Abstain</button>
      </div>`:`
      <div style="margin-top:14px;padding:10px 14px;border-radius:10px;background:rgba(107,138,94,0.08);display:flex;align-items:center;gap:8px;font-size:13px;color:var(--success);font-weight:500">
        ${I('check',16,'var(--success)',2.5)} You voted "${p.votedChoice}" on this proposal
      </div>`}
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Description</div>
      <div style="font-size:14px;line-height:1.7;color:var(--text-secondary)">${p.description.replace(/\n\n/g,'</p><p style="margin-bottom:12px">').replace(/\n/g,'<br>')}</div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Tags</div>
      <div style="display:flex;flex-wrap:wrap;gap:6px">
        ${p.tags.map(t=>`<span class="form-tag">${t}</span>`).join('')}
      </div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Activity Timeline</div>
      <div class="timeline-item">
        <div class="timeline-dot">${I('plus',14,'var(--success)')}</div>
        <div class="timeline-content"><div class="timeline-text"><strong>${p.author}</strong> created this proposal</div><div class="timeline-date">${p.created}</div></div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot">${I('check',14,'var(--success)')}</div>
        <div class="timeline-content"><div class="timeline-text">Voting period opened</div><div class="timeline-date">${p.created}</div></div>
      </div>
      ${totalVotes>=Math.ceil(p.totalMembers/2)?`
      <div class="timeline-item">
        <div class="timeline-dot" style="background:rgba(107,138,94,0.15)">${I('users',14,'var(--success)')}</div>
        <div class="timeline-content"><div class="timeline-text"><strong>Quorum reached</strong> ‚Äî ${totalVotes} of ${p.totalMembers} members voted</div><div class="timeline-date">Mar 2, 2026</div></div>
      </div>`:''}
    </div>

    <div class="detail-section" style="border-bottom:none;margin-bottom:0;padding-bottom:0">
      <div class="detail-section-title">Discussion (${id==='DEC-024'?'5':'2'} comments)</div>
      <div class="comment-item">
        <div class="avatar" style="background:var(--info);width:32px;height:32px;font-size:11px;border-radius:8px">AR</div>
        <div style="flex:1"><div><span class="comment-author">Alex Rivera</span><span class="comment-time">2 hours ago</span></div><div class="comment-body">Strong support for this. The multi-sig attestation feature alone would significantly improve our credential security posture.</div></div>
      </div>
      <div class="comment-item">
        <div class="avatar" style="background:var(--olive);width:32px;height:32px;font-size:11px;border-radius:8px">ML</div>
        <div style="flex:1"><div><span class="comment-author">Mei Lin</span><span class="comment-time">5 hours ago</span></div><div class="comment-body">What's the estimated migration effort for existing credentials? Will holders need to re-issue?</div></div>
      </div>
      <div style="display:flex;gap:10px;margin-top:14px">
        <input class="form-input" placeholder="Add a comment‚Ä¶" style="flex:1;margin-bottom:0">
        <button class="btn btn-primary btn-sm">${I('send',14,'#edd6b7')}</button>
      </div>
    </div>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NEW POST (CONVERSATIONS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openNewPost(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('chat',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">New Post</div><div class="modal-subtitle">Start a conversation with the community</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="form-label">Post Title <span style="color:var(--danger)">*</span></label>
      <input class="form-input" placeholder="Give your post a clear, descriptive title">
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
        <select class="form-select">
          <option value="">Select category‚Ä¶</option>
          <option>Announcement</option>
          <option>Discussion</option>
          <option>Question</option>
          <option>Proposal</option>
          <option>Update</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Visibility</label>
        <select class="form-select">
          <option>All Members</option>
          <option>Council Only</option>
          <option>Working Group</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Content <span style="color:var(--danger)">*</span></label>
      <textarea class="form-input" placeholder="Write your post content here. You can use markdown for formatting‚Ä¶" style="min-height:200px"></textarea>
      <div class="form-hint">Supports markdown: **bold**, *italic*, [links](url), bullet lists, code blocks</div>
    </div>
    <div class="form-group">
      <label class="form-label">Tags</label>
      <div class="form-tag-input" onclick="this.querySelector('input').focus()">
        <input placeholder="Add tags to help others find your post‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Attachments</label>
      <div style="border:2px dashed var(--card-border);border-radius:12px;padding:24px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
        <div style="margin-bottom:6px">${I('upload',22,'var(--text-muted)')}</div>
        <div style="font-size:13px;color:var(--text-secondary)">Drag files here or <span style="color:var(--brown-warm);font-weight:500">browse</span></div>
        <div style="font-size:11px;color:var(--text-muted);margin-top:3px">Images, PDFs, or documents up to 10MB each</div>
      </div>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Pin this post to the top of the feed</span>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox checked" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Allow comments on this post</span>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('conversations')">${I('send',14,'#edd6b7')} Publish Post</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddContact(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('users',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Add Contact</div><div class="modal-subtitle">Add an organisation or individual</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('user',15,'var(--brown-warm)')} Contact Type</div>
      <div style="display:flex;gap:10px;margin-bottom:16px">
        <button class="btn" style="flex:1;justify-content:center" id="ctIndiv" onclick="setContactType('individual')">${I('user',16)} Individual</button>
        <button class="btn" style="flex:1;justify-content:center" id="ctOrg" onclick="setContactType('organisation')">${I('building',16)} Organisation</button>
      </div>
    </div>

    <div class="form-section" id="contactFields">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Details</div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">First Name <span style="color:var(--danger)">*</span></label>
          <input class="form-input" placeholder="First name">
        </div>
        <div class="form-group">
          <label class="form-label">Last Name <span style="color:var(--danger)">*</span></label>
          <input class="form-input" placeholder="Last name">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Email Address</label>
        <input class="form-input" type="email" placeholder="email@example.com">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Phone</label>
          <input class="form-input" type="tel" placeholder="+61 400 000 000">
        </div>
        <div class="form-group">
          <label class="form-label">Location</label>
          <input class="form-input" placeholder="City, Country">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Role / Title</label>
          <input class="form-input" placeholder="e.g., Developer, Facilitator">
        </div>
        <div class="form-group">
          <label class="form-label">Organisation</label>
          <select class="form-select">
            <option value="">Select organisation‚Ä¶</option>
            <option>selfdriven Foundation</option>
            <option>Cardano Foundation</option>
            <option>TANA Insurance Co.</option>
            <option>Independent</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('shield',15,'var(--brown-warm)')} Identity & Access</div>
      <div class="form-group">
        <label class="form-label">DID (Decentralized Identifier)</label>
        <input class="form-input" placeholder="did:keri:EXq5‚Ä¶" style="font-family:'JetBrains Mono',monospace;font-size:13px">
        <div class="form-hint">Optional ‚Äî link their Self-Sovereign Identity credential</div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Community Role</label>
          <select class="form-select">
            <option>Member</option>
            <option>Contributor</option>
            <option>Facilitator</option>
            <option>Council Member</option>
            <option>Observer</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Team Assignment</label>
          <select class="form-select">
            <option value="">No team</option>
            <option>Identity Working Group</option>
            <option>Governance Council</option>
            <option>Operations</option>
            <option>Development</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Additional</div>
      <div class="form-group">
        <label class="form-label">Notes</label>
        <textarea class="form-input" placeholder="Any additional notes about this contact‚Ä¶" style="min-height:70px"></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <input placeholder="Add tags‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('contacts')">${I('plus',14,'#edd6b7')} Add Contact</button>
  </div>
  `);
  setContactType('individual');
}

function setContactType(type){
  const indBtn=document.getElementById('ctIndiv');
  const orgBtn=document.getElementById('ctOrg');
  const fields=document.getElementById('contactFields');
  if(type==='individual'){
    indBtn.style.borderColor='var(--brown-warm)';indBtn.style.background='var(--accent-light)';indBtn.style.color='var(--brown-deep)';
    orgBtn.style.borderColor='';orgBtn.style.background='';orgBtn.style.color='';
    fields.innerHTML=`
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Personal Details</div>
      <div class="form-row"><div class="form-group"><label class="form-label">First Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="First name"></div><div class="form-group"><label class="form-label">Last Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="Last name"></div></div>
      <div class="form-group"><label class="form-label">Email Address</label><input class="form-input" type="email" placeholder="email@example.com"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Phone</label><input class="form-input" type="tel" placeholder="+61 400 000 000"></div><div class="form-group"><label class="form-label">Location</label><input class="form-input" placeholder="City, Country"></div></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Role / Title</label><input class="form-input" placeholder="e.g., Developer, Facilitator"></div><div class="form-group"><label class="form-label">Organisation</label><select class="form-select"><option value="">Select‚Ä¶</option><option>selfdriven Foundation</option><option>Cardano Foundation</option><option>TANA Insurance Co.</option><option>Independent</option></select></div></div>`;
  } else {
    orgBtn.style.borderColor='var(--brown-warm)';orgBtn.style.background='var(--accent-light)';orgBtn.style.color='var(--brown-deep)';
    indBtn.style.borderColor='';indBtn.style.background='';indBtn.style.color='';
    fields.innerHTML=`
      <div class="form-section-title">${I('building',15,'var(--brown-warm)')} Organisation Details</div>
      <div class="form-group"><label class="form-label">Organisation Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="Organisation name"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Type</label><select class="form-select"><option>Company</option><option>Foundation</option><option>Government</option><option>Non-Profit</option><option>Community Group</option></select></div><div class="form-group"><label class="form-label">Industry</label><input class="form-input" placeholder="e.g., Technology, Finance"></div></div>
      <div class="form-group"><label class="form-label">Website</label><input class="form-input" placeholder="https://‚Ä¶"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Primary Contact Email</label><input class="form-input" type="email" placeholder="contact@org.com"></div><div class="form-group"><label class="form-label">Location / HQ</label><input class="form-input" placeholder="City, Country"></div></div>
      <div class="form-group"><label class="form-label">Description</label><textarea class="form-input" placeholder="Brief description of the organisation‚Ä¶" style="min-height:70px"></textarea></div>`;
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SUBMIT OPPORTUNITY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openSubmitOpportunity(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('smile',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Submit Opportunity</div><div class="modal-subtitle">Suggest an improvement for the community</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('zap',15,'var(--brown-warm)')} Opportunity Details</div>
      <div class="form-group">
        <label class="form-label">Title <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="A clear, concise title for the opportunity">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
          <select class="form-select">
            <option value="">Select category‚Ä¶</option>
            <option>Technical Infrastructure</option>
            <option>Governance Process</option>
            <option>Community Engagement</option>
            <option>Security & Identity</option>
            <option>Documentation</option>
            <option>Partnerships</option>
            <option>Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Estimated Impact</label>
          <select class="form-select">
            <option>Low ‚Äî Nice to have</option>
            <option>Medium ‚Äî Meaningful improvement</option>
            <option selected>High ‚Äî Significant community benefit</option>
            <option>Critical ‚Äî Urgent need</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Description <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Describe the opportunity in detail. What problem does it solve? Who benefits? What would the outcome look like?" style="min-height:140px"></textarea>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('check',15,'var(--brown-warm)')} Success Criteria</div>
      <div class="form-group">
        <label class="form-label">How will we know this is successful?</label>
        <textarea class="form-input" placeholder="Define measurable outcomes or acceptance criteria‚Ä¶" style="min-height:80px"></textarea>
        <div class="form-hint">E.g., "Reduce onboarding time from 30 minutes to 5 minutes"</div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Estimated Effort</label>
          <select class="form-select">
            <option>Small (days)</option>
            <option>Medium (weeks)</option>
            <option selected>Large (months)</option>
            <option>Extra Large (quarter+)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Suggested Priority</label>
          <select class="form-select">
            <option>Low</option>
            <option selected>Medium</option>
            <option>High</option>
            <option>Urgent</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('users',15,'var(--brown-warm)')} Stakeholders & Resources</div>
      <div class="form-group">
        <label class="form-label">Who would champion this?</label>
        <select class="form-select">
          <option value="">Select a person or team‚Ä¶</option>
          <option>Sarah Chen ‚Äî Identity Lead</option>
          <option>Alex Rivera ‚Äî Developer</option>
          <option>Governance Council</option>
          <option>Identity Working Group</option>
          <option>Operations Team</option>
          <option>I'll champion it myself</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Related Areas of Focus</label>
        <div style="display:flex;flex-wrap:wrap;gap:8px">
          ${['Identity','Governance','Infrastructure','Education','Community','Security','Treasury','Partnerships'].map(a=>`<button class="btn btn-sm" style="font-size:12px" onclick="this.style.borderColor=this.style.borderColor?'':'var(--brown-warm)';this.style.background=this.style.background==='var(--accent-light)'?'':'var(--accent-light)';this.style.color=this.style.color==='var(--brown-deep)'?'':'var(--brown-deep)'">${a}</button>`).join('')}
        </div>
      </div>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Supporting Materials</div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <input placeholder="Add tags‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Reference Links</label>
        <input class="form-input" placeholder="Paste relevant URLs, prior art, or research links‚Ä¶" style="margin-bottom:8px">
        <input class="form-input" placeholder="Add another link‚Ä¶">
      </div>
      <div class="form-group">
        <label class="form-label">Attachments</label>
        <div style="border:2px dashed var(--card-border);border-radius:12px;padding:24px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
          <div style="margin-bottom:6px">${I('upload',22,'var(--text-muted)')}</div>
          <div style="font-size:13px;color:var(--text-secondary)">Drag files here or <span style="color:var(--brown-warm);font-weight:500">browse</span></div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('opportunities')">Submit Opportunity</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NEW PROJECT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openNewProject(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('folder',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">New Project</div><div class="modal-subtitle">Create a community project with tasks</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('folder',15,'var(--brown-warm)')} Project Details</div>
      <div class="form-group">
        <label class="form-label">Project Name <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="e.g., Identity Wallet v3">
      </div>
      <div class="form-group">
        <label class="form-label">Description <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Describe the project goals, scope, and expected deliverables‚Ä¶" style="min-height:120px"></textarea>
      </div>
      <div class="form-row three">
        <div class="form-group">
          <label class="form-label">Category</label>
          <select class="form-select">
            <option>Development</option><option>Governance</option><option>Infrastructure</option>
            <option>Community</option><option>Research</option><option>Documentation</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Start Date</label>
          <input class="form-input" type="date">
        </div>
        <div class="form-group">
          <label class="form-label">Target Completion</label>
          <input class="form-input" type="date">
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('users',15,'var(--brown-warm)')} Team</div>
      <div class="form-group">
        <label class="form-label">Project Lead <span style="color:var(--danger)">*</span></label>
        <select class="form-select">
          <option value="">Select lead‚Ä¶</option>
          <option>Sarah Chen</option><option>Alex Rivera</option><option>Mei Lin</option>
          <option>James Whitfield</option><option>Mark</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Team Members</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <span class="form-tag">Sarah Chen <button onclick="this.parentElement.remove()">√ó</button></span>
          <input placeholder="Add members‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Working Group</label>
        <select class="form-select">
          <option value="">None</option><option>Identity Working Group</option>
          <option>Governance Council</option><option>Operations</option><option>Development</option>
        </select>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('check',15,'var(--brown-warm)')} Initial Tasks</div>
      <div id="projectTasks">
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px"><input class="form-input" placeholder="Task 1 ‚Äî e.g., Define project scope" style="margin-bottom:0;flex:1"><select class="form-select" style="width:120px"><option>To Do</option><option>In Progress</option></select></div>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px"><input class="form-input" placeholder="Task 2" style="margin-bottom:0;flex:1"><select class="form-select" style="width:120px"><option>To Do</option><option>In Progress</option></select></div>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px"><input class="form-input" placeholder="Task 3" style="margin-bottom:0;flex:1"><select class="form-select" style="width:120px"><option>To Do</option><option>In Progress</option></select></div>
      </div>
      <button class="btn btn-sm btn-ghost" onclick="const d=document.getElementById('projectTasks');const n=d.children.length+1;d.insertAdjacentHTML('beforeend','<div style=\\'display:flex;gap:8px;align-items:center;margin-bottom:8px\\'><input class=\\'form-input\\' placeholder=\\'Task '+n+'\\' style=\\'margin-bottom:0;flex:1\\'><select class=\\'form-select\\' style=\\'width:120px\\'><option>To Do</option><option>In Progress</option></select></div>')">${I('plus',14)} Add Another Task</button>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Tags & Labels</div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div style="display:flex;flex-wrap:wrap;gap:8px">
          ${['Design','Development','Testing','Documentation','Research','Infrastructure'].map(a=>`<button class="btn btn-sm" style="font-size:12px" onclick="this.style.borderColor=this.style.borderColor?'':'var(--brown-warm)';this.style.background=this.style.background==='var(--accent-light)'?'':'var(--accent-light)'">${a}</button>`).join('')}
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('projects')">Create Project</button>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UPLOAD DOCUMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openUploadDoc(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('upload',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Upload Document</div><div class="modal-subtitle">Share a document with the community</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="form-label">File Upload <span style="color:var(--danger)">*</span></label>
      <div style="border:2px dashed var(--card-border);border-radius:14px;padding:40px 20px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
        <div style="margin-bottom:8px">${I('upload',32,'var(--text-muted)')}</div>
        <div style="font-size:15px;font-weight:500;color:var(--text-primary);margin-bottom:4px">Drag & drop files here</div>
        <div style="font-size:13px;color:var(--text-secondary)">or <span style="color:var(--brown-warm);font-weight:500;text-decoration:underline">browse your computer</span></div>
        <div style="font-size:11.5px;color:var(--text-muted);margin-top:8px">PDF, DOCX, XLSX, PPTX, images ¬∑ Max 25MB per file</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Document Title <span style="color:var(--danger)">*</span></label>
      <input class="form-input" placeholder="Give this document a descriptive title">
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
        <select class="form-select">
          <option value="">Select category‚Ä¶</option>
          <option>Governance</option><option>Technical</option><option>Financial</option>
          <option>Template</option><option>Policy</option><option>Meeting Notes</option><option>Other</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Visibility</label>
        <select class="form-select">
          <option>All Members</option><option>Council Only</option>
          <option>Working Group</option><option>Admins Only</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Description</label>
      <textarea class="form-input" placeholder="Brief description of the document contents‚Ä¶" style="min-height:80px"></textarea>
    </div>
    <div class="form-group">
      <label class="form-label">Tags</label>
      <div class="form-tag-input" onclick="this.querySelector('input').focus()">
        <input placeholder="Add tags‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
      </div>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Notify all community members about this upload</span>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">This document replaces a previous version</span>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('docs')">${I('upload',14,'#edd6b7')} Upload Document</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TOKEN TRANSACTION HISTORY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openTokenHistory(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('token',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Transaction History</div><div class="modal-subtitle">Your TANA token activity</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="display:flex;gap:10px;margin-bottom:20px">
      <div class="search-box" style="max-width:none;flex:1">${I('search',16,'#a89888')}<input placeholder="Search transactions‚Ä¶"></div>
      <select class="form-select" style="width:150px"><option>All Types</option><option>Earned</option><option>Redeemed</option><option>Bonus</option></select>
    </div>
    <table class="data-table">
    <thead><tr><th>Date</th><th>Activity</th><th>Category</th><th style="text-align:right">Amount</th></tr></thead>
    <tbody>
    ${[
      {date:'Mar 2, 2026',act:'Voted on DEC-024',cat:'Governance',amt:'+15'},
      {date:'Mar 1, 2026',act:'Completed PR review',cat:'Development',amt:'+25'},
      {date:'Feb 28, 2026',act:'Submitted opportunity',cat:'Community',amt:'+10'},
      {date:'Feb 27, 2026',act:'Attended governance meeting',cat:'Governance',amt:'+20'},
      {date:'Feb 25, 2026',act:'Documentation update',cat:'Development',amt:'+15'},
      {date:'Feb 23, 2026',act:'Redeemed for community credits',cat:'Redemption',amt:'-50'},
      {date:'Feb 20, 2026',act:'Facilitated onboarding session',cat:'Community',amt:'+30'},
      {date:'Feb 18, 2026',act:'Weekly streak bonus',cat:'Bonus',amt:'+10'},
      {date:'Feb 15, 2026',act:'Reviewed credential schema',cat:'Development',amt:'+20'},
      {date:'Feb 12, 2026',act:'Voted on DEC-021',cat:'Governance',amt:'+15'},
    ].map(t=>`<tr>
      <td style="font-size:12.5px;color:var(--text-muted)">${t.date}</td>
      <td style="font-weight:500">${t.act}</td>
      <td><span class="badge badge-info">${t.cat}</span></td>
      <td style="text-align:right;font-weight:600;color:${t.amt.startsWith('+')?'var(--success)':'var(--danger)'}">${t.amt}</td>
    </tr>`).join('')}
    </tbody></table>
    <div style="text-align:center;padding:16px 0;font-size:13px;color:var(--text-muted)">Showing 10 most recent ¬∑ <span style="color:var(--brown-warm);cursor:pointer;font-weight:500">Load more</span></div>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TOKEN REDEEM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openTokenRedeem(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('token',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Redeem Tokens</div><div class="modal-subtitle">Exchange TANA tokens for rewards</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="text-align:center;padding:16px 0 24px;border-bottom:1px solid var(--card-border);margin-bottom:20px">
      <div style="font-size:13px;color:var(--text-muted)">Available Balance</div>
      <div style="font-family:'Playfair Display',serif;font-size:36px;font-weight:700;color:var(--text-heading)">1,247</div>
      <div style="font-size:12px;color:var(--text-muted)">TANA Tokens</div>
    </div>
    <div class="form-section-title">${I('check',15,'var(--brown-warm)')} Choose Reward</div>
    ${[
      {name:'Community Credits',desc:'Use for governance proposal sponsoring',cost:100,icon:'dollar'},
      {name:'Premium Support Priority',desc:'Get prioritised support for 30 days',cost:200,icon:'zap'},
      {name:'Conference Pass Credit',desc:'Discount toward community events',cost:500,icon:'globe'},
      {name:'Governance Weight Boost',desc:'2x voting weight for one proposal',cost:300,icon:'shield'},
      {name:'Custom Badge',desc:'Display a custom badge on your profile',cost:150,icon:'heart'},
    ].map(r=>`
    <div style="display:flex;align-items:center;gap:14px;padding:14px 16px;border-radius:12px;border:1.5px solid var(--card-border);margin-bottom:8px;cursor:pointer;transition:all 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)';this.style.background='var(--accent-light)'" onmouseout="this.style.borderColor='';this.style.background=''">
      <div class="list-item-icon" style="background:var(--accent-light)">${I(r.icon,18,'var(--brown-warm)')}</div>
      <div style="flex:1"><div style="font-size:14px;font-weight:500;color:var(--text-primary)">${r.name}</div><div style="font-size:12.5px;color:var(--text-muted)">${r.desc}</div></div>
      <div style="text-align:right"><div style="font-size:15px;font-weight:700;color:var(--text-heading)">${r.cost}</div><div style="font-size:10.5px;color:var(--text-muted)">tokens</div></div>
    </div>`).join('')}
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal()">Redeem Selected</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD RESOURCE (OPERATIONS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddResource(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('pie',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Add Resource</div><div class="modal-subtitle">Register a new community resource</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Resource Details</div>
      <div class="form-group">
        <label class="form-label">Resource Name <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="e.g., AWS EC2 Cluster, API Gateway">
      </div>
      <div class="form-row three">
        <div class="form-group">
          <label class="form-label">Type <span style="color:var(--danger)">*</span></label>
          <select class="form-select">
            <option value="">Select type‚Ä¶</option>
            <option>Cloud</option><option>Infrastructure</option><option>Service</option>
            <option>Hardware</option><option>Software License</option><option>Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Status</label>
          <select class="form-select">
            <option>Active</option><option>Provisioning</option><option>Maintenance</option><option>Decommissioned</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Allocation</label>
          <select class="form-select">
            <option>Operations</option><option>Development</option><option>Identity WG</option>
            <option>Blockchain</option><option>Community</option>
          </select>
        </div>
      </div>
    </div>
    <div class="form-section">
      <div class="form-section-title">${I('dollar',15,'var(--brown-warm)')} Cost & Capacity</div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Monthly Cost</label>
          <input class="form-input" type="number" placeholder="0.00" style="font-family:'JetBrains Mono',monospace">
        </div>
        <div class="form-group">
          <label class="form-label">Currency</label>
          <select class="form-select">
            <option>USD</option><option>AUD</option><option>EUR</option><option>ADA (‚Ç≥)</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Capacity / Limits</label>
        <input class="form-input" placeholder="e.g., 4 vCPU, 16GB RAM, 500GB SSD">
      </div>
    </div>
    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Access & Notes</div>
      <div class="form-group">
        <label class="form-label">Management URL</label>
        <input class="form-input" placeholder="https://console.aws.amazon.com/‚Ä¶">
      </div>
      <div class="form-group">
        <label class="form-label">Notes</label>
        <textarea class="form-input" placeholder="Additional details, access instructions, dependencies‚Ä¶" style="min-height:70px"></textarea>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('operations')">Add Resource</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD TRANSACTION (FINANCIALS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddTransaction(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('dollar',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Add Transaction</div><div class="modal-subtitle">Record income or expense</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="form-label">Transaction Type <span style="color:var(--danger)">*</span></label>
      <div style="display:flex;gap:10px">
        <button class="btn" style="flex:1;justify-content:center;border-color:var(--success);background:rgba(107,138,94,0.08);color:var(--success)" id="txIncome" onclick="this.style.borderColor='var(--success)';this.style.background='rgba(107,138,94,0.08)';this.style.color='var(--success)';document.getElementById('txExpense').style.borderColor='';document.getElementById('txExpense').style.background='';document.getElementById('txExpense').style.color=''">${I('plus',14,'var(--success)')} Income</button>
        <button class="btn" style="flex:1;justify-content:center" id="txExpense" onclick="this.style.borderColor='var(--danger)';this.style.background='rgba(192,96,74,0.08)';this.style.color='var(--danger)';document.getElementById('txIncome').style.borderColor='';document.getElementById('txIncome').style.background='';document.getElementById('txIncome').style.color=''">${I('download',14)} Expense</button>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Description <span style="color:var(--danger)">*</span></label>
      <input class="form-input" placeholder="e.g., AWS Infrastructure, Member contributions">
    </div>
    <div class="form-row three">
      <div class="form-group">
        <label class="form-label">Amount <span style="color:var(--danger)">*</span></label>
        <input class="form-input" type="number" placeholder="0.00" style="font-family:'JetBrains Mono',monospace">
      </div>
      <div class="form-group">
        <label class="form-label">Currency</label>
        <select class="form-select">
          <option>USD</option><option>AUD</option><option>EUR</option><option>ADA (‚Ç≥)</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Date <span style="color:var(--danger)">*</span></label>
        <input class="form-input" type="date">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category</label>
        <select class="form-select">
          <option value="">Select category‚Ä¶</option>
          <option>Infrastructure</option><option>Hosting</option><option>Development</option>
          <option>Grants</option><option>Contributions</option><option>Services</option>
          <option>Staking Rewards</option><option>Other</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Payment Method</label>
        <select class="form-select">
          <option>Bank Transfer</option><option>On-Chain (Cardano)</option><option>On-Chain (Ethereum)</option>
          <option>Credit Card</option><option>PayPal</option><option>Other</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">On-Chain Tx Hash</label>
      <input class="form-input" placeholder="0x‚Ä¶" style="font-family:'JetBrains Mono',monospace;font-size:13px">
      <div class="form-hint">Optional ‚Äî link this to a blockchain transaction</div>
    </div>
    <div class="form-group">
      <label class="form-label">Attachments</label>
      <div style="border:2px dashed var(--card-border);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
        ${I('upload',20,'var(--text-muted)')}
        <div style="font-size:13px;color:var(--text-secondary);margin-top:4px">Upload receipt or invoice</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Notes</label>
      <textarea class="form-input" placeholder="Additional details‚Ä¶" style="min-height:60px"></textarea>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('financials')">Save Transaction</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// EXPORT REPORT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openExportReport(source){
  const title=source==='financials'?'Export Financial Report':'Export Community Report';
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('download',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">${title}</div><div class="modal-subtitle">Generate and download a report</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Date Range</label>
        <select class="form-select">
          <option>Last 30 days</option><option>Last quarter</option><option>Last 6 months</option>
          <option>Year to date</option><option>Last year</option><option>Custom range</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Format</label>
        <select class="form-select">
          <option>PDF Report</option><option>CSV / Spreadsheet</option><option>JSON Data</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Include Sections</label>
      ${(source==='financials'?
        ['Summary Overview','Income Breakdown','Expense Breakdown','On-Chain Transactions','Treasury Balance','Charts & Graphs']:
        ['Community Activity','Governance Participation','Token Distribution','Project Progress','Member Engagement','AI Insights']
      ).map(s=>`
      <div class="form-checkbox-row">
        <button class="form-checkbox checked" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
        <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">${s}</span>
      </div>`).join('')}
    </div>
    <div class="form-checkbox-row" style="padding-top:12px;border-top:1px solid var(--card-border)">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Email a copy to me when ready</span>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal()">${I('download',14,'#edd6b7')} Generate Report</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REGISTER PASSKEY (SETTINGS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openRegisterPasskey(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('key',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Register New Passkey</div><div class="modal-subtitle">Add a passwordless authentication method</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="text-align:center;padding:20px 0 28px">
      <div style="width:80px;height:80px;border-radius:20px;background:var(--accent-light);display:inline-flex;align-items:center;justify-content:center;margin-bottom:16px">
        ${I('fingerprint',36,'var(--brown-warm)')}
      </div>
      <div style="font-size:16px;font-weight:600;color:var(--text-primary);margin-bottom:6px">Choose your passkey type</div>
      <div style="font-size:13.5px;color:var(--text-secondary);line-height:1.5;max-width:360px;margin:0 auto">Passkeys provide fast, secure, passwordless authentication using your device's biometric sensor or security key.</div>
    </div>

    ${[
      {icon:'fingerprint',name:'Biometric (Touch ID / Face ID)',desc:'Use your device\'s built-in biometric sensor',rec:true},
      {icon:'key',name:'Hardware Security Key',desc:'Use a YubiKey, Titan, or other FIDO2 key',rec:false},
      {icon:'smartphone',name:'Mobile Device',desc:'Use your phone as a passkey via QR code',rec:false},
      {icon:'globe',name:'Browser Passkey',desc:'Store passkey in your browser\'s credential manager',rec:false},
    ].map(p=>`
    <div style="display:flex;align-items:center;gap:14px;padding:16px;border-radius:12px;border:1.5px solid var(--card-border);margin-bottom:8px;cursor:pointer;transition:all 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)';this.style.background='var(--accent-light)'" onmouseout="this.style.borderColor='';this.style.background=''">
      <div class="security-item-icon" style="width:44px;height:44px">${I(p.icon,22,'var(--brown-warm)')}</div>
      <div style="flex:1">
        <div style="font-size:14px;font-weight:500;color:var(--text-primary)">${p.name} ${p.rec?'<span class="badge badge-open" style="margin-left:6px">Recommended</span>':''}</div>
        <div style="font-size:12.5px;color:var(--text-muted);margin-top:1px">${p.desc}</div>
      </div>
      ${I('chevron',16,'#a89888')}
    </div>`).join('')}

    <div style="margin-top:20px;padding:14px 16px;border-radius:12px;background:var(--cream-pale);font-size:12.5px;color:var(--text-secondary);line-height:1.5">
      ${I('shield',14,'var(--brown-warm)')} <strong style="color:var(--text-primary)">Security note:</strong> Passkeys are stored locally on your device and never transmitted to our servers. Each passkey is unique to this service and cannot be used to track you across sites.
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REGENERATE RECOVERY CODES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openRegenerateCodes(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px;background:rgba(192,96,74,0.1)">${I('shield',20,'var(--danger)')}</div>
      <div><div class="modal-title">Regenerate Recovery Codes</div><div class="modal-subtitle">This will invalidate your existing codes</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="padding:16px;border-radius:12px;background:rgba(192,96,74,0.06);border:1px solid rgba(192,96,74,0.15);margin-bottom:20px;display:flex;gap:12px;align-items:flex-start">
      ${I('shield',20,'var(--danger)')}
      <div>
        <div style="font-size:14px;font-weight:600;color:var(--danger);margin-bottom:4px">Warning</div>
        <div style="font-size:13px;color:var(--text-secondary);line-height:1.5">Regenerating recovery codes will <strong>immediately invalidate</strong> all 10 existing codes. You currently have 6 unused codes remaining. Make sure to save your new codes in a secure location.</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Confirm your password to proceed</label>
      <input class="form-input" type="password" placeholder="Enter your current password">
    </div>
    <div style="padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:12px">
      <div style="font-size:13px;font-weight:600;color:var(--text-heading);margin-bottom:10px">New recovery codes will be:</div>
      <div style="font-size:13px;color:var(--text-secondary);line-height:1.7">
        ‚Ä¢ 10 single-use codes generated<br>
        ‚Ä¢ Each code can only be used once<br>
        ‚Ä¢ Store them securely (password manager recommended)<br>
        ‚Ä¢ Available for download as a text file
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" style="background:var(--danger);border-color:var(--danger)" onclick="closeModal()">Regenerate Codes</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW POST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewPost(id){
const posts={1:{title:'üì¢ Q2 Budget Vote Now Open',author:'Governance Council',avatar:'GC',color:'var(--brown-deep)',time:'2 hours ago',badge:'Announcement',body:'The Q2 community treasury allocation proposal is now live. All members are encouraged to review the proposal in Decisions and cast their vote before March 12.\n\nThis allocation covers infrastructure (15%), education (10%), and outreach (5%). The remaining 70% remains in reserve.\n\nPlease review DEC-023 for full details.'},2:{title:'KERI Delegation Module ‚Äî Testing Help Needed',author:'Sarah Chen',avatar:'SC',color:'var(--olive)',time:'5 hours ago',badge:'Discussion',body:'The delegation module PR has been merged! We need volunteers for integration testing with the identity wallet.\n\nSpecifically looking for help with:\n- Multi-level delegation chains\n- Key rotation scenarios\n- Witness verification flows'},3:{title:'How do we handle cross-chain credential verification?',author:'Alex Rivera',avatar:'AR',color:'var(--info)',time:'Yesterday',badge:'Question',body:"I've been thinking about how credentials issued on one chain can be verified on another. Has anyone explored LayerZero or similar bridging?\n\nKey considerations:\n- Gas costs for cross-chain verification\n- Latency requirements for real-time checks\n- Trust model differences between chains"},4:{title:'üì¢ New SSI Wallet Release v2.3',author:'Mark',avatar:'MC',color:'var(--brown-warm)',time:'2 days ago',badge:'Announcement',body:'The latest wallet release includes IndexedDB storage, KERI delegation events, and improved key management via Web Crypto API.\n\nUpgrade instructions are available in the Docs section.'},5:{title:'Community meetup format ‚Äî thoughts?',author:'James Whitfield',avatar:'JW',color:'#7a6a8a',time:'3 days ago',badge:'Discussion',body:'Should we switch from monthly to bi-weekly meetups? The governance workload is increasing and more frequent sync would help.'},6:{title:'What DID method should we standardize on?',author:'Mei Lin',avatar:'ML',color:'var(--success)',time:'4 days ago',badge:'Question',body:'We currently support did:keri and did:web. Should we commit to one, or maintain both? Curious about interop considerations.'}};
const p=posts[id]||posts[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="avatar" style="background:${p.color};width:38px;height:38px;font-size:12px">${p.avatar}</div><div><div class="modal-title">${p.author}</div><div class="modal-subtitle">${p.time} ¬∑ <span class="badge badge-info">${p.badge}</span></div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<h2 style="margin-bottom:16px">${p.title}</h2>
<div style="white-space:pre-wrap;line-height:1.7;color:var(--text-secondary);font-size:14px;margin-bottom:24px">${p.body}</div>
<div style="display:flex;gap:12px;padding:16px 0;border-top:1px solid var(--card-border)"><button class="btn btn-sm">${I('thumbsUp',14)} Like</button><button class="btn btn-sm">${I('link',14)} Share</button><button class="btn btn-sm">${I('flag',14)} Report</button></div>
<div class="form-section-title" style="margin-top:8px">${I('msgCircle',15,'var(--brown-warm)')} Comments</div>
${[{a:'Sarah Chen',av:'SC',c:'var(--olive)',t:'1 hour ago',txt:'This is great news! Looking forward to reviewing the proposal.'},{a:'Alex Rivera',av:'AR',c:'var(--info)',t:'45 min ago',txt:'Agreed. The allocation ratios look well thought out.'}].map(c=>`<div style="display:flex;gap:12px;padding:12px 0;border-bottom:1px solid var(--card-border)"><div class="avatar" style="background:${c.c};width:32px;height:32px;font-size:10px">${c.av}</div><div><div style="font-size:13px"><strong>${c.a}</strong> <span style="color:var(--text-muted);margin-left:6px">${c.t}</span></div><div style="font-size:13.5px;color:var(--text-secondary);margin-top:4px">${c.txt}</div></div></div>`).join('')}
<div style="margin-top:16px"><textarea class="form-input" placeholder="Write a comment‚Ä¶" style="min-height:70px"></textarea><div style="display:flex;justify-content:flex-end;margin-top:8px"><button class="btn btn-primary btn-sm">${I('send',14,'#edd6b7')} Post Comment</button></div></div>
</div>`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewContact(name){
const contacts={'selfdriven Foundation':{type:'Organisation',role:'Governance Body',loc:'Global',status:'Active',desc:'The foundational governance body overseeing community operations, treasury, and constitutional compliance.',email:'governance@selfdriven.foundation',did:'did:keri:EBf...x4a9',team:'Governance Council'},'Sarah Chen':{type:'Individual',role:'Identity Lead',loc:'Singapore',status:'Active',desc:'Leading the Identity Working Group. Expert in KERI protocols and SSI credential architecture.',email:'sarah@selfdriven.ai',did:'did:keri:ECh...b7f2',team:'Identity Working Group'},'Alex Rivera':{type:'Individual',role:'Developer',loc:'Austin, TX',status:'Active',desc:'Full-stack developer focusing on wallet UI, API integration, and community portal development.',email:'alex@selfdriven.ai',did:'did:keri:EAr...c3d8',team:'Development'}};
const c=contacts[name]||{type:'Individual',role:'Member',loc:'Unknown',status:'Active',desc:'Community member.',email:'',did:'',team:''};
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I(c.type==='Organisation'?'building':'user',20,'var(--brown-warm)')}</div><div><div class="modal-title">${name}</div><div class="modal-subtitle">${c.type} ¬∑ ${c.role}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div class="detail-section"><div class="form-section-title">${I('user',15,'var(--brown-warm)')} Profile</div>
<p style="color:var(--text-secondary);line-height:1.6;margin-bottom:16px">${c.desc}</p>
<div class="form-row"><div class="form-group"><label class="form-label">Location</label><div style="font-size:14px">${c.loc}</div></div><div class="form-group"><label class="form-label">Status</label><div><span class="badge badge-open">${c.status}</span></div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Email</label><div style="font-size:14px">${c.email||'‚Äî'}</div></div><div class="form-group"><label class="form-label">Team</label><div style="font-size:14px">${c.team||'‚Äî'}</div></div></div></div>
<div class="detail-section"><div class="form-section-title">${I('key',15,'var(--brown-warm)')} Identity</div>
<div class="form-group"><label class="form-label">DID</label><div style="font-family:'JetBrains Mono',monospace;font-size:13px;background:var(--cream-pale);padding:8px 12px;border-radius:8px">${c.did||'Not assigned'}</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('msgCircle',14,'#edd6b7')} Message</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW OPPORTUNITY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewOpportunity(id){
const opps={1:{title:'Cross-Chain Identity Resolution',author:'Alex Rivera',status:'Open',impact:'High',area:'Infrastructure',effort:'Large',desc:'Implement LayerZero integration for cross-chain SSI credential verification between Cardano and Ethereum ecosystems.',criteria:'Successful credential verification across chains with <5s latency and <$0.10 gas cost per verification.',votes:14},2:{title:'Community Onboarding Portal',author:'Mei Lin',status:'Under Review',impact:'Medium',area:'Community',effort:'Medium',desc:'Create an interactive onboarding experience for new members with guided SSI wallet setup.',criteria:'90% completion rate for new member onboarding within first 48 hours.',votes:9},3:{title:'AI-Assisted Governance Summaries',author:'Sarah Chen',status:'Open',impact:'High',area:'Governance',effort:'Medium',desc:'Use AI to generate plain-language summaries of governance proposals to improve participation.',criteria:'Governance participation rate increases by 20% within 3 months.',votes:22}};
const o=opps[id]||opps[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('smile',20,'var(--brown-warm)')}</div><div><div class="modal-title">${o.title}</div><div class="modal-subtitle">Submitted by ${o.author}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="display:flex;gap:10px;margin-bottom:20px"><span class="badge badge-${o.status==='Open'?'open':'pending'}">${o.status}</span><span class="badge badge-info">${o.area}</span><span class="badge badge-${o.impact==='High'?'closed':'pending'}">Impact: ${o.impact}</span><span class="badge badge-info">Effort: ${o.effort}</span></div>
<div class="form-section-title">${I('file',15,'var(--brown-warm)')} Description</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${o.desc}</p>
<div class="form-section-title">${I('check',15,'var(--brown-warm)')} Success Criteria</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${o.criteria}</p>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale)"><div style="text-align:center;flex:1"><div style="font-size:24px;font-weight:700;color:var(--text-heading)">${o.votes}</div><div style="font-size:12px;color:var(--text-muted)">Upvotes</div></div><div style="text-align:center;flex:1"><div style="font-size:24px;font-weight:700;color:var(--text-heading)">3</div><div style="font-size:12px;color:var(--text-muted)">Comments</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('thumbsUp',14,'#edd6b7')} Upvote</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW PROJECT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewProject(id){
const projects={1:{name:'Identity Wallet v2',progress:68,tasks:24,done:16,lead:'Sarah Chen',cat:'Development',desc:'Next-generation SSI wallet with KERI delegation, IndexedDB storage, and Web Crypto API integration.',members:['Sarah Chen','Alex Rivera','Mei Lin'],milestones:[{name:'Core architecture',pct:100},{name:'KERI delegation',pct:92},{name:'UI/UX overhaul',pct:55},{name:'Testing & QA',pct:30}]},2:{name:'Governance Framework',progress:45,tasks:18,done:8,lead:'James Whitfield',cat:'Governance',desc:'Comprehensive governance framework defining roles, voting processes, and dispute resolution.',members:['Governance Council','James Whitfield'],milestones:[{name:'Role definitions',pct:100},{name:'Voting protocol',pct:60},{name:'Dispute resolution',pct:20},{name:'Documentation',pct:10}]},3:{name:'Community Portal Redesign',progress:12,tasks:30,done:4,lead:'Alex Rivera',cat:'Design',desc:'Complete redesign with improved UX, accessibility, and mobile responsiveness.',members:['Alex Rivera','Mei Lin','Sarah Chen'],milestones:[{name:'Research & wireframes',pct:80},{name:'Visual design',pct:15},{name:'Frontend build',pct:0},{name:'Testing',pct:0}]},4:{name:'KERI Delegation Module',progress:92,tasks:15,done:14,lead:'Sarah Chen',cat:'Development',desc:'KERI delegation event handling module for multi-level credential issuance and verification.',members:['Sarah Chen','Mark'],milestones:[{name:'Protocol spec',pct:100},{name:'Core implementation',pct:100},{name:'Integration testing',pct:85},{name:'Documentation',pct:80}]}};
const p=projects[id]||projects[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('folder',20,'var(--brown-warm)')}</div><div><div class="modal-title">${p.name}</div><div class="modal-subtitle">Lead: ${p.lead} ¬∑ <span class="badge badge-info">${p.cat}</span></div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${p.desc}</p>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:20px"><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.progress}%</div><div style="font-size:12px;color:var(--text-muted)">Complete</div></div><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.done}/${p.tasks}</div><div style="font-size:12px;color:var(--text-muted)">Tasks Done</div></div><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.members.length}</div><div style="font-size:12px;color:var(--text-muted)">Members</div></div></div>
<div class="form-section-title">${I('check',15,'var(--brown-warm)')} Milestones</div>
${p.milestones.map(m=>`<div style="margin-bottom:14px"><div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:4px"><span>${m.name}</span><span style="font-weight:600">${m.pct}%</span></div><div class="progress-bar"><div class="progress-fill" style="width:${m.pct}%;background:${m.pct===100?'var(--success)':m.pct>50?'var(--warning)':'var(--danger)'}"></div></div></div>`).join('')}
<div class="form-section-title" style="margin-top:20px">${I('users',15,'var(--brown-warm)')} Team Members</div>
${p.members.map(m=>`<div style="display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:8px;background:var(--cream-pale);margin:0 6px 6px 0"><div class="avatar" style="background:var(--brown-warm);width:24px;height:24px;font-size:9px">${m.split(' ').map(n=>n[0]).join('')}</div><span style="font-size:13px">${m}</span></div>`).join('')}
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary" onclick="closeModal();openProjectBoard(${id})">Open Project Board</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW DOCUMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewDoc(id){
const docs={1:{name:'Community Constitution v3.2',cat:'Governance',author:'Governance Council',date:'Mar 1, 2026',size:'245 KB',desc:'The foundational document defining the community structure, member rights, governance processes, and amendment procedures.',versions:['v3.2 ‚Äî Mar 1, 2026','v3.1 ‚Äî Jan 15, 2026','v3.0 ‚Äî Nov 20, 2025']},2:{name:'SSI Credential Schema v2 Spec',cat:'Technical',author:'Sarah Chen',date:'Feb 28, 2026',size:'1.2 MB',desc:'Technical specification for the v2 credential schema supporting KERI delegation, multi-sig attestations, and cross-chain anchoring.',versions:['v2.0 ‚Äî Feb 28, 2026','v1.1 ‚Äî Dec 10, 2025']},3:{name:'KERI Delegation Architecture',cat:'Technical',author:'Mark',date:'Feb 25, 2026',size:'890 KB',desc:'Architecture document covering multi-level delegation events, witness configuration, key rotation, and recovery procedures.',versions:['v1.0 ‚Äî Feb 25, 2026']},4:{name:'Q1 2026 Treasury Report',cat:'Governance',author:'Operations',date:'Feb 20, 2026',size:'340 KB',desc:'Quarterly financial report covering income streams, expenditure breakdown, staking rewards, and on-chain transaction summary.',versions:['Q1 2026 ‚Äî Feb 20, 2026']},5:{name:'New Member Onboarding Guide',cat:'Template',author:'Alex Rivera',date:'Feb 15, 2026',size:'156 KB',desc:'Step-by-step template for onboarding new community members including wallet setup, credential issuance, and governance orientation.',versions:['v2.0 ‚Äî Feb 15, 2026','v1.0 ‚Äî Oct 5, 2025']},6:{name:'Governance Proposal Template',cat:'Template',author:'Governance Council',date:'Feb 10, 2026',size:'42 KB',desc:'Standard template for submitting governance proposals with all required sections, voting parameters, and impact assessment guidelines.',versions:['v1.2 ‚Äî Feb 10, 2026']},7:{name:'Identity Wallet API Reference',cat:'Technical',author:'Alex Rivera',date:'Feb 5, 2026',size:'2.1 MB',desc:'Full API reference documentation for the identity wallet including REST endpoints, WebSocket events, authentication flows, and code examples.',versions:['v2.3 ‚Äî Feb 5, 2026','v2.2 ‚Äî Jan 8, 2026']},8:{name:'Voting Process Guide',cat:'Governance',author:'James Whitfield',date:'Jan 28, 2026',size:'120 KB',desc:'Detailed guide explaining the community voting process, quorum calculations, delegation procedures, and dispute resolution.',versions:['v1.1 ‚Äî Jan 28, 2026']},9:{name:'Project Brief Template',cat:'Template',author:'Mei Lin',date:'Jan 20, 2026',size:'38 KB',desc:'Template for drafting project briefs with scope definition, timeline, resource requirements, and success criteria sections.',versions:['v1.0 ‚Äî Jan 20, 2026']}};
const d=docs[id]||docs[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('file',20,'var(--brown-warm)')}</div><div><div class="modal-title">${d.name}</div><div class="modal-subtitle">${d.author} ¬∑ ${d.date} ¬∑ ${d.size}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="margin-bottom:16px"><span class="badge badge-info">${d.cat}</span></div>
<div class="form-section-title">${I('file',15,'var(--brown-warm)')} Description</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${d.desc}</p>
<div class="form-section-title">${I('git',15,'var(--brown-warm)')} Version History</div>
${d.versions.map((v,i)=>`<div style="display:flex;align-items:center;gap:10px;padding:10px 0;${i<d.versions.length-1?'border-bottom:1px solid var(--card-border)':''}"><div style="width:8px;height:8px;border-radius:50%;background:${i===0?'var(--success)':'var(--text-muted)'}"></div><span style="font-size:13.5px;color:${i===0?'var(--text-primary)':'var(--text-muted)'}">${v}</span>${i===0?'<span class="badge badge-open" style="margin-left:auto">Current</span>':''}</div>`).join('')}
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn">${I('download',14)} Download</button><button class="btn btn-primary">${I('eye',14,'#edd6b7')} Open Document</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW TRANSACTION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewTransaction(id){
const txns={1:{desc:'AWS Infrastructure',amount:'-$1,240',type:'expense',cat:'Infrastructure',date:'Mar 1, 2026',method:'Bank Transfer',ref:'INV-2026-0301',notes:'Monthly AWS bill covering EC2, RDS, S3, and CloudFront services for community infrastructure.'},2:{desc:'Member contributions',amount:'+$3,200',type:'income',cat:'Contributions',date:'Feb 28, 2026',method:'Bank Transfer',ref:'DEP-2026-0228',notes:'Monthly member contribution deposits from 12 active contributing members.'},3:{desc:'KERI node hosting',amount:'-$680',type:'expense',cat:'Hosting',date:'Feb 25, 2026',method:'Bank Transfer',ref:'INV-2026-0225',notes:'Dedicated hosting for 3 KERI witness nodes across US, EU, and APAC regions.'},4:{desc:'Partner grant (Cardano)',amount:'+$5,000',type:'income',cat:'Grants',date:'Feb 20, 2026',method:'On-Chain',ref:'TX-0x8f2a...c4b1',notes:'Quarterly development grant from Cardano Foundation for SSI infrastructure work.'},5:{desc:'Domain renewals',amount:'-$320',type:'expense',cat:'Services',date:'Feb 18, 2026',method:'Credit Card',ref:'INV-2026-0218',notes:'Annual renewal for selfdriven.foundation, selfdriven.ai, selfdriven.network, and tana.community domains.'},6:{desc:'Staking rewards Feb',amount:'+$1,200',type:'income',cat:'Staking Rewards',date:'Feb 15, 2026',method:'On-Chain',ref:'TX-0xa1c9...f8e2',notes:'February ADA staking rewards from community treasury delegation.'},7:{desc:'Video conferencing license',amount:'-$450',type:'expense',cat:'Services',date:'Feb 12, 2026',method:'Credit Card',ref:'INV-2026-0212',notes:'Annual license renewal for governance meeting video conferencing platform.'},8:{desc:'Community event sponsorship',amount:'+$2,500',type:'income',cat:'Contributions',date:'Feb 10, 2026',method:'Bank Transfer',ref:'DEP-2026-0210',notes:'Sponsorship contribution for Q1 community virtual summit event.'},9:{desc:'SSL certificates',amount:'-$180',type:'expense',cat:'Infrastructure',date:'Feb 8, 2026',method:'Credit Card',ref:'INV-2026-0208',notes:'Annual wildcard SSL certificate renewal for *.selfdriven.ai and *.selfdriven.foundation.'}};
const t=txns[id]||txns[1];
const isIncome=t.type==='income';
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px;background:${isIncome?'rgba(107,138,94,0.1)':'rgba(192,96,74,0.1)'}">${I(isIncome?'plus':'download',20,isIncome?'var(--success)':'var(--danger)')}</div><div><div class="modal-title">${t.desc}</div><div class="modal-subtitle">${t.date} ¬∑ ${t.cat}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="text-align:center;padding:20px 0;margin-bottom:20px;border-bottom:1px solid var(--card-border)"><div style="font-family:'Playfair Display',serif;font-size:36px;font-weight:700;color:${isIncome?'var(--success)':'var(--danger)'}">${t.amount}</div><div style="font-size:13px;color:var(--text-muted)">${isIncome?'Income':'Expense'} ¬∑ ${t.cat}</div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Date</label><div style="font-size:14px">${t.date}</div></div><div class="form-group"><label class="form-label">Payment Method</label><div style="font-size:14px">${t.method}</div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Reference</label><div style="font-family:'JetBrains Mono',monospace;font-size:13px;background:var(--cream-pale);padding:6px 10px;border-radius:6px">${t.ref}</div></div><div class="form-group"><label class="form-label">Category</label><div><span class="badge badge-info">${t.cat}</span></div></div></div>
<div class="form-group"><label class="form-label">Notes</label><div style="font-size:14px;color:var(--text-secondary);line-height:1.6">${t.notes}</div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn">${I('download',14)} Receipt</button></div>
`);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PROJECT BOARD (Kanban-style)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openProjectBoard(id){
const projects={1:{name:'Identity Wallet v2',lead:'Sarah Chen',tasks:[
{t:'Design credential display UI',s:'done',a:'AR'},{t:'Implement KERI key rotation',s:'done',a:'SC'},{t:'IndexedDB storage layer',s:'done',a:'SC'},{t:'Web Crypto API integration',s:'done',a:'AR'},
{t:'Delegation event handler',s:'progress',a:'SC'},{t:'Backup & recovery flow',s:'progress',a:'ML'},{t:'UI accessibility audit',s:'progress',a:'AR'},
{t:'Cross-browser testing',s:'todo',a:'ML'},{t:'Performance benchmarks',s:'todo',a:'AR'},{t:'Security review',s:'todo',a:'SC'},{t:'Release notes',s:'todo',a:'SC'},{t:'Documentation update',s:'todo',a:'ML'}
]},2:{name:'Governance Framework',lead:'James Whitfield',tasks:[
{t:'Define council roles',s:'done',a:'JW'},{t:'Voting protocol spec',s:'done',a:'GC'},{t:'Quorum rules document',s:'done',a:'JW'},
{t:'Dispute resolution process',s:'progress',a:'JW'},{t:'Amendment procedure',s:'progress',a:'GC'},
{t:'Community review period',s:'todo',a:'GC'},{t:'Ratification vote',s:'todo',a:'JW'},{t:'Final publication',s:'todo',a:'GC'}
]},3:{name:'Community Portal Redesign',lead:'Alex Rivera',tasks:[
{t:'User research interviews',s:'done',a:'AR'},{t:'Competitive analysis',s:'done',a:'ML'},
{t:'Wireframes ‚Äî desktop',s:'progress',a:'AR'},{t:'Wireframes ‚Äî mobile',s:'progress',a:'ML'},
{t:'Visual design system',s:'todo',a:'AR'},{t:'Component library',s:'todo',a:'ML'},{t:'Frontend build ‚Äî layout',s:'todo',a:'AR'},{t:'Frontend build ‚Äî pages',s:'todo',a:'ML'},{t:'CMS integration',s:'todo',a:'AR'},{t:'Beta testing',s:'todo',a:'SC'}
]},4:{name:'KERI Delegation Module',lead:'Sarah Chen',tasks:[
{t:'Protocol spec document',s:'done',a:'SC'},{t:'Core delegation logic',s:'done',a:'SC'},{t:'Event serialisation',s:'done',a:'MC'},{t:'Witness verification',s:'done',a:'SC'},{t:'Key pre-rotation support',s:'done',a:'MC'},
{t:'Integration test suite',s:'progress',a:'SC'},
{t:'API documentation',s:'todo',a:'MC'}
]}};
const p=projects[id]||projects[1];
const todo=p.tasks.filter(t=>t.s==='todo'),prog=p.tasks.filter(t=>t.s==='progress'),done=p.tasks.filter(t=>t.s==='done');
const colColors={todo:'var(--text-muted)',progress:'var(--warning)',done:'var(--success)'};
const renderCard=(t)=>`<div style="background:var(--cream-light);border:1px solid var(--card-border);border-radius:10px;padding:10px 12px;margin-bottom:8px">
<div style="font-size:13px;font-weight:500;color:var(--text-primary);margin-bottom:6px">${t.t}</div>
<div style="display:flex;align-items:center;gap:6px"><div class="avatar" style="background:var(--brown-warm);width:22px;height:22px;font-size:9px;border-radius:6px">${t.a}</div><span style="font-size:11px;color:var(--text-muted)">${t.a}</span></div>
</div>`;
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('folder',20,'var(--brown-warm)')}</div><div><div class="modal-title">${p.name} ‚Äî Board</div><div class="modal-subtitle">Lead: ${p.lead} ¬∑ ${p.tasks.length} tasks</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body" style="padding:16px">
<div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;min-height:300px">
<div><div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--text-muted)"><span style="font-size:13px;font-weight:700;color:var(--text-muted)">TO DO</span><span style="font-size:11px;background:var(--cream-pale);color:var(--text-muted);padding:2px 8px;border-radius:10px">${todo.length}</span></div>${todo.map(renderCard).join('')}</div>
<div><div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--warning)"><span style="font-size:13px;font-weight:700;color:var(--warning)">IN PROGRESS</span><span style="font-size:11px;background:rgba(200,160,60,0.12);color:var(--warning);padding:2px 8px;border-radius:10px">${prog.length}</span></div>${prog.map(renderCard).join('')}</div>
<div><div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--success)"><span style="font-size:13px;font-weight:700;color:var(--success)">DONE</span><span style="font-size:11px;background:rgba(107,138,94,0.12);color:var(--success);padding:2px 8px;border-radius:10px">${done.length}</span></div>${done.map(renderCard).join('')}</div>
</div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('plus',14,'#edd6b7')} Add Task</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW TEAM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewTeam(id){
const teams={1:{name:'Identity Working Group',lead:'Sarah Chen',desc:'Focused on SSI credential systems, KERI delegation protocols, and identity wallet development.',members:[
{name:'Sarah Chen',role:'Identity Lead',avatar:'SC',color:'var(--olive)'},{name:'David Park',role:'Security Analyst',avatar:'DP',color:'#5a7a6a'}
],projects:['Identity Wallet v2','KERI Delegation Module'],meetings:'Tuesdays 10am'},
2:{name:'Governance Council',lead:'James Whitfield',desc:'Oversees community governance processes, proposal management, and constitutional compliance.',members:[
{name:'James Whitfield',role:'Facilitator',avatar:'JW',color:'#7a6a8a'},{name:'Governance Council',role:'Body',avatar:'GC',color:'var(--brown-deep)'}
],projects:['Governance Framework'],meetings:'Wednesdays 2pm'},
3:{name:'Development',lead:'Alex Rivera',desc:'Full-stack development, API integration, portal frontend, and mobile applications.',members:[
{name:'Alex Rivera',role:'Developer',avatar:'AR',color:'var(--info)'},{name:'Mei Lin',role:'Contributor',avatar:'ML',color:'var(--success)'}
],projects:['Community Portal Redesign'],meetings:'Mon / Wed / Fri standup 9am'},
4:{name:'Operations',lead:'TANA Insurance Co.',desc:'Infrastructure management, hosting, deployments, and community tooling.',members:[
{name:'TANA Insurance Co.',role:'Member Org',avatar:'TI',color:'var(--brown-warm)'}
],projects:[],meetings:'As needed'}};
const t=teams[id]||teams[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('users',20,'var(--brown-warm)')}</div><div><div class="modal-title">${t.name}</div><div class="modal-subtitle">Lead: ${t.lead} ¬∑ ${t.members.length} members</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${t.desc}</p>
<div class="form-section-title">${I('users',15,'var(--brown-warm)')} Members</div>
${t.members.map(m=>`<div class="list-item"><div class="avatar" style="background:${m.color};width:36px;height:36px;font-size:12px">${m.avatar}</div><div class="list-item-content"><div class="list-item-title">${m.name}</div><div class="list-item-sub">${m.role}</div></div></div>`).join('')}
${t.projects.length?`<div class="form-section-title" style="margin-top:20px">${I('folder',15,'var(--brown-warm)')} Active Projects</div>
${t.projects.map(p=>`<div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;background:var(--cream-pale);margin-bottom:8px"><span style="font-size:13.5px">${p}</span></div>`).join('')}`:''}
<div class="form-section-title" style="margin-top:20px">${I('calendar',15,'var(--brown-warm)')} Meeting Schedule</div>
<div style="padding:12px 16px;border-radius:10px;background:var(--cream-pale);font-size:13.5px">${I('clock',14,'var(--text-muted)')} ${t.meetings}</div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('msgCircle',14,'#edd6b7')} Message Team</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD PRODUCT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddProduct(){
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('plus',20,'var(--brown-warm)')}</div><div><div class="modal-title">Add Product</div><div class="modal-subtitle">Register a new product or service</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div class="form-group"><label class="form-label">Product Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="e.g. Identity Wallet"></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Type <span style="color:var(--danger)">*</span></label><select class="form-input"><option value="">Select type‚Ä¶</option><option>Application</option><option>Web App</option><option>Mobile App</option><option>Service</option><option>API</option><option>Library</option><option>Other</option></select></div>
<div class="form-group"><label class="form-label">Version</label><input class="form-input" placeholder="e.g. v1.0.0"></div>
</div>
<div class="form-group"><label class="form-label">Description</label><textarea class="form-input" placeholder="Describe the product‚Ä¶" style="min-height:80px"></textarea></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Status</label><select class="form-input"><option>Active</option><option>Beta</option><option>Development</option><option>Deprecated</option></select></div>
<div class="form-group"><label class="form-label">Owner / Team</label><select class="form-input"><option value="">Select‚Ä¶</option><option>Development</option><option>Identity WG</option><option>Operations</option><option>Governance Council</option></select></div>
</div>
<div class="form-group"><label class="form-label">URL / Repository</label><input class="form-input" placeholder="https://‚Ä¶"></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Pricing Model</label><select class="form-input"><option>Free</option><option>Freemium</option><option>Subscription</option><option>One-time</option><option>Per-use</option></select></div>
<div class="form-group"><label class="form-label">User Count</label><input class="form-input" type="number" placeholder="0"></div>
</div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Cancel</button><button class="btn btn-primary">${I('check',14,'#edd6b7')} Save Product</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW PRODUCT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewProduct(id){
const products={1:{name:'Identity Wallet',type:'Application',ver:'v2.3.1',users:1247,status:'Active',desc:'Community SSI wallet application for managing credentials, delegation, and identity verification. Supports KERI protocols and WebAuthn passkey authentication.',owner:'Identity WG',url:'https://wallet.selfdriven.ai',pricing:'Free',launched:'Jun 2025',updated:'Feb 28, 2026'},
2:{name:'Governance Portal',type:'Web App',ver:'v3.0.0',users:892,status:'Active',desc:'Web-based governance platform for submitting proposals, casting votes, tracking quorum, and managing community decisions.',owner:'Development',url:'https://governance.selfdriven.ai',pricing:'Free',launched:'Sep 2024',updated:'Mar 1, 2026'},
3:{name:'KERI Witness Node',type:'Service',ver:'v1.4.2',users:24,status:'Active',desc:'Distributed witness service for KERI credential verification and event receipt infrastructure.',owner:'Identity WG',url:'https://witness.selfdriven.network',pricing:'Free',launched:'Jan 2026',updated:'Feb 20, 2026'},
4:{name:'Community API',type:'API',ver:'v5.0.43',users:156,status:'Active',desc:'RESTful API for community data including members, projects, tokens, governance, and identity services.',owner:'Development',url:'https://api.selfdriven.cloud',pricing:'Free',launched:'Mar 2023',updated:'Feb 25, 2026'},
5:{name:'Mobile Companion',type:'Mobile App',ver:'v1.1.0',users:643,status:'Beta',desc:'Mobile companion app for notifications, quick voting, token balance checking, and credential presentation.',owner:'Development',url:'',pricing:'Free',launched:'Dec 2025',updated:'Feb 15, 2026'},
6:{name:'Analytics Dashboard',type:'Web App',ver:'v0.9.3',users:45,status:'Beta',desc:'Real-time analytics showing community engagement metrics, governance participation rates, and project progress.',owner:'Development',url:'',pricing:'Free',launched:'Feb 2026',updated:'Feb 28, 2026'}};
const p=products[id]||products[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('pie',20,'var(--brown-warm)')}</div><div><div class="modal-title">${p.name}</div><div class="modal-subtitle">${p.type} ¬∑ <code style="font-size:12px;background:var(--accent-light);padding:2px 8px;border-radius:4px">${p.ver}</code></div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="display:flex;gap:10px;margin-bottom:16px"><span class="badge badge-${p.status==='Active'?'open':'pending'}">${p.status}</span><span class="badge badge-info">${p.type}</span></div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${p.desc}</p>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:20px"><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.users.toLocaleString()}</div><div style="font-size:12px;color:var(--text-muted)">Users</div></div><div style="text-align:center;flex:1"><div style="font-size:16px;font-weight:600;color:var(--text-heading)">${p.pricing}</div><div style="font-size:12px;color:var(--text-muted)">Pricing</div></div><div style="text-align:center;flex:1"><div style="font-size:16px;font-weight:600;color:var(--text-heading)">${p.ver}</div><div style="font-size:12px;color:var(--text-muted)">Version</div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Owner</label><div style="font-size:14px">${p.owner}</div></div><div class="form-group"><label class="form-label">Launched</label><div style="font-size:14px">${p.launched}</div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Last Updated</label><div style="font-size:14px">${p.updated}</div></div><div class="form-group"><label class="form-label">URL</label><div style="font-size:13px;font-family:monospace;color:var(--info)">${p.url||'‚Äî'}</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn">${I('settings',14)} Edit</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD ORDER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddOrder(){
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('plus',20,'var(--brown-warm)')}</div><div><div class="modal-title">Add Order</div><div class="modal-subtitle">Create a new resource or service order</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div class="form-group"><label class="form-label">Order Description <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="e.g. SSL Certificate Renewal"></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Category <span style="color:var(--danger)">*</span></label><select class="form-input"><option value="">Select‚Ä¶</option><option>Infrastructure</option><option>Software License</option><option>Hardware</option><option>Service</option><option>Hosting</option><option>Domain</option><option>Certificate</option><option>Other</option></select></div>
<div class="form-group"><label class="form-label">Priority</label><select class="form-input"><option>Normal</option><option>Low</option><option>High</option><option>Urgent</option></select></div>
</div>
<div class="form-group"><label class="form-label">Details / Justification</label><textarea class="form-input" placeholder="Why is this order needed?" style="min-height:80px"></textarea></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Requested By</label><select class="form-input"><option value="">Select member‚Ä¶</option><option>Alex Rivera</option><option>Sarah Chen</option><option>Mark</option><option>James Whitfield</option><option>Mei Lin</option><option>Operations</option></select></div>
<div class="form-group"><label class="form-label">Needed By</label><input class="form-input" type="date"></div>
</div>
<div class="form-row">
<div class="form-group"><label class="form-label">Estimated Cost</label><div style="display:flex;gap:8px"><select class="form-input" style="width:80px"><option>USD</option><option>AUD</option><option>EUR</option><option>ADA</option></select><input class="form-input" type="number" placeholder="0.00" step="0.01"></div></div>
<div class="form-group"><label class="form-label">Vendor / Supplier</label><input class="form-input" placeholder="e.g. AWS, Namecheap"></div>
</div>
<div class="form-group"><label class="form-label">Attachments</label><div style="border:2px dashed var(--card-border);border-radius:10px;padding:20px;text-align:center;color:var(--text-muted);font-size:13px;cursor:pointer">${I('upload',20,'var(--text-muted)')}<div style="margin-top:6px">Drop files here or click to upload</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Cancel</button><button class="btn btn-primary">${I('check',14,'#edd6b7')} Submit Order</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW ORDER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewOrder(id){
const orders={'ORD-042':{desc:'SSL Certificate Renewal',req:'Alex Rivera',type:'Certificate',date:'Mar 1, 2026',status:'Pending',priority:'High',cost:'$180',vendor:'DigiCert',needed:'Mar 10, 2026',notes:'Wildcard SSL certificate for *.selfdriven.ai and *.selfdriven.foundation expiring March 12. Needs urgent renewal to avoid service disruption.',history:[{act:'Order submitted',by:'Alex Rivera',date:'Mar 1, 2026'},{act:'Approved by Operations',by:'Operations',date:'Mar 1, 2026'}]},
'ORD-041':{desc:'AWS Reserved Instance',req:'Operations',type:'Infrastructure',date:'Feb 28, 2026',status:'Pending',priority:'Normal',cost:'$2,400/yr',vendor:'AWS',needed:'Mar 15, 2026',notes:'Convert 2 on-demand EC2 instances (t3.large) to 1-year reserved instances for cost savings. Estimated 40% savings.',history:[{act:'Order submitted',by:'Operations',date:'Feb 28, 2026'}]},
'ORD-040':{desc:'KERI Node Scale-up',req:'Sarah Chen',type:'Infrastructure',date:'Feb 25, 2026',status:'Pending',priority:'Normal',cost:'$480/mo',vendor:'AWS / Hetzner',needed:'Mar 20, 2026',notes:'Deploy 2 additional KERI witness nodes in EU-West and APAC regions for redundancy and latency improvements.',history:[{act:'Order submitted',by:'Sarah Chen',date:'Feb 25, 2026'},{act:'Under review',by:'Operations',date:'Feb 27, 2026'}]},
'ORD-039':{desc:'Domain Registration',req:'Mark',type:'Domain',date:'Feb 20, 2026',status:'Complete',priority:'Normal',cost:'$45',vendor:'Namecheap',needed:'Feb 25, 2026',notes:'Register tana.community domain for the community hub portal.',history:[{act:'Order submitted',by:'Mark',date:'Feb 20, 2026'},{act:'Approved',by:'Operations',date:'Feb 20, 2026'},{act:'Purchased & configured',by:'Operations',date:'Feb 21, 2026'},{act:'DNS propagated ‚Äî Complete',by:'Operations',date:'Feb 22, 2026'}]},
'ORD-038':{desc:'Video Conferencing License',req:'James Whitfield',type:'Software License',date:'Feb 15, 2026',status:'Complete',priority:'Low',cost:'$150/yr',vendor:'Zoom',needed:'Mar 1, 2026',notes:'Annual Zoom Pro license for governance meetings and community calls.',history:[{act:'Order submitted',by:'James Whitfield',date:'Feb 15, 2026'},{act:'Approved & purchased',by:'Ellen Morris',date:'Feb 16, 2026'},{act:'License activated',by:'Operations',date:'Feb 17, 2026'}]}};
const o=orders[id]||orders['ORD-042'];
const isPending=o.status==='Pending';
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('file',20,'var(--brown-warm)')}</div><div><div class="modal-title">${id} ‚Äî ${o.desc}</div><div class="modal-subtitle">Requested by ${o.req} ¬∑ ${o.date}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="display:flex;gap:10px;margin-bottom:16px"><span class="badge badge-${isPending?'pending':'active'}">${o.status}</span><span class="badge badge-info">${o.type}</span>${o.priority==='High'||o.priority==='Urgent'?`<span class="badge badge-closed">${o.priority}</span>`:''}</div>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:20px"><div style="text-align:center;flex:1"><div style="font-size:18px;font-weight:700;color:var(--text-heading)">${o.cost}</div><div style="font-size:12px;color:var(--text-muted)">Estimated Cost</div></div><div style="text-align:center;flex:1"><div style="font-size:14px;font-weight:600;color:var(--text-heading)">${o.vendor}</div><div style="font-size:12px;color:var(--text-muted)">Vendor</div></div><div style="text-align:center;flex:1"><div style="font-size:14px;font-weight:600;color:${isPending?'var(--warning)':'var(--text-heading)'}">${o.needed}</div><div style="font-size:12px;color:var(--text-muted)">Needed By</div></div></div>
<div class="form-section-title">${I('file',15,'var(--brown-warm)')} Details</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${o.notes}</p>
<div class="form-section-title">${I('clock',15,'var(--brown-warm)')} Timeline</div>
${o.history.map((h,i)=>`<div style="display:flex;gap:12px;padding:10px 0;${i<o.history.length-1?'border-bottom:1px solid var(--card-border)':''}">
<div style="width:10px;height:10px;border-radius:50%;background:${i===o.history.length-1?'var(--success)':'var(--text-muted)'};margin-top:5px;flex-shrink:0"></div>
<div><div style="font-size:13px;font-weight:500">${h.act}</div><div style="font-size:12px;color:var(--text-muted)">${h.by} ¬∑ ${h.date}</div></div>
</div>`).join('')}
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button>${isPending?`<button class="btn" style="color:var(--danger)">Cancel Order</button><button class="btn btn-primary">${I('check',14,'#edd6b7')} Approve</button>`:''}</div>
`,true);
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
render();
</script>
</body>
</html>
