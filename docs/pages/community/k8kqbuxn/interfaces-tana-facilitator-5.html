---
layout: null
permalink: /interfaces/k8kqbuxn/tana/facilitator
title: TANA Facilitator Interface
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TANA ‚Äî Community Platform</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' rx='24' fill='%23593934'/%3E%3Cg transform='translate(10,10)'%3E%3Cpath d='M50 0 L95 25 L95 35 L55 13 L55 100 L45 100 L45 13 L5 35 L5 25 Z' fill='%23edd6b7' opacity='0.9'/%3E%3Cpath d='M25 40 L70 15 L70 25 L30 47 L30 100 L20 100 L20 47 Z' fill='%23edd6b7' opacity='0.6'/%3E%3Cpath d='M65 50 L65 100 L75 100 L75 45 L100 32 L100 25 Z' fill='%23edd6b7' opacity='0.35'/%3E%3C/g%3E%3C/svg%3E">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=Playfair+Display:wght@500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CSS VARIABLES
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root {
  --brown-deep: #593934;
  --brown-warm: #af815f;
  --olive: #6b5f38;
  --cream: #edd6b7;
  --cream-light: #f5ebe0;
  --cream-pale: #faf6f1;
  --page-bg: #f8f4ef;
  --card-bg: #ffffff;
  --card-border: rgba(175,129,95,0.12);
  --card-shadow: 0 1px 4px rgba(89,57,52,0.06);
  --card-shadow-hover: 0 4px 16px rgba(89,57,52,0.1);
  --text-primary: #3a2e2a;
  --text-secondary: #7a6a62;
  --text-muted: #a89888;
  --text-heading: #593934;
  --accent: #af815f;
  --accent-light: rgba(175,129,95,0.12);
  --danger: #c0604a;
  --success: #6b8a5e;
  --info: #5b7a8a;
  --warning: #c49a4a;
  --sidebar-width: 220px;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; overflow:hidden; }
body {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--page-bg); color: var(--text-primary);
  display: flex; height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê */
.sidebar {
  width: var(--sidebar-width); min-width: var(--sidebar-width);
  background: var(--brown-deep); display: flex; flex-direction: column;
  height: 100vh; overflow-y: auto; position: relative;
}
.sidebar::after {
  content:''; position:absolute; bottom:0; left:0; right:0; height:80px;
  background: linear-gradient(to top, rgba(60,38,34,0.4), transparent);
  pointer-events:none; z-index:1;
}
.sidebar-logo { padding: 22px 24px 18px; display:flex; align-items:center; }
.sidebar-nav {
  flex:1; padding:4px 10px; display:flex; flex-direction:column; gap:1px;
}
.nav-item {
  display:flex; align-items:center; gap:12px; padding:10px 14px;
  border-radius:10px; text-decoration:none; color:var(--cream);
  font-size:14px; font-weight:400; transition:all 0.2s ease;
  cursor:pointer; position:relative; border:none; background:none;
  width:100%; text-align:left; font-family:inherit;
}
.nav-item:hover { background:rgba(237,214,183,0.1); }
.nav-item.active { background:rgba(237,214,183,0.15); font-weight:500; }
.nav-item.active::before {
  content:''; position:absolute; left:0; top:8px; bottom:8px;
  width:3px; background:var(--brown-warm); border-radius:0 3px 3px 0;
}
.nav-item svg { color:rgba(237,214,183,0.7); flex-shrink:0; }
.nav-item.active svg { color:var(--cream); }
.nav-spacer { flex:1; }
.nav-divider { height:1px; background:rgba(237,214,183,0.1); margin:6px 14px; }

/* ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê */
.main-wrapper { flex:1; display:flex; overflow:hidden; }
.main-content {
  flex:1; overflow-y:auto; padding:28px 32px 40px;
  transition: opacity 0.2s ease;
}
.main-content::-webkit-scrollbar { width:6px; }
.main-content::-webkit-scrollbar-track { background:transparent; }
.main-content::-webkit-scrollbar-thumb { background:rgba(175,129,95,0.18); border-radius:3px; }
.sidebar::-webkit-scrollbar { width:4px; }
.sidebar::-webkit-scrollbar-track { background:transparent; }
.sidebar::-webkit-scrollbar-thumb { background:rgba(237,214,183,0.15); border-radius:2px; }

/* ‚ïê‚ïê‚ïê SCREEN CONTAINERS ‚ïê‚ïê‚ïê */
.screen { display:none; }
.screen.active { display:block; animation: fadeIn 0.35s ease both; }

/* ‚ïê‚ïê‚ïê PAGE HEADER ‚ïê‚ïê‚ïê */
.page-header {
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:24px; gap:16px;
}
.page-header-left { display:flex; align-items:center; gap:14px; }
.page-icon {
  width:44px; height:44px; border-radius:12px; background:var(--accent-light);
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
}
.page-title {
  font-family:'Playfair Display', Georgia, serif;
  font-size:22px; font-weight:700; color:var(--text-heading);
}
.page-subtitle { font-size:13px; color:var(--text-muted); margin-top:1px; }
.header-actions { display:flex; gap:8px; }

/* ‚ïê‚ïê‚ïê BUTTONS ‚ïê‚ïê‚ïê */
.btn {
  display:inline-flex; align-items:center; gap:7px;
  padding:9px 18px; border-radius:10px; border:1.5px solid var(--card-border);
  background:var(--card-bg); color:var(--text-primary);
  font-size:13px; font-weight:500; font-family:inherit;
  cursor:pointer; transition:all 0.2s ease; white-space:nowrap;
}
.btn:hover { border-color:var(--brown-warm); }
.btn-primary {
  background:var(--brown-deep); color:var(--cream); border-color:var(--brown-deep);
}
.btn-primary:hover { background:#4a302c; }
.btn-sm { padding:6px 12px; font-size:12px; border-radius:8px; }
.btn-ghost { border:none; background:transparent; color:var(--text-secondary); }
.btn-ghost:hover { color:var(--text-primary); background:var(--accent-light); }

/* ‚ïê‚ïê‚ïê TABS ‚ïê‚ïê‚ïê */
.tabs { display:flex; gap:0; border-bottom:1px solid var(--card-border); margin-bottom:20px; }
.tab-btn {
  padding:10px 18px; border:none; background:transparent;
  color:var(--text-muted); font-size:13.5px; font-weight:500;
  font-family:inherit; cursor:pointer; position:relative;
  transition:color 0.2s ease; border-bottom:2px solid transparent; margin-bottom:-1px;
}
.tab-btn:hover { color:var(--text-primary); }
.tab-btn.active { color:var(--brown-deep); border-bottom-color:var(--brown-warm); }

/* ‚ïê‚ïê‚ïê CARDS ‚ïê‚ïê‚ïê */
.card {
  background:var(--card-bg); border-radius:14px; border:1px solid var(--card-border);
  box-shadow:var(--card-shadow); transition:all 0.2s ease;
}
.card:hover { box-shadow:var(--card-shadow-hover); }
.card-body { padding:20px; }

/* ‚ïê‚ïê‚ïê TABLE ‚ïê‚ïê‚ïê */
.data-table { width:100%; border-collapse:collapse; }
.data-table th {
  text-align:left; padding:10px 16px; font-size:11.5px; font-weight:600;
  letter-spacing:0.06em; text-transform:uppercase; color:var(--text-muted);
  border-bottom:1px solid var(--card-border); background:var(--cream-pale);
}
.data-table th:first-child { border-radius:10px 0 0 0; }
.data-table th:last-child { border-radius:0 10px 0 0; }
.data-table td {
  padding:12px 16px; font-size:13.5px; color:var(--text-primary);
  border-bottom:1px solid var(--card-border); vertical-align:middle;
}
.data-table tr { transition:background 0.15s ease; cursor:pointer; }
.data-table tbody tr:hover { background:var(--accent-light); }

/* ‚ïê‚ïê‚ïê BADGES ‚ïê‚ïê‚ïê */
.badge {
  display:inline-flex; align-items:center; gap:4px; padding:3px 10px;
  border-radius:20px; font-size:11.5px; font-weight:600; letter-spacing:0.02em;
}
.badge-open { background:rgba(107,138,94,0.12); color:var(--success); }
.badge-pending { background:rgba(196,154,74,0.12); color:var(--warning); }
.badge-closed { background:rgba(168,152,136,0.12); color:var(--text-muted); }
.badge-active { background:rgba(175,129,95,0.12); color:var(--brown-warm); }
.badge-danger { background:rgba(192,96,74,0.1); color:var(--danger); }
.badge-info { background:rgba(91,122,138,0.12); color:var(--info); }

/* ‚ïê‚ïê‚ïê STAT CARDS ‚ïê‚ïê‚ïê */
.stats-row { display:grid; grid-template-columns:repeat(auto-fit, minmax(160px,1fr)); gap:14px; margin-bottom:20px; }
.stat-card {
  background:var(--card-bg); border-radius:14px; padding:18px 20px;
  border:1px solid var(--card-border); box-shadow:var(--card-shadow);
}
.stat-label { font-size:12px; font-weight:500; color:var(--text-muted); margin-bottom:6px; text-transform:uppercase; letter-spacing:0.06em; }
.stat-value {
  font-family:'Playfair Display', Georgia, serif;
  font-size:28px; font-weight:600; color:var(--text-heading); line-height:1;
}
.stat-change { font-size:12px; margin-top:6px; font-weight:500; }
.stat-change.up { color:var(--success); }
.stat-change.down { color:var(--danger); }

/* ‚ïê‚ïê‚ïê AVATAR ‚ïê‚ïê‚ïê */
.avatar {
  width:36px; height:36px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-size:13px; font-weight:600; color:#fff; flex-shrink:0;
}

/* ‚ïê‚ïê‚ïê FORM ELEMENTS ‚ïê‚ïê‚ïê */
.form-group { margin-bottom:18px; }
.form-label { display:block; font-size:13px; font-weight:500; color:var(--text-secondary); margin-bottom:6px; }
.form-input {
  width:100%; padding:10px 14px; font-size:14px; font-family:inherit;
  color:var(--text-primary); background:var(--card-bg);
  border:1.5px solid var(--card-border); border-radius:10px; outline:none;
  transition:border-color 0.2s ease, box-shadow 0.2s ease;
}
.form-input:focus { border-color:var(--brown-warm); box-shadow:0 0 0 3px rgba(175,129,95,0.1); }
textarea.form-input { min-height:80px; resize:vertical; line-height:1.5; }
.form-hint { font-size:12px; color:var(--text-muted); margin-top:4px; }

/* ‚ïê‚ïê‚ïê TOGGLE SWITCH ‚ïê‚ïê‚ïê */
.toggle-row {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 0; border-bottom:1px solid var(--card-border);
}
.toggle-row:last-child { border-bottom:none; }
.toggle-info { flex:1; }
.toggle-title { font-size:14px; font-weight:500; color:var(--text-primary); }
.toggle-desc { font-size:12.5px; color:var(--text-muted); margin-top:2px; }
.toggle-switch {
  width:44px; height:24px; border-radius:12px; background:#d4c8bc;
  cursor:pointer; position:relative; transition:background 0.2s ease; flex-shrink:0;
  border:none; padding:0;
}
.toggle-switch::after {
  content:''; position:absolute; left:2px; top:2px;
  width:20px; height:20px; border-radius:50%; background:#fff;
  box-shadow:0 1px 3px rgba(0,0,0,0.15); transition:transform 0.2s ease;
}
.toggle-switch.on { background:var(--success); }
.toggle-switch.on::after { transform:translateX(20px); }

/* ‚ïê‚ïê‚ïê SEARCH ‚ïê‚ïê‚ïê */
.search-box {
  display:flex; align-items:center; gap:10px; padding:0 14px;
  height:40px; border-radius:10px; background:var(--card-bg);
  border:1.5px solid var(--card-border); transition:border-color 0.2s ease;
  max-width:280px;
}
.search-box:focus-within { border-color:var(--brown-warm); }
.search-box input {
  border:none; outline:none; background:transparent; font-size:13.5px;
  font-family:inherit; color:var(--text-primary); flex:1; width:100%;
}
.search-box input::placeholder { color:var(--text-muted); }

/* ‚ïê‚ïê‚ïê POST / COMMENT ‚ïê‚ïê‚ïê */
.post-card { margin-bottom:16px; }
.post-header { display:flex; align-items:center; gap:12px; margin-bottom:10px; }
.post-meta { flex:1; }
.post-author { font-size:14px; font-weight:600; color:var(--text-primary); }
.post-time { font-size:12px; color:var(--text-muted); }
.post-body { font-size:14px; line-height:1.6; color:var(--text-secondary); margin-bottom:12px; }
.post-actions { display:flex; gap:16px; padding-top:10px; border-top:1px solid var(--card-border); }
.post-action {
  display:flex; align-items:center; gap:5px; font-size:12.5px; font-weight:500;
  color:var(--text-muted); cursor:pointer; border:none; background:none;
  font-family:inherit; padding:4px 0; transition:color 0.2s ease;
}
.post-action:hover { color:var(--brown-warm); }

/* ‚ïê‚ïê‚ïê CHAT ‚ïê‚ïê‚ïê */
.chat-container {
  display:flex; flex-direction:column; height:calc(100vh - 180px);
  background:var(--card-bg); border-radius:14px; border:1px solid var(--card-border);
  overflow:hidden;
}
.chat-messages { flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:12px; }
.chat-messages::-webkit-scrollbar { width:4px; }
.chat-messages::-webkit-scrollbar-thumb { background:rgba(175,129,95,0.15); border-radius:2px; }
.chat-bubble {
  max-width:75%; padding:12px 16px; border-radius:14px;
  font-size:13.5px; line-height:1.5;
}
.chat-bubble.user {
  align-self:flex-end; background:var(--brown-deep); color:var(--cream);
  border-bottom-right-radius:4px;
}
.chat-bubble.ai {
  align-self:flex-start; background:var(--cream-light); color:var(--text-primary);
  border-bottom-left-radius:4px;
}
.chat-bubble .ai-label {
  font-size:10.5px; font-weight:600; text-transform:uppercase; letter-spacing:0.08em;
  color:var(--brown-warm); margin-bottom:4px;
}
.chat-input-bar {
  display:flex; align-items:center; gap:10px; padding:14px 16px;
  border-top:1px solid var(--card-border); background:var(--cream-pale);
}
.chat-input {
  flex:1; padding:10px 14px; font-size:14px; font-family:inherit;
  background:var(--card-bg); border:1.5px solid var(--card-border);
  border-radius:10px; outline:none; color:var(--text-primary);
}
.chat-input:focus { border-color:var(--brown-warm); }
.chat-send {
  width:40px; height:40px; border-radius:10px; border:none;
  background:var(--brown-deep); color:var(--cream); cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:background 0.2s ease;
}
.chat-send:hover { background:#4a302c; }

/* ‚ïê‚ïê‚ïê PROGRESS BAR ‚ïê‚ïê‚ïê */
.progress-bar { height:6px; background:var(--cream-light); border-radius:3px; overflow:hidden; }
.progress-fill { height:100%; border-radius:3px; transition:width 0.6s cubic-bezier(0.22,1,0.36,1); }

/* ‚ïê‚ïê‚ïê VOTE BAR ‚ïê‚ïê‚ïê */
.vote-bar { display:flex; gap:8px; align-items:center; margin-top:8px; }
.vote-btn {
  display:flex; align-items:center; gap:5px; padding:6px 14px;
  border-radius:8px; border:1.5px solid var(--card-border);
  background:transparent; font-size:12.5px; font-weight:500;
  font-family:inherit; cursor:pointer; color:var(--text-secondary);
  transition:all 0.2s ease;
}
.vote-btn:hover { border-color:var(--brown-warm); color:var(--brown-deep); }
.vote-btn.voted { border-color:var(--success); background:rgba(107,138,94,0.08); color:var(--success); }
.vote-count { font-size:12px; color:var(--text-muted); }

/* ‚ïê‚ïê‚ïê SECTION CARD ‚ïê‚ïê‚ïê */
.section-card { margin-bottom:20px; }
.section-card .card-body > h3 {
  font-size:15px; font-weight:600; color:var(--text-heading); margin-bottom:14px;
}

/* ‚ïê‚ïê‚ïê LIST ITEM ‚ïê‚ïê‚ïê */
.list-item {
  display:flex; align-items:center; gap:14px; padding:12px 0;
  border-bottom:1px solid var(--card-border);
}
.list-item:last-child { border-bottom:none; }
.list-item-icon {
  width:40px; height:40px; border-radius:10px;
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
}
.list-item-content { flex:1; min-width:0; }
.list-item-title { font-size:14px; font-weight:500; color:var(--text-primary); }
.list-item-sub { font-size:12.5px; color:var(--text-muted); margin-top:1px; }

/* ‚ïê‚ïê‚ïê SECURITY KEY ‚ïê‚ïê‚ïê */
.security-item {
  display:flex; align-items:center; gap:14px; padding:14px 16px;
  background:var(--cream-pale); border-radius:10px; margin-bottom:8px;
}
.security-item-icon {
  width:40px; height:40px; border-radius:10px; background:var(--card-bg);
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
  border:1px solid var(--card-border);
}
.security-item-info { flex:1; }
.security-item-name { font-size:14px; font-weight:500; color:var(--text-primary); }
.security-item-date { font-size:12px; color:var(--text-muted); }

/* ‚ïê‚ïê‚ïê TWO COLUMN ‚ïê‚ïê‚ïê */
.two-col { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.three-col { display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px; }

/* ‚ïê‚ïê‚ïê TOKEN DISPLAY ‚ïê‚ïê‚ïê */
.token-hero {
  text-align:center; padding:32px 20px; margin-bottom:20px;
  background:linear-gradient(135deg, var(--brown-deep) 0%, #6b4a3a 100%);
  border-radius:16px; color:var(--cream);
}
.token-balance {
  font-family:'Playfair Display', Georgia, serif;
  font-size:48px; font-weight:700; line-height:1; margin-bottom:4px;
}
.token-label { font-size:13px; opacity:0.7; margin-bottom:16px; }
.token-actions { display:flex; gap:10px; justify-content:center; }
.token-btn {
  padding:8px 20px; border-radius:20px; border:1.5px solid rgba(237,214,183,0.3);
  background:transparent; color:var(--cream); font-size:13px; font-weight:500;
  font-family:inherit; cursor:pointer; transition:all 0.2s ease;
}
.token-btn:hover { background:rgba(237,214,183,0.1); border-color:var(--cream); }

/* ‚ïê‚ïê‚ïê FINANCIALS CHART PLACEHOLDER ‚ïê‚ïê‚ïê */
.chart-placeholder {
  height:200px; border-radius:12px; background:var(--cream-pale);
  display:flex; align-items:center; justify-content:center; position:relative;
  overflow:hidden;
}
.chart-bars { display:flex; align-items:flex-end; gap:8px; height:140px; padding:0 20px; }
.chart-bar {
  width:28px; border-radius:4px 4px 0 0;
  transition:height 0.6s cubic-bezier(0.22,1,0.36,1);
}

/* ‚ïê‚ïê‚ïê ON-CHAIN ‚ïê‚ïê‚ïê */
.onchain-hash {
  font-family:'JetBrains Mono', monospace; font-size:12px; color:var(--info);
  background:rgba(91,122,138,0.08); padding:3px 8px; border-radius:4px;
  word-break:break-all;
}

/* ‚ïê‚ïê‚ïê MODAL / SLIDE PANEL ‚ïê‚ïê‚ïê */
.modal-overlay {
  position:fixed; inset:0; z-index:1000;
  background:rgba(58,46,42,0.45); backdrop-filter:blur(4px);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none;
  transition:opacity 0.25s ease;
}
.modal-overlay.open { opacity:1; pointer-events:auto; }
.modal-panel {
  background:var(--card-bg); border-radius:18px;
  box-shadow:0 20px 60px rgba(89,57,52,0.18);
  width:90%; max-width:680px; max-height:88vh;
  display:flex; flex-direction:column;
  transform:translateY(16px) scale(0.97);
  transition:transform 0.3s cubic-bezier(0.22,1,0.36,1);
  overflow:hidden;
}
.modal-overlay.open .modal-panel { transform:translateY(0) scale(1); }
.modal-panel.wide { max-width:840px; }
.modal-header {
  display:flex; align-items:center; justify-content:space-between;
  padding:20px 24px 16px; border-bottom:1px solid var(--card-border);
  flex-shrink:0;
}
.modal-header-left { display:flex; align-items:center; gap:12px; }
.modal-title {
  font-family:'Playfair Display', Georgia, serif;
  font-size:19px; font-weight:700; color:var(--text-heading);
}
.modal-subtitle { font-size:12.5px; color:var(--text-muted); margin-top:1px; }
.modal-close {
  width:36px; height:36px; border-radius:10px; border:none;
  background:var(--cream-light); color:var(--text-muted);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:all 0.2s ease; flex-shrink:0;
}
.modal-close:hover { background:var(--accent-light); color:var(--text-primary); }
.modal-body {
  padding:24px; overflow-y:auto; flex:1;
}
.modal-body::-webkit-scrollbar { width:4px; }
.modal-body::-webkit-scrollbar-thumb { background:rgba(175,129,95,0.15); border-radius:2px; }
.modal-footer {
  display:flex; align-items:center; justify-content:flex-end; gap:10px;
  padding:16px 24px; border-top:1px solid var(--card-border);
  flex-shrink:0; background:var(--cream-pale);
}
.modal-footer .btn { min-width:100px; justify-content:center; }

/* Form layout inside modals */
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.form-row.three { grid-template-columns:1fr 1fr 1fr; }
.form-section { margin-bottom:24px; }
.form-section-title {
  font-size:14px; font-weight:600; color:var(--text-heading);
  margin-bottom:12px; padding-bottom:8px;
  border-bottom:1px solid var(--card-border);
  display:flex; align-items:center; gap:8px;
}
.form-select {
  width:100%; padding:10px 14px; font-size:14px; font-family:inherit;
  color:var(--text-primary); background:var(--card-bg);
  border:1.5px solid var(--card-border); border-radius:10px; outline:none;
  transition:border-color 0.2s ease; appearance:none; cursor:pointer;
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23a89888' stroke-width='2' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 14px center;
}
.form-select:focus { border-color:var(--brown-warm); }
.form-checkbox-row {
  display:flex; align-items:center; gap:10px; padding:8px 0;
}
.form-checkbox {
  width:20px; height:20px; border-radius:6px;
  border:2px solid var(--card-border); background:transparent;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:all 0.2s ease; flex-shrink:0;
}
.form-checkbox.checked { background:var(--success); border-color:var(--success); }
.form-checkbox-label { font-size:13.5px; color:var(--text-primary); cursor:pointer; }
.form-tag-input {
  display:flex; flex-wrap:wrap; gap:6px; padding:8px 12px;
  min-height:44px; border:1.5px solid var(--card-border);
  border-radius:10px; background:var(--card-bg); align-items:center;
  transition:border-color 0.2s ease; cursor:text;
}
.form-tag-input:focus-within { border-color:var(--brown-warm); }
.form-tag {
  display:inline-flex; align-items:center; gap:4px;
  padding:3px 10px; border-radius:6px; font-size:12px; font-weight:500;
  background:var(--accent-light); color:var(--olive);
}
.form-tag button {
  background:none; border:none; color:var(--text-muted); cursor:pointer;
  font-size:14px; line-height:1; padding:0 0 0 2px;
}
.form-tag-input input {
  border:none; outline:none; background:transparent; font-size:13px;
  font-family:inherit; color:var(--text-primary); flex:1; min-width:80px;
}
.char-count { font-size:11px; color:var(--text-muted); text-align:right; margin-top:2px; }

/* Detail view specifics */
.detail-header {
  display:flex; align-items:flex-start; justify-content:space-between;
  margin-bottom:20px; gap:16px;
}
.detail-title {
  font-family:'Playfair Display', Georgia, serif;
  font-size:20px; font-weight:700; color:var(--text-heading); line-height:1.3;
}
.detail-meta {
  display:flex; flex-wrap:wrap; gap:12px; margin-top:8px;
  font-size:12.5px; color:var(--text-muted);
}
.detail-meta-item { display:flex; align-items:center; gap:4px; }
.detail-section {
  margin-bottom:20px; padding-bottom:20px;
  border-bottom:1px solid var(--card-border);
}
.detail-section:last-child { border-bottom:none; margin-bottom:0; padding-bottom:0; }
.detail-section-title {
  font-size:13px; font-weight:600; text-transform:uppercase;
  letter-spacing:0.06em; color:var(--text-muted); margin-bottom:10px;
}
.vote-results {
  display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:14px;
}
.vote-result-card {
  text-align:center; padding:14px; border-radius:12px; background:var(--cream-pale);
}
.vote-result-value {
  font-family:'Playfair Display', Georgia, serif;
  font-size:28px; font-weight:700; line-height:1;
}
.vote-result-label { font-size:11.5px; color:var(--text-muted); margin-top:4px; font-weight:500; }
.comment-item {
  display:flex; gap:10px; padding:12px 0;
  border-bottom:1px solid var(--card-border);
}
.comment-item:last-child { border-bottom:none; }
.comment-body { font-size:13.5px; line-height:1.5; color:var(--text-secondary); }
.comment-author { font-size:13px; font-weight:600; color:var(--text-primary); }
.comment-time { font-size:11.5px; color:var(--text-muted); margin-left:8px; }

/* Timeline */
.timeline-item {
  display:flex; gap:14px; padding:10px 0; position:relative;
}
.timeline-item::before {
  content:''; position:absolute; left:15px; top:38px; bottom:-10px;
  width:1px; background:var(--card-border);
}
.timeline-item:last-child::before { display:none; }
.timeline-dot {
  width:30px; height:30px; border-radius:50%; flex-shrink:0;
  display:flex; align-items:center; justify-content:center;
  background:var(--cream-light); z-index:1;
}
.timeline-content { flex:1; padding-top:3px; }
.timeline-text { font-size:13px; color:var(--text-secondary); }
.timeline-date { font-size:11.5px; color:var(--text-muted); margin-top:2px; }

/* ‚ïê‚ïê‚ïê ANIMATIONS ‚ïê‚ïê‚ïê */
@keyframes fadeIn {
  from { opacity:0; transform:translateY(6px); }
  to { opacity:1; transform:translateY(0); }
}
@keyframes slideIn {
  from { opacity:0; transform:translateX(-8px); }
  to { opacity:1; transform:translateX(0); }
}

/* ‚ïê‚ïê‚ïê RESPONSIVE ‚ïê‚ïê‚ïê */
@media (max-width:1100px) {
  .two-col, .three-col { grid-template-columns:1fr; }
}
@media (max-width:768px) {
  .sidebar { width:60px; min-width:60px; }
  .sidebar-logo svg { width:28px; height:28px; }
  .sidebar-logo { padding:18px 16px; }
  .nav-item span { display:none; }
  .nav-item { justify-content:center; padding:10px; }
  .nav-item.active::before { display:none; }
  .main-content { padding:20px 16px; }
  .stats-row { grid-template-columns:1fr 1fr; }
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="sidebar">
  <div class="sidebar-logo">
    <svg width="48" height="48" viewBox="0 0 120 120" fill="none">
      <g transform="translate(10,10)">
        <path d="M50 0 L95 25 L95 35 L55 13 L55 100 L45 100 L45 13 L5 35 L5 25 Z" fill="#edd6b7" opacity="0.9"/>
        <path d="M25 40 L70 15 L70 25 L30 47 L30 100 L20 100 L20 47 Z" fill="#edd6b7" opacity="0.6"/>
        <path d="M65 50 L65 100 L75 100 L75 45 L100 32 L100 25 Z" fill="#edd6b7" opacity="0.35"/>
      </g>
    </svg>
  </div>
  <div class="sidebar-nav" id="sidebarNav"></div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="main-wrapper">
  <main class="main-content" id="mainContent"></main>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal-panel" id="modalPanel"></div>
</div>

<script>
// ‚ïê‚ïê‚ïê ICON HELPER ‚ïê‚ïê‚ïê
function I(name,s=20,c='currentColor',sw=1.8){
const m={
home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>',
zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>',
chat:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>',
users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',
smile:'<circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/>',
git:'<circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M6 21V9a9 9 0 0 0 9 9"/>',
folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>',
docs:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>',
token:'<circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/>',
pie:'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/>',
dollar:'<line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>',
search:'<circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>',
settings:'<circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.26.6.85 1 1.51 1H21a2 2 0 0 1 0 4h-.09c-.66 0-1.25.4-1.51 1z"/>',
logout:'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>',
check:'<polyline points="20 6 9 17 4 12"/>',
plus:'<line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>',
chevron:'<polyline points="9 18 15 12 9 6"/>',
file:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>',
shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>',
key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>',
lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>',
bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/>',
globe:'<circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>',
heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>',
send:'<line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>',
download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>',
upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>',
user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>',
building:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><line x1="9" y1="22" x2="9" y2="2"/><line x1="15" y1="22" x2="15" y2="2"/><line x1="4" y1="12" x2="20" y2="12"/>',
rss:'<path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>',
thumbsUp:'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/>',
msgCircle:'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>',
link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>',
fingerprint:'<path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10"/><path d="M12 2a14.5 14.5 0 0 0 0 20"/><path d="M2 12h4"/><circle cx="12" cy="12" r="2"/>',
smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/>',
};
return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" stroke="${c}" stroke-width="${sw}" stroke-linecap="round" stroke-linejoin="round">${m[name]||''}</svg>`;
}

// ‚ïê‚ïê‚ïê NAV CONFIG ‚ïê‚ïê‚ïê
const NAV=[
  {id:'home',icon:'home',label:'Home'},
  {id:'whatsup',icon:'zap',label:"What's Up?"},
  {id:'conversations',icon:'chat',label:'Conversations'},
  {id:'contacts',icon:'users',label:'Contacts'},
  {id:'opportunities',icon:'smile',label:'Opportunities'},
  {id:'decisions',icon:'git',label:'Decisions'},
  {id:'projects',icon:'folder',label:'Projects'},
  {id:'docs',icon:'docs',label:'Docs'},
  {id:'tokens',icon:'token',label:'Tokens'},
  {id:'operations',icon:'pie',label:'Operations'},
  {id:'financials',icon:'dollar',label:'Financials'},
  {id:'reports',icon:'search',label:'Reports'},
  {id:'_spacer'},
  {id:'_divider'},
  {id:'settings',icon:'settings',label:'Settings'},
  {id:'logout',icon:'logout',label:'Log Out'},
];

// Build sidebar
const sidebarNav=document.getElementById('sidebarNav');
NAV.forEach(n=>{
  if(n.id==='_spacer'){sidebarNav.innerHTML+='<div class="nav-spacer"></div>';return;}
  if(n.id==='_divider'){sidebarNav.innerHTML+='<div class="nav-divider"></div>';return;}
  const cls=n.id==='home'?'nav-item active':'nav-item';
  sidebarNav.innerHTML+=`<button class="${cls}" data-nav="${n.id}" onclick="navigate('${n.id}')">${I(n.icon,20)}<span>${n.label}</span></button>`;
});

// ‚ïê‚ïê‚ïê NAVIGATION ‚ïê‚ïê‚ïê
let currentPage='home';
function navigate(id){
  if(id==='logout')return;
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.toggle('active',n.dataset.nav===id));
  currentPage=id;
  render();
}

// ‚ïê‚ïê‚ïê RENDER ‚ïê‚ïê‚ïê
const mc=document.getElementById('mainContent');
function render(){
  mc.style.opacity='0';
  setTimeout(()=>{
    mc.innerHTML=pages[currentPage]?pages[currentPage]():'';
    mc.scrollTop=0;
    mc.style.opacity='1';
    if(currentPage==='reports')initChat();
    if(currentPage==='financials')animateBars();
    if(currentPage==='tokens')animateTokens();
  },150);
}

// ‚ïê‚ïê‚ïê HELPER: TABS ‚ïê‚ïê‚ïê
function tabsHTML(tabs,active=0,id='tabs'){
  return `<div class="tabs" id="${id}">${tabs.map((t,i)=>`<button class="tab-btn${i===active?' active':''}" data-tab="${id}-${i}" onclick="switchTab('${id}',${i})">${t}</button>`).join('')}</div>`;
}
function switchTab(id,idx){
  document.querySelectorAll('#'+id+' .tab-btn').forEach((b,i)=>b.classList.toggle('active',i===idx));
  document.querySelectorAll('.tp-'+id).forEach((p,i)=>{p.style.display=i===idx?'block':'none';});
}
function tp(id,idx){return `<div class="tp-${id}" style="display:${idx===0?'block':'none'}">`;}
const tpc='</div>';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PAGE CONTENT GENERATORS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const pages={};

// ‚îÄ‚îÄ‚îÄ HOME ‚îÄ‚îÄ‚îÄ
pages.home=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon" style="background:var(--brown-deep)">${I('home',22,'#edd6b7')}</div>
    <div><div class="page-title">Dashboard</div><div class="page-subtitle">Welcome back</div></div>
  </div>
</div>
<div class="stats-row">
  <div class="stat-card"><div class="stat-label">Open Tasks</div><div class="stat-value">12</div><div class="stat-change up">‚Üë 3 this week</div></div>
  <div class="stat-card"><div class="stat-label">Active Teams</div><div class="stat-value">3</div></div>
  <div class="stat-card"><div class="stat-label">Due Soon</div><div class="stat-value" style="color:var(--warning)">5</div></div>
  <div class="stat-card"><div class="stat-label">Overdue</div><div class="stat-value" style="color:var(--danger)">2</div><div class="stat-change down">‚Üì 1 from last week</div></div>
</div>
<div class="two-col">
  <div class="card section-card"><div class="card-body">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px">
      <span style="font-size:15px;font-weight:700;color:var(--text-heading)">Updates</span>${I('rss',16,'#a89888')}
    </div>
    <p style="font-size:13px;color:var(--text-muted);font-style:italic">No new updates</p>
  </div></div>
  <div class="card section-card"><div class="card-body">
    <h3>What's up?</h3>
    <p style="font-size:13.5px;color:var(--text-secondary);line-height:1.5;margin-bottom:14px">What's going on and who's doing it?</p>
    <button class="btn" style="width:100%;justify-content:center" onclick="navigate('conversations')">Community Planning</button>
  </div></div>
</div>`;

// ‚îÄ‚îÄ‚îÄ WHAT'S UP ‚îÄ‚îÄ‚îÄ
pages.whatsup=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon">${I('zap',22,'var(--brown-warm)')}</div>
    <div><div class="page-title">What's Up?</div><div class="page-subtitle">Community activity feed</div></div>
  </div>
</div>
<div class="card" style="margin-bottom:16px"><div class="card-body">
  <div style="display:flex;gap:12px;align-items:flex-start">
    <div class="avatar" style="background:var(--brown-deep)">MC</div>
    <textarea class="form-input" placeholder="Share an update with the community‚Ä¶" style="min-height:60px"></textarea>
  </div>
  <div style="display:flex;justify-content:flex-end;margin-top:10px"><button class="btn btn-primary btn-sm" onclick="openNewPost()">Post Update</button></div>
</div></div>
<div class="card post-card"><div class="card-body">
  <div class="post-header"><div class="avatar" style="background:var(--olive)">SC</div><div class="post-meta"><div class="post-author">Lucy Hartwell</div><div class="post-time">2 hours ago</div></div></div>
  <div class="post-body">Just finished hand-dyeing a batch of merino in indigo and walnut. The colours came out beautifully ‚Äî swatches will be at the studio this weekend! üß∂</div>
  <div class="post-actions"><button class="post-action">${I('thumbsUp',14)} 12</button><button class="post-action">${I('msgCircle',14)} 4 Comments</button></div>
</div></div>
<div class="card post-card"><div class="card-body">
  <div class="post-header"><div class="avatar" style="background:var(--info)">TP</div><div class="post-meta"><div class="post-author">Tom Pearson</div><div class="post-time">Yesterday</div></div></div>
  <div class="post-body">Vote on the new Saturday ceramics workshop is open in Decisions. We need input on timing ‚Äî morning or afternoon session? Cast your vote! üè∫</div>
  <div class="post-actions"><button class="post-action">${I('thumbsUp',14)} 14</button><button class="post-action">${I('msgCircle',14)} 7 Comments</button></div>
</div></div>`;

// ‚îÄ‚îÄ‚îÄ DECISIONS ‚îÄ‚îÄ‚îÄ
pages.decisions=()=>{
const proposals=[
{id:'DEC-012',title:'Add Saturday Ceramics Workshop',author:'Tom Pearson',date:'Mar 1, 2026',closes:'Mar 15',desc:'Proposal to add a weekly Saturday morning ceramics session from 9am‚Äì12pm using the community kiln and wheel studio.',vFor:14,vAgainst:2,vAbstain:3,total:24,status:'active',cat:'Workshops',myVote:'For'},
{id:'DEC-011',title:'Spring Retreat Budget Allocation',author:'Ellen Morris',date:'Feb 28',closes:'Mar 12',desc:'Allocate $2,400 from community funds towards the Spring Quilting Retreat ‚Äî covering venue, guest instructor fees, and fabric supplies.',vFor:8,vAgainst:1,vAbstain:2,total:24,status:'active',cat:'Treasury',myVote:null},
{id:'DEC-010',title:'Adopt Shared Tool Library Policy',author:'Rosa Delgado',date:'Feb 20',closes:'Mar 5',desc:'Establish a shared tool lending library where members can borrow speciality equipment (looms, rotary cutters, embossing tools) for up to 7 days.',vFor:5,vAgainst:1,vAbstain:1,total:24,status:'active',cat:'Policy',myVote:null},
{id:'DEC-009',title:'Monthly Makers Market',author:'Lucy Hartwell',date:'Feb 5',closes:'Feb 20',desc:'Host a monthly makers market in the community hall for members to sell handcrafted goods.',vFor:20,vAgainst:1,vAbstain:2,total:24,status:'passed',cat:'Community',myVote:'For'},
{id:'DEC-008',title:'Upgrade Community Sewing Machines',author:'Nina Chang',date:'Jan 28',closes:'Feb 10',desc:'Replace 4 aging sewing machines with industrial-grade Juki models for the textile studio.',vFor:18,vAgainst:3,vAbstain:1,total:24,status:'passed',cat:'Equipment',myVote:'For'},
{id:'DEC-007',title:'Youth Craft Apprenticeship Programme',author:'Tom Pearson',date:'Jan 20',closes:'Feb 3',desc:'Launch a mentorship programme pairing experienced makers with young people aged 14‚Äì18 to learn traditional crafts.',vFor:21,vAgainst:0,vAbstain:2,total:24,status:'passed',cat:'Education',myVote:'For'},
{id:'DEC-006',title:'Mandatory Workshop Fees for Non-Members',author:'Guest Contributor',date:'Jan 10',closes:'Jan 23',desc:'Charge a $50 fee for non-members attending any community workshop.',vFor:6,vAgainst:15,vAbstain:2,total:24,status:'rejected',cat:'Policy',myVote:'Against'},
{id:'DEC-005',title:'Close Studio on Mondays',author:'Admin',date:'Jan 5',closes:'Jan 18',desc:'Close the maker studio on Mondays for deep cleaning and maintenance.',vFor:8,vAgainst:13,vAbstain:1,total:24,status:'rejected',cat:'Operations',myVote:'Against'},
{id:'DEC-013',title:'Summer Textile Exhibition',author:'Lucy Hartwell',date:'Mar 2',closes:'',desc:'Proposal for a public textile and fibre arts exhibition in the community gallery space during July.',vFor:0,vAgainst:0,vAbstain:0,total:24,status:'draft',cat:'Community',myVote:null},
];
const renderProposal=(p)=>{
const voted=p.vFor+p.vAgainst+p.vAbstain;const pct=voted>0?Math.round(p.vFor/voted*100):0;
const statusBadge=p.status==='active'?'open':p.status==='passed'?'active':p.status==='rejected'?'closed':'pending';
const statusText=p.status==='active'?'Active':p.status==='passed'?'Passed':p.status==='rejected'?'Rejected':'Draft';
return `<div class="card section-card" style="margin-bottom:16px"><div class="card-body" style="cursor:pointer" onclick="openViewProposal('${p.id}')">
<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px"><div><h3 style="margin-bottom:4px">${p.id}: ${p.title}</h3><div style="font-size:12.5px;color:var(--text-muted)">Proposed by ${p.author} ¬∑ ${p.date}${p.closes?' ¬∑ Closes '+p.closes:''}</div></div><div><span class="badge badge-${statusBadge}">${statusText}</span> <span class="badge badge-info">${p.cat}</span></div></div>
<p style="font-size:13.5px;color:var(--text-secondary);line-height:1.6;margin-bottom:12px">${p.desc}</p>
${p.status!=='draft'?`<div style="display:flex;gap:24px;margin-bottom:10px"><div><span style="font-size:22px;font-weight:700;color:var(--success)">${p.vFor}</span><span style="font-size:12px;color:var(--text-muted)"> For</span></div><div><span style="font-size:22px;font-weight:700;color:var(--danger)">${p.vAgainst}</span><span style="font-size:12px;color:var(--text-muted)"> Against</span></div><div><span style="font-size:22px;font-weight:700;color:var(--text-muted)">${p.vAbstain}</span><span style="font-size:12px;color:var(--text-muted)"> Abstain</span></div></div>
<div class="progress-bar" style="margin-bottom:10px"><div class="progress-fill" style="width:${pct}%;background:${pct>=60?'var(--success)':'var(--warning)'}"></div></div>
<div class="vote-bar">${p.myVote?`<button class="vote-btn voted">${I('check',14,'var(--success)',2)} Voted ${p.myVote}</button>`:`<button class="vote-btn">${I('thumbsUp',14)} Vote For</button><button class="vote-btn">Against</button><button class="vote-btn">Abstain</button>`}<span class="vote-count">${voted} of ${p.total} voted</span></div>`:'<div class="vote-bar"><span class="vote-count" style="font-style:italic">Draft ‚Äî not yet open for voting</span></div>'}
</div></div>`;};
const active=proposals.filter(p=>p.status==='active'),passed=proposals.filter(p=>p.status==='passed'),rejected=proposals.filter(p=>p.status==='rejected'),draft=proposals.filter(p=>p.status==='draft');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('git',22,'var(--brown-warm)')}</div><div><div class="page-title">Decisions</div><div class="page-subtitle">Community governance decisions</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openNewProposal()">${I('plus',14,'#edd6b7')} New Proposal</button></div></div>
${tabsHTML(['Active ('+active.length+')','Passed ('+passed.length+')','Rejected ('+rejected.length+')','Draft ('+draft.length+')'],0,'decTabs')}
${tp('decTabs',0)}${active.map(renderProposal).join('')}${tpc}
${tp('decTabs',1)}${passed.map(renderProposal).join('')}${tpc}
${tp('decTabs',2)}${rejected.map(renderProposal).join('')}${tpc}
${tp('decTabs',3)}${draft.map(renderProposal).join('')}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ CONVERSATIONS ‚îÄ‚îÄ‚îÄ
pages.conversations=()=>{
const posts=[
{id:1,author:'Lucy Hartwell',avatar:'LH',color:'var(--olive)',time:'2 hours ago',title:'üì¢ Spring Quilting Retreat ‚Äî Registration Open',body:'Registrations are now live for the Spring Quilting Retreat (April 12‚Äì14). Guest instructor Maya Patel will be teaching Sashiko techniques. Spaces limited to 20!',likes:18,comments:9,badge:'Announcement'},
{id:2,author:'Tom Pearson',avatar:'TP',color:'var(--info)',time:'5 hours ago',title:'Raku Firing Weekend ‚Äî Who\'s In?',body:'Planning a raku firing session next Saturday. Need at least 6 participants to fire up the outdoor kiln. Bring your bisque-fired pieces!',likes:11,comments:6,badge:'Discussion'},
{id:3,author:'Rosa Delgado',avatar:'RD',color:'var(--brown-warm)',time:'Yesterday',title:'Best beginner loom for rigid heddle weaving?',body:'I want to recommend looms for our intro weaving class. Considering the Ashford Knitters Loom vs Schacht Cricket. Any experience with either?',likes:7,comments:14,badge:'Question'},
{id:4,author:'Ellen Morris',avatar:'EM',color:'var(--brown-deep)',time:'2 days ago',title:'üì¢ New Dye Kitchen Safety Guidelines',body:'Updated safety guidelines for the dye kitchen are posted by the door. Key changes: mandatory gloves for all acid dyes, new ventilation protocol for vat dyes.',likes:22,comments:3,badge:'Announcement'},
{id:5,author:'Nina Chang',avatar:'NC',color:'var(--success)',time:'3 days ago',title:'Embroidery circle ‚Äî changing to Thursday nights',body:'After the poll, Thursday 7pm won! We\'ll start the new schedule next week. Bring your current project or start a new sampler.',likes:9,comments:5,badge:'Discussion'},
{id:6,author:'Jake Turner',avatar:'JT',color:'#7a6a8a',time:'4 days ago',title:'How do you store handspun yarn?',body:'My handspun skeins keep tangling. Anyone have a good storage system? I\'ve tried swift-wound balls but they lose twist over time.',likes:5,comments:8,badge:'Question'},
];
const renderPost=(p)=>`<div class="card post-card"><div class="card-body" style="cursor:pointer" onclick="openViewPost(${p.id})">
<div class="post-header"><div class="avatar" style="background:${p.color}">${p.avatar}</div><div class="post-meta"><div class="post-author">${p.author} <span class="badge badge-info" style="margin-left:6px">${p.badge}</span></div><div class="post-time">${p.time}</div></div></div>
<div style="font-size:15px;font-weight:600;color:var(--text-primary);margin-bottom:6px">${p.title}</div>
<div class="post-body">${p.body}</div>
<div class="post-actions"><button class="post-action">${I('thumbsUp',14)} ${p.likes}</button><button class="post-action">${I('msgCircle',14)} ${p.comments} Comments</button><button class="post-action">${I('link',14)} Share</button></div>
</div></div>`;
return `
<div class="page-header">
  <div class="page-header-left"><div class="page-icon">${I('chat',22,'var(--brown-warm)')}</div><div><div class="page-title">Conversations</div><div class="page-subtitle">Posts & comments</div></div></div>
  <div class="header-actions"><button class="btn btn-primary" onclick="openNewPost()">${I('plus',14,'#edd6b7')} New Post</button></div>
</div>
${tabsHTML(['All Posts ('+posts.length+')','Announcements ('+posts.filter(p=>p.badge==='Announcement').length+')','Discussion ('+posts.filter(p=>p.badge==='Discussion').length+')','Questions ('+posts.filter(p=>p.badge==='Question').length+')'],0,'convTabs')}
${tp('convTabs',0)}${posts.map(renderPost).join('')}${tpc}
${tp('convTabs',1)}${posts.filter(p=>p.badge==='Announcement').map(renderPost).join('')}${tpc}
${tp('convTabs',2)}${posts.filter(p=>p.badge==='Discussion').map(renderPost).join('')}${tpc}
${tp('convTabs',3)}${posts.filter(p=>p.badge==='Question').map(renderPost).join('')}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ CONTACTS ‚îÄ‚îÄ‚îÄ
pages.contacts=()=>{
const contacts=[
{name:'Heartwood Makers Collective',type:'Organisation',role:'Partner Studio',loc:'Melbourne, AU',status:'active',avatar:'HM',color:'var(--brown-deep)',team:'Textile Arts Guild'},
{name:'Lucy Hartwell',type:'Individual',role:'Textile Lead',loc:'Sydney, AU',status:'active',avatar:'LH',color:'var(--olive)',team:'Textile Arts Guild'},
{name:'Tom Pearson',type:'Individual',role:'Ceramics Lead',loc:'Blue Mountains, AU',status:'active',avatar:'TP',color:'var(--info)',team:'Ceramics Circle'},
{name:'Makers Supply Co.',type:'Organisation',role:'Supplier',loc:'Brisbane, AU',status:'active',avatar:'MS',color:'#2a4b7c',team:''},
{name:'Rosa Delgado',type:'Individual',role:'Weaving Instructor',loc:'Adelaide, AU',status:'active',avatar:'RD',color:'var(--brown-warm)',team:'Fibre Arts Studio'},
{name:'Nina Chang',type:'Individual',role:'Embroidery Lead',loc:'Hobart, AU',status:'active',avatar:'NC',color:'var(--success)',team:'Textile Arts Guild'},
{name:'Ellen Morris',type:'Individual',role:'Treasurer / Dyer',loc:'Perth, AU',status:'active',avatar:'EM',color:'var(--brown-deep)',team:'Natural Dye Lab'},
{name:'Jake Turner',type:'Individual',role:'Spinner & Fibre Artist',loc:'Newcastle, AU',status:'pending',avatar:'JT',color:'#7a6a8a',team:'Fibre Arts Studio'},
{name:'The Wool Collective',type:'Organisation',role:'Yarn Partner',loc:'Geelong, AU',status:'active',avatar:'WC',color:'var(--olive)',team:''},
];
const renderTable=(list)=>`<div class="card"><div class="card-body" style="padding:0"><table class="data-table">
<thead><tr><th>Name</th><th>Type</th><th>Role</th><th>Location</th><th>Status</th></tr></thead><tbody>
${list.map(c=>`<tr style="cursor:pointer" onclick="openViewContact('${c.name.replace(/'/g,"\\'")}')">
<td><div style="display:flex;align-items:center;gap:10px"><div class="avatar" style="background:${c.color};width:32px;height:32px;font-size:11px;border-radius:8px">${c.avatar}</div><span style="font-weight:500">${c.name}</span></div></td>
<td><span style="display:flex;align-items:center;gap:5px">${I(c.type==='Organisation'?'building':'user',14,'#a89888')} ${c.type}</span></td>
<td>${c.role}</td><td>${c.loc}</td>
<td><span class="badge badge-${c.status==='active'?'open':'pending'}">${c.status==='active'?'Active':'Pending'}</span></td>
</tr>`).join('')}</tbody></table></div></div>`;
const teams=[{id:1,name:'Textile Arts Guild',members:3,lead:'Lucy Hartwell'},{id:2,name:'Ceramics Circle',members:2,lead:'Tom Pearson'},{id:3,name:'Fibre Arts Studio',members:2,lead:'Rosa Delgado'},{id:4,name:'Natural Dye Lab',members:1,lead:'Ellen Morris'},{id:5,name:'Makers Market Committee',members:4,lead:'Ellen Morris'}];
return `
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('users',22,'var(--brown-warm)')}</div><div><div class="page-title">Contacts</div><div class="page-subtitle">Makers, organisations & teams</div></div></div>
<div class="header-actions"><div class="search-box">${I('search',16,'#a89888')}<input placeholder="Search contacts‚Ä¶"></div><button class="btn btn-primary" onclick="openAddContact()">${I('plus',14,'#edd6b7')} Add Contact</button></div></div>
${tabsHTML(['All ('+contacts.length+')','Organisations ('+contacts.filter(c=>c.type==='Organisation').length+')','Individuals ('+contacts.filter(c=>c.type==='Individual').length+')','Teams ('+teams.length+')'],0,'ctTabs')}
${tp('ctTabs',0)}${renderTable(contacts)}${tpc}
${tp('ctTabs',1)}${renderTable(contacts.filter(c=>c.type==='Organisation'))}${tpc}
${tp('ctTabs',2)}${renderTable(contacts.filter(c=>c.type==='Individual'))}${tpc}
${tp('ctTabs',3)}
${teams.map(t=>`<div class="card section-card"><div class="card-body" style="cursor:pointer" onclick="openViewTeam(${t.id})"><div style="display:flex;justify-content:space-between;align-items:center">
<div><h3 style="margin-bottom:4px">${t.name}</h3><div style="font-size:12.5px;color:var(--text-muted)">Lead: ${t.lead} ¬∑ ${t.members} members</div></div>
<button class="btn btn-sm" onclick="event.stopPropagation();openViewTeam(${t.id})">View Team</button></div></div></div>`).join('')}
${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ OPPORTUNITIES ‚îÄ‚îÄ‚îÄ
pages.opportunities=()=>{
const opps=[
{id:1,title:'Community Quilt for Local Hospital',desc:'Create a collaborative quilt with contributions from all members to donate to the children\'s ward at Sydney Royal Hospital.',impact:'High',votes:22,status:'open',author:'Lucy Hartwell',area:'Community',effort:'Large'},
{id:2,title:'Beginner Ceramics Kit',desc:'Develop a take-home ceramics starter kit for new members with clay, basic tools, and an instruction booklet.',impact:'Medium',votes:14,status:'open',author:'Tom Pearson',area:'Education',effort:'Medium'},
{id:3,title:'Online Pattern Library',desc:'Build a shared digital library of patterns, templates, and tutorials contributed by members.',impact:'High',votes:18,status:'review',author:'Nina Chang',area:'Documentation',effort:'Medium'},
{id:4,title:'Makers Market Square Stall Design',desc:'Design modular market stall display units that can be reused each month at the makers market.',impact:'Medium',votes:9,status:'review',author:'Ellen Morris',area:'Events',effort:'Small'},
{id:5,title:'Natural Dye Garden',desc:'Plant a dye garden on the community plot with indigo, weld, madder, and marigolds for sustainable colour sourcing.',impact:'High',votes:28,status:'approved',author:'Ellen Morris',area:'Resources',effort:'Large'},
{id:6,title:'Kiln Booking System',desc:'Online booking calendar for the shared kiln so members can reserve firing times and avoid conflicts.',impact:'Medium',votes:15,status:'approved',author:'Tom Pearson',area:'Operations',effort:'Small'},
{id:7,title:'Guest Instructor Series',desc:'Quarterly guest instructor workshops on speciality techniques like Sashiko, raku, and botanical printing.',impact:'High',votes:24,status:'approved',author:'Rosa Delgado',area:'Education',effort:'Medium'},
{id:8,title:'Fibre Festival Booth',desc:'Book a booth at the National Fibre Festival to represent the community and sell member goods.',impact:'Medium',votes:11,status:'approved',author:'Jake Turner',area:'Events',effort:'Medium'},
{id:9,title:'Children\'s Craft Corner',desc:'Set up a permanent children\'s craft area for weekend family sessions with safe, supervised activities.',impact:'High',votes:20,status:'approved',author:'Nina Chang',area:'Community',effort:'Large'},
{id:10,title:'Member Skill Swaps',desc:'Monthly skill-swap sessions where members teach each other a technique from their craft discipline.',impact:'Medium',votes:16,status:'approved',author:'Rosa Delgado',area:'Education',effort:'Small'},
{id:11,title:'Makers Hub Newsletter',desc:'Monthly email newsletter featuring member spotlights, upcoming workshops, and market updates.',impact:'Medium',votes:12,status:'approved',author:'Lucy Hartwell',area:'Community',effort:'Small'},
{id:12,title:'Craft Supply Co-op Purchasing',desc:'Bulk-buy programme for yarn, fabric, clay, and dyes to get wholesale pricing for members.',impact:'High',votes:19,status:'approved',author:'Ellen Morris',area:'Operations',effort:'Medium'},
{id:13,title:'Outdoor Weaving Loom Installation',desc:'Permanent outdoor tapestry loom in the courtyard for community collaborative works.',impact:'Low',votes:4,status:'archived',author:'Rosa Delgado',area:'Resources',effort:'Large'},
{id:14,title:'3D Printing for Craft Tools',desc:'Purchase a 3D printer to make custom knitting needles, loom parts, and clay stamps.',impact:'Low',votes:5,status:'archived',author:'Jake Turner',area:'Equipment',effort:'Medium'},
];
const renderOpp=(o)=>`<div class="card section-card" style="cursor:pointer" onclick="openViewOpportunity(${o.id})"><div class="card-body">
<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px"><h3 style="margin-bottom:0">${o.title}</h3><div><span class="badge badge-${o.status==='open'?'open':o.status==='review'?'pending':o.status==='approved'?'active':'closed'}">${o.status==='open'?'Open':o.status==='review'?'Under Review':o.status==='approved'?'Approved':'Archived'}</span></div></div>
<div style="font-size:12.5px;color:var(--text-muted);margin-bottom:8px">Submitted by ${o.author} ¬∑ Impact: <strong style="color:${o.impact==='High'?'var(--danger)':o.impact==='Medium'?'var(--warning)':'var(--text-muted)'}">${o.impact}</strong> ¬∑ Area: ${o.area} ¬∑ Effort: ${o.effort}</div>
<p style="font-size:13.5px;color:var(--text-secondary);line-height:1.6;margin-bottom:12px">${o.desc}</p>
<div class="vote-bar"><button class="vote-btn">${I('thumbsUp',14)} ${o.votes} Upvotes</button><button class="vote-btn">${I('msgCircle',14)} Discuss</button></div>
</div></div>`;
const open=opps.filter(o=>o.status==='open'),review=opps.filter(o=>o.status==='review'),approved=opps.filter(o=>o.status==='approved'),archived=opps.filter(o=>o.status==='archived');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('smile',22,'var(--brown-warm)')}</div><div><div class="page-title">Opportunities</div><div class="page-subtitle">Community improvements for consideration</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openSubmitOpportunity()">${I('plus',14,'#edd6b7')} Submit Opportunity</button></div></div>
<div class="stats-row"><div class="stat-card"><div class="stat-label">Open</div><div class="stat-value">${open.length}</div></div><div class="stat-card"><div class="stat-label">Under Review</div><div class="stat-value" style="color:var(--warning)">${review.length}</div></div><div class="stat-card"><div class="stat-label">Approved</div><div class="stat-value" style="color:var(--success)">${approved.length}</div></div><div class="stat-card"><div class="stat-label">Impact Score</div><div class="stat-value">87</div></div></div>
${tabsHTML(['Open ('+open.length+')','Under Review ('+review.length+')','Approved ('+approved.length+')','Archived ('+archived.length+')'],0,'oppTabs')}
${tp('oppTabs',0)}${open.map(renderOpp).join('')}${tpc}
${tp('oppTabs',1)}${review.map(renderOpp).join('')}${tpc}
${tp('oppTabs',2)}${approved.map(renderOpp).join('')}${tpc}
${tp('oppTabs',3)}${archived.map(renderOpp).join('')}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ PROJECTS ‚îÄ‚îÄ‚îÄ
pages.projects=()=>`
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('folder',22,'var(--brown-warm)')}</div><div><div class="page-title">Projects</div><div class="page-subtitle">Community projects with tasks</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openNewProject()">${I('plus',14,'#edd6b7')} New Project</button></div></div>
${[
{id:1,name:'Spring Quilting Retreat',progress:65,tasks:20,done:13,members:['LH','NC','EM'],color:'var(--success)',lead:'Lucy Hartwell',cat:'Workshop',desc:'Three-day quilting retreat featuring Sashiko guest instructor, fabric dyeing, and collaborative quilt assembly.'},
{id:2,name:'Community Quilt ‚Äî Hospital Donation',progress:40,tasks:16,done:6,members:['LH','NC','RD','EM'],color:'var(--warning)',lead:'Lucy Hartwell',cat:'Community',desc:'Collaborative quilt project with squares contributed by members, to be donated to Sydney Royal Hospital children\'s ward.'},
{id:3,name:'Ceramics Studio Upgrade',progress:85,tasks:12,done:10,members:['TP','EM'],color:'var(--success)',lead:'Tom Pearson',cat:'Infrastructure',desc:'Upgrade the ceramics studio with new shelving, kiln maintenance, replacement pottery wheels, and improved ventilation.'},
{id:4,name:'Beginner Weaving Course',progress:20,tasks:14,done:3,members:['RD','JT'],color:'var(--danger)',lead:'Rosa Delgado',cat:'Education',desc:'Six-week beginner weaving course covering rigid heddle basics, pattern reading, and project completion.'},
{id:5,name:'Makers Market April Setup',progress:55,tasks:18,done:10,members:['EM','LH','TP'],color:'var(--warning)',lead:'Ellen Morris',cat:'Events',desc:'Organise and set up the April makers market including stall allocation, signage, payment systems, and promotion.'},
].map(p=>`
<div class="card section-card" style="cursor:pointer" onclick="openViewProject(${p.id})"><div class="card-body">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <div><h3 style="margin-bottom:4px">${p.name}</h3><div style="font-size:12.5px;color:var(--text-muted)">${p.done} of ${p.tasks} tasks complete ¬∑ Lead: ${p.lead}</div></div>
    <div style="display:flex;align-items:center;gap:8px"><div style="display:flex">${p.members.map((m,i)=>`<div class="avatar" style="background:var(--brown-warm);width:28px;height:28px;font-size:10px;border-radius:7px;margin-left:${i>0?'-6':'0'}px;border:2px solid #fff">${m}</div>`).join('')}</div><span class="badge badge-active">${p.progress}%</span></div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:${p.progress}%;background:${p.color}"></div></div>
  <div style="margin-top:12px;display:flex;gap:6px"><span class="badge badge-info">${p.cat}</span></div>
</div></div>`).join('')}`;

// ‚îÄ‚îÄ‚îÄ DOCS ‚îÄ‚îÄ‚îÄ
pages.docs=()=>{
const docs=[
{id:1,name:'Makers Hub Constitution & Rules',cat:'Governance',author:'Ellen Morris',date:'Mar 1, 2026',size:'180 KB',desc:'Foundational document for the Makers Hub including membership rules, studio usage policies, and governance procedures.'},
{id:2,name:'Studio Safety Handbook',cat:'Governance',author:'Tom Pearson',date:'Feb 28, 2026',size:'420 KB',desc:'Comprehensive safety guide covering kiln operation, dye kitchen protocols, sharps handling, and first aid procedures.'},
{id:3,name:'Natural Dye Recipe Book',cat:'Technical',author:'Ellen Morris',date:'Feb 25, 2026',size:'1.8 MB',desc:'Collection of natural dye recipes with colour samples, mordant ratios, and fibre preparation instructions.'},
{id:4,name:'Loom Threading Guide',cat:'Technical',author:'Rosa Delgado',date:'Feb 20, 2026',size:'640 KB',desc:'Step-by-step threading diagrams for floor looms, rigid heddle looms, and inkle looms.'},
{id:5,name:'Workshop Proposal Template',cat:'Template',author:'Lucy Hartwell',date:'Feb 15, 2026',size:'38 KB',desc:'Standard template for proposing new workshops including materials list, skill level, timeline, and budget.'},
{id:6,name:'Makers Market Stall Agreement',cat:'Template',author:'Ellen Morris',date:'Feb 10, 2026',size:'28 KB',desc:'Agreement form for market stall holders covering fees, insurance, display standards, and setup times.'},
{id:7,name:'Beginner Knitting Patterns Pack',cat:'Technical',author:'Nina Chang',date:'Feb 5, 2026',size:'2.4 MB',desc:'Collection of 12 beginner-friendly knitting patterns with charts, written instructions, and technique notes.'},
{id:8,name:'AGM Minutes 2025',cat:'Governance',author:'Ellen Morris',date:'Jan 28, 2026',size:'95 KB',desc:'Minutes from the 2025 Annual General Meeting including committee elections, budget approval, and 2026 priorities.'},
{id:9,name:'Event Planning Checklist',cat:'Template',author:'Lucy Hartwell',date:'Jan 20, 2026',size:'22 KB',desc:'Reusable checklist template for planning community events, retreats, and exhibitions.'},
];
const renderTable=(list)=>`<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Document</th><th>Category</th><th>Author</th><th>Modified</th><th>Size</th></tr></thead><tbody>
${list.map(d=>`<tr style="cursor:pointer" onclick="openViewDoc(${d.id})"><td><div style="display:flex;align-items:center;gap:10px">${I('file',18,'var(--brown-warm)')}<span style="font-weight:500">${d.name}</span></div></td><td><span class="badge badge-info">${d.cat}</span></td><td>${d.author}</td><td>${d.date}</td><td>${d.size}</td></tr>`).join('')}
</tbody></table></div></div>`;
const gov=docs.filter(d=>d.cat==='Governance'),tech=docs.filter(d=>d.cat==='Technical'),tmpl=docs.filter(d=>d.cat==='Template');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('docs',22,'var(--brown-warm)')}</div><div><div class="page-title">Docs</div><div class="page-subtitle">Share community documents</div></div></div><div class="header-actions"><div class="search-box">${I('search',16,'#a89888')}<input placeholder="Search documents‚Ä¶"></div><button class="btn btn-primary" onclick="openUploadDoc()">${I('upload',14,'#edd6b7')} Upload</button></div></div>
${tabsHTML(['All ('+docs.length+')','Governance ('+gov.length+')','Technical ('+tech.length+')','Templates ('+tmpl.length+')'],0,'docTabs')}
${tp('docTabs',0)}${renderTable(docs)}${tpc}
${tp('docTabs',1)}${renderTable(gov)}${tpc}
${tp('docTabs',2)}${renderTable(tech)}${tpc}
${tp('docTabs',3)}${renderTable(tmpl)}${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ TOKENS ‚îÄ‚îÄ‚îÄ
pages.tokens=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon">${I('token',22,'var(--brown-warm)')}</div>
    <div><div class="page-title">Tokens</div><div class="page-subtitle">Community participation tokens</div></div>
  </div>
</div>
<div class="token-hero" id="tokenHero">
  <div style="font-size:13px;opacity:0.6;margin-bottom:4px">Your Balance</div>
  <div class="token-balance" id="tokenVal">0</div>
  <div class="token-label">TANA Tokens</div>
  <div class="token-actions">
    <button class="token-btn" onclick="openTokenHistory()">Transaction History</button>
    <button class="token-btn" onclick="openTokenRedeem()">Redeem</button>
  </div>
</div>
<div class="stats-row">
  <div class="stat-card"><div class="stat-label">Earned This Month</div><div class="stat-value" style="color:var(--success)">+142</div></div>
  <div class="stat-card"><div class="stat-label">Governance Votes</div><div class="stat-value">48</div></div>
  <div class="stat-card"><div class="stat-label">Community Rank</div><div class="stat-value">#7</div></div>
  <div class="stat-card"><div class="stat-label">Streak</div><div class="stat-value">14d</div></div>
</div>
<div class="card section-card"><div class="card-body">
<h3>Recent Activity</h3>
${[
{action:'Voted on DEC-024',tokens:'+15',time:'2 hours ago',type:'up'},
{action:'Completed PR review',tokens:'+25',time:'Yesterday',type:'up'},
{action:'Submitted opportunity',tokens:'+10',time:'2 days ago',type:'up'},
{action:'Attended governance meeting',tokens:'+20',time:'3 days ago',type:'up'},
{action:'Redeemed for community credits',tokens:'-50',time:'1 week ago',type:'down'},
].map(a=>`
<div class="list-item">
  <div class="list-item-icon" style="background:${a.type==='up'?'rgba(107,138,94,0.1)':'rgba(192,96,74,0.1)'}">${I(a.type==='up'?'plus':'download',18,a.type==='up'?'var(--success)':'var(--danger)')}</div>
  <div class="list-item-content"><div class="list-item-title">${a.action}</div><div class="list-item-sub">${a.time}</div></div>
  <div style="font-size:14px;font-weight:600;color:${a.type==='up'?'var(--success)':'var(--danger)'}">${a.tokens}</div>
</div>`).join('')}
</div></div>`;

// ‚îÄ‚îÄ‚îÄ OPERATIONS ‚îÄ‚îÄ‚îÄ
pages.operations=()=>`
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('pie',22,'var(--brown-warm)')}</div><div><div class="page-title">Operations</div><div class="page-subtitle">Community resources, products & orders</div></div></div><div class="header-actions"><button class="btn btn-primary" onclick="openAddResource()">${I('plus',14,'#edd6b7')} Add Resource</button></div></div>
<div class="stats-row"><div class="stat-card"><div class="stat-label">Active Resources</div><div class="stat-value">18</div></div><div class="stat-card"><div class="stat-label">Products</div><div class="stat-value">6</div></div><div class="stat-card"><div class="stat-label">Pending Orders</div><div class="stat-value" style="color:var(--warning)">3</div></div><div class="stat-card"><div class="stat-label">Utilisation</div><div class="stat-value">78%</div></div></div>
${tabsHTML(['Resources (5)','Products (6)','Orders (3)'],0,'opsTabs')}
${tp('opsTabs',0)}
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Resource</th><th>Type</th><th>Status</th><th>Allocation</th><th>Utilisation</th></tr></thead><tbody>
${[
{name:'Community Kiln (gas)',type:'Equipment',status:'active',alloc:'Ceramics Studio',util:88},
{name:'4√ó Juki Industrial Sewing Machines',type:'Equipment',status:'active',alloc:'Textile Studio',util:72},
{name:'Floor Loom (8-shaft)',type:'Equipment',status:'active',alloc:'Weaving Room',util:60},
{name:'Dye Kitchen & Ventilation',type:'Facility',status:'active',alloc:'Natural Dye Lab',util:45},
{name:'Pottery Wheels (√ó6)',type:'Equipment',status:'maintenance',alloc:'Ceramics Studio',util:0},
].map(r=>`<tr><td style="font-weight:500">${r.name}</td><td><span class="badge badge-info">${r.type}</span></td><td><span class="badge badge-${r.status==='active'?'open':'pending'}">${r.status==='active'?'Active':'Maintenance'}</span></td><td>${r.alloc}</td><td><div style="display:flex;align-items:center;gap:8px"><div class="progress-bar" style="width:80px"><div class="progress-fill" style="width:${r.util}%;background:${r.util>80?'var(--danger)':r.util>50?'var(--warning)':'var(--success)'}"></div></div><span style="font-size:12px;color:var(--text-muted)">${r.util}%</span></div></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}
${tp('opsTabs',1)}
<div style="display:flex;justify-content:flex-end;margin-bottom:12px"><button class="btn btn-primary btn-sm" onclick="openAddProduct()">${I('plus',14,'#edd6b7')} Add Product</button></div>
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Product</th><th>Category</th><th>Variant</th><th>Sold</th><th>Status</th></tr></thead><tbody>
${[
{id:1,name:'Hand-dyed Merino Skein (100g)',type:'Yarn',ver:'Indigo',users:48,status:'active'},
{id:2,name:'Ceramic Mug ‚Äî Speckled Glaze',type:'Ceramics',ver:'Stoneware',users:32,status:'active'},
{id:3,name:'Woven Table Runner',type:'Textiles',ver:'Cotton/Linen',users:14,status:'active'},
{id:4,name:'Beginner Knitting Kit',type:'Kit',ver:'v2',users:65,status:'active'},
{id:5,name:'Natural Dye Sampler Pack',type:'Supplies',ver:'5 colours',users:28,status:'active'},
{id:6,name:'Handspun Art Yarn (50g)',type:'Yarn',ver:'Mixed fibre',users:0,status:'beta'},
].map(p=>`<tr style="cursor:pointer" onclick="openViewProduct(${p.id})"><td style="font-weight:500">${p.name}</td><td><span class="badge badge-info">${p.type}</span></td><td><code style="font-size:12px;background:var(--accent-light);padding:2px 8px;border-radius:4px">${p.ver}</code></td><td>${p.users.toLocaleString()}</td><td><span class="badge badge-${p.status==='active'?'open':'pending'}">${p.status==='active'?'Active':'Beta'}</span></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}
${tp('opsTabs',2)}
<div style="display:flex;justify-content:flex-end;margin-bottom:12px"><button class="btn btn-primary btn-sm" onclick="openAddOrder()">${I('plus',14,'#edd6b7')} Add Order</button></div>
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Order</th><th>Requestor</th><th>Type</th><th>Date</th><th>Status</th></tr></thead><tbody>
${[
{id:'ORD-042',req:'Lucy Hartwell',type:'Fabric ‚Äî Quilting Cotton (20m)',date:'Mar 1, 2026',status:'pending'},
{id:'ORD-041',req:'Tom Pearson',type:'Stoneware Clay (100kg)',date:'Feb 28, 2026',status:'pending'},
{id:'ORD-040',req:'Ellen Morris',type:'Acid Dye Refill Kit',date:'Feb 25, 2026',status:'pending'},
{id:'ORD-039',req:'Rosa Delgado',type:'Heddle Reeds (10dpi, 12dpi)',date:'Feb 20, 2026',status:'complete'},
{id:'ORD-038',req:'Nina Chang',type:'DMC Embroidery Floss (bulk)',date:'Feb 15, 2026',status:'complete'},
].map(o=>`<tr style="cursor:pointer" onclick="openViewOrder('${o.id}')"><td style="font-weight:500">${o.id}</td><td>${o.req}</td><td>${o.type}</td><td>${o.date}</td><td><span class="badge badge-${o.status==='pending'?'pending':'active'}">${o.status==='pending'?'Pending':'Complete'}</span></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}`;

// ‚îÄ‚îÄ‚îÄ FINANCIALS ‚îÄ‚îÄ‚îÄ
pages.financials=()=>{
const txns=[
{id:1,desc:'Kiln gas & maintenance',amount:'-$340',raw:-340,type:'expense',cat:'Equipment',date:'Mar 1, 2026',method:'Bank Transfer'},
{id:2,desc:'Makers Market stall fees',amount:'+$1,800',raw:1800,type:'income',cat:'Market Income',date:'Feb 28, 2026',method:'Bank Transfer'},
{id:3,desc:'Fabric & thread supplies',amount:'-$580',raw:-580,type:'expense',cat:'Materials',date:'Feb 25, 2026',method:'Credit Card'},
{id:4,desc:'Workshop fees ‚Äî February',amount:'+$2,400',raw:2400,type:'income',cat:'Workshop Fees',date:'Feb 20, 2026',method:'Bank Transfer'},
{id:5,desc:'Studio rent',amount:'-$1,200',raw:-1200,type:'expense',cat:'Rent',date:'Feb 18, 2026',method:'Bank Transfer'},
{id:6,desc:'Membership subscriptions',amount:'+$960',raw:960,type:'income',cat:'Memberships',date:'Feb 15, 2026',method:'Bank Transfer'},
{id:7,desc:'Clay & glazes bulk order',amount:'-$450',raw:-450,type:'expense',cat:'Materials',date:'Feb 12, 2026',method:'Credit Card'},
{id:8,desc:'Guest instructor sponsorship',amount:'+$500',raw:500,type:'income',cat:'Sponsorship',date:'Feb 10, 2026',method:'Bank Transfer'},
{id:9,desc:'Insurance premium',amount:'-$380',raw:-380,type:'expense',cat:'Insurance',date:'Feb 8, 2026',method:'Bank Transfer'},
];
const chain=[
{hash:'GR-2026-001',type:'Arts Council Grant',amount:'$5,000',block:'Approved',date:'Mar 1',status:'confirmed'},
{hash:'DN-2026-004',type:'Local Business Sponsorship',amount:'$750',block:'Received',date:'Feb 28',status:'confirmed'},
{hash:'GR-2025-012',type:'Community Foundation Grant',amount:'$3,200',block:'Approved',date:'Feb 25',status:'confirmed'},
{hash:'DN-2026-003',type:'Anonymous Donation',amount:'$200',block:'Received',date:'Feb 20',status:'confirmed'},
{hash:'GR-2025-011',type:'Heritage Crafts Fund',amount:'$1,500',block:'Approved',date:'Feb 15',status:'confirmed'},
];
const renderTxTable=(list)=>`<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Description</th><th>Category</th><th>Date</th><th>Method</th><th style="text-align:right">Amount</th></tr></thead><tbody>
${list.map(t=>`<tr style="cursor:pointer" onclick="openViewTransaction(${t.id})"><td style="font-weight:500">${t.desc}</td><td><span class="badge badge-info">${t.cat}</span></td><td>${t.date}</td><td>${t.method}</td><td style="text-align:right;font-weight:600;color:${t.raw>0?'var(--success)':'var(--danger)'}">${t.amount}</td></tr>`).join('')}
</tbody></table></div></div>`;
const expenses=txns.filter(t=>t.type==='expense'),income=txns.filter(t=>t.type==='income');
return `<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('dollar',22,'var(--brown-warm)')}</div><div><div class="page-title">Financials</div><div class="page-subtitle">Expenses, income, reporting & grants</div></div></div><div class="header-actions"><button class="btn" onclick="openExportReport('financials')">${I('download',14)} Export</button><button class="btn btn-primary" onclick="openAddTransaction()">${I('plus',14,'#edd6b7')} Add Transaction</button></div></div>
<div class="stats-row"><div class="stat-card"><div class="stat-label">Total Balance</div><div class="stat-value">$12,450</div><div class="stat-change up">‚Üë 8% from last month</div></div><div class="stat-card"><div class="stat-label">Monthly Income</div><div class="stat-value" style="color:var(--success)">$5,660</div></div><div class="stat-card"><div class="stat-label">Monthly Expenses</div><div class="stat-value" style="color:var(--danger)">$2,950</div></div><div class="stat-card"><div class="stat-label">Grants Received</div><div class="stat-value">$10,650</div></div></div>
${tabsHTML(['Overview','Expenses ('+expenses.length+')','Income ('+income.length+')','Grants & Donations ('+chain.length+')'],0,'finTabs')}
${tp('finTabs',0)}
<div class="two-col"><div class="card section-card"><div class="card-body"><h3>Monthly Overview</h3><div class="chart-placeholder"><div class="chart-bars" id="chartBars">${['Jan','Feb','Mar','Apr','May','Jun'].map((m,i)=>`<div style="text-align:center;flex:1"><div class="chart-bar" data-h="${[60,75,55,80,70,90][i]}" style="height:0;background:${i<5?'var(--brown-warm)':'var(--brown-deep)'};width:100%;margin:0 auto"></div><div style="font-size:10px;color:var(--text-muted);margin-top:6px">${m}</div></div>`).join('')}</div></div></div></div>
<div class="card section-card"><div class="card-body"><h3>Recent Transactions</h3>
${txns.slice(0,5).map(t=>`<div class="list-item" style="cursor:pointer" onclick="openViewTransaction(${t.id})"><div class="list-item-icon" style="background:${t.type==='income'?'rgba(107,138,94,0.1)':'rgba(192,96,74,0.1)'}">${I(t.type==='income'?'plus':'download',18,t.type==='income'?'var(--success)':'var(--danger)')}</div><div class="list-item-content"><div class="list-item-title">${t.desc}</div><div class="list-item-sub">${t.date}</div></div><div style="font-size:14px;font-weight:600;color:${t.type==='income'?'var(--success)':'var(--danger)'}">${t.amount}</div></div>`).join('')}
</div></div></div>
${tpc}
${tp('finTabs',1)}${renderTxTable(expenses)}${tpc}
${tp('finTabs',2)}${renderTxTable(income)}${tpc}
${tp('finTabs',3)}
<div class="card"><div class="card-body" style="padding:0"><div style="overflow-x:auto"><table class="data-table"><thead><tr><th>Reference</th><th>Type</th><th>Amount</th><th>Status</th><th>Date</th><th></th></tr></thead><tbody>
${chain.map(tx=>`<tr><td><span style="font-family:monospace;font-size:12px">${tx.hash}</span></td><td>${tx.type}</td><td style="font-weight:500">${tx.amount}</td><td>${tx.block}</td><td>${tx.date}</td><td><span class="badge badge-open">Received</span></td></tr>`).join('')}
</tbody></table></div></div></div>
${tpc}`;
};

// ‚îÄ‚îÄ‚îÄ REPORTS ‚îÄ‚îÄ‚îÄ
pages.reports=()=>`
<div class="page-header"><div class="page-header-left"><div class="page-icon">${I('search',22,'var(--brown-warm)')}</div><div><div class="page-title">Reports</div><div class="page-subtitle">AI-powered community insights</div></div></div><div class="header-actions"><button class="btn" onclick="openExportReport('reports')">${I('download',14)} Export Report</button></div></div>
${tabsHTML(['AI Chat','Generated Reports (4)','Metrics'],0,'rptTabs')}
${tp('rptTabs',0)}
<div class="chat-container" id="chatContainer"><div class="chat-messages" id="chatMessages"><div class="chat-bubble ai"><div class="ai-label">TANA AI</div>Hello! I can help you explore community data and generate reports. Try asking me about membership trends, governance participation, token distribution, or project progress.</div></div><div class="chat-input-bar"><input class="chat-input" id="chatInput" placeholder="Ask about community data‚Ä¶" onkeydown="if(event.key==='Enter')sendChat()"><button class="chat-send" onclick="sendChat()">${I('send',18,'#edd6b7')}</button></div></div>
${tpc}
${tp('rptTabs',1)}
<div class="card"><div class="card-body" style="padding:0"><table class="data-table"><thead><tr><th>Report</th><th>Type</th><th>Generated</th><th>Period</th><th>Action</th></tr></thead><tbody>
${[
{name:'Q1 2026 Community Summary',type:'Quarterly',date:'Mar 1, 2026',period:'Jan‚ÄìMar 2026'},
{name:'February Governance Report',type:'Monthly',date:'Feb 28, 2026',period:'Feb 2026'},
{name:'Token Distribution Analysis',type:'Ad-hoc',date:'Feb 20, 2026',period:'All time'},
{name:'Member Engagement Scorecard',type:'Monthly',date:'Feb 15, 2026',period:'Feb 2026'},
].map(r=>`<tr><td style="font-weight:500"><div style="display:flex;align-items:center;gap:10px">${I('file',18,'var(--brown-warm)')}<span>${r.name}</span></div></td><td><span class="badge badge-info">${r.type}</span></td><td>${r.date}</td><td>${r.period}</td><td><button class="btn btn-sm">${I('download',12)} Download</button></td></tr>`).join('')}
</tbody></table></div></div>
${tpc}
${tp('rptTabs',2)}
<div class="stats-row"><div class="stat-card"><div class="stat-label">Active Members</div><div class="stat-value">24</div><div class="stat-change up">‚Üë 3 from last month</div></div><div class="stat-card"><div class="stat-label">Workshop Attendance</div><div class="stat-value">82%</div><div class="stat-change up">‚Üë 12%</div></div><div class="stat-card"><div class="stat-label">Avg. Response Time</div><div class="stat-value">4.2h</div><div class="stat-change down">‚Üì 18%</div></div><div class="stat-card"><div class="stat-label">Project Completion</div><div class="stat-value">76%</div></div></div>
<div class="two-col">
<div class="card section-card"><div class="card-body"><h3>Participation by Area</h3>
${[{name:'Textiles & Quilting',pct:85,color:'var(--success)'},{name:'Ceramics',pct:68,color:'var(--info)'},{name:'Weaving & Fibre',pct:52,color:'var(--brown-warm)'},{name:'Natural Dyeing',pct:42,color:'var(--warning)'},{name:'Makers Market',pct:75,color:'var(--olive)'}].map(a=>`<div style="margin-bottom:12px"><div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:4px"><span>${a.name}</span><span style="font-weight:600">${a.pct}%</span></div><div class="progress-bar"><div class="progress-fill" style="width:${a.pct}%;background:${a.color}"></div></div></div>`).join('')}
</div></div>
<div class="card section-card"><div class="card-body"><h3>Monthly Activity Trend</h3>
${[{month:'Mar 2026',votes:48,posts:23,tasks:67},{month:'Feb 2026',votes:42,posts:31,tasks:54},{month:'Jan 2026',votes:38,posts:19,tasks:45},{month:'Dec 2025',votes:35,posts:27,tasks:52}].map(m=>`<div class="list-item"><div class="list-item-content"><div class="list-item-title">${m.month}</div><div class="list-item-sub">${m.votes} votes ¬∑ ${m.posts} posts ¬∑ ${m.tasks} tasks completed</div></div></div>`).join('')}
</div></div>
</div>
${tpc}`;

// ‚îÄ‚îÄ‚îÄ SETTINGS ‚îÄ‚îÄ‚îÄ
pages.settings=()=>`
<div class="page-header">
  <div class="page-header-left">
    <div class="page-icon">${I('settings',22,'var(--brown-warm)')}</div>
    <div><div class="page-title">Settings</div><div class="page-subtitle">Account & security</div></div>
  </div>
</div>
${tabsHTML(['Profile','Security','Notifications','Privacy'])}

<div class="two-col">
<div>
  <div class="card section-card"><div class="card-body">
    <h3>${I('shield',16,'var(--brown-warm)')} Authentication</h3>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Multi-Factor Authentication (MFA)</div><div class="toggle-desc">Require a second factor when signing in</div></div>
      <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
    </div>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Passkey Authentication</div><div class="toggle-desc">Use biometric or device-based passkeys for passwordless login</div></div>
      <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
    </div>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Social Login</div><div class="toggle-desc">Allow sign-in with Google or Facebook account</div></div>
      <button class="toggle-switch" onclick="this.classList.toggle('on')"></button>
    </div>
    <div class="toggle-row">
      <div class="toggle-info"><div class="toggle-title">Session Timeout</div><div class="toggle-desc">Automatically log out after 30 minutes of inactivity</div></div>
      <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
    </div>
  </div></div>

  <div class="card section-card"><div class="card-body">
    <h3>${I('key',16,'var(--brown-warm)')} Registered Passkeys</h3>
    <div class="security-item">
      <div class="security-item-icon">${I('fingerprint',20,'var(--brown-warm)')}</div>
      <div class="security-item-info"><div class="security-item-name">MacBook Pro Touch ID</div><div class="security-item-date">Added Feb 15, 2026</div></div>
      <button class="btn btn-sm btn-ghost" style="color:var(--danger)">Remove</button>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('smartphone',20,'var(--brown-warm)')}</div>
      <div class="security-item-info"><div class="security-item-name">iPhone Face ID</div><div class="security-item-date">Added Jan 8, 2026</div></div>
      <button class="btn btn-sm btn-ghost" style="color:var(--danger)">Remove</button>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('key',20,'var(--brown-warm)')}</div>
      <div class="security-item-info"><div class="security-item-name">YubiKey 5C</div><div class="security-item-date">Added Dec 20, 2025</div></div>
      <button class="btn btn-sm btn-ghost" style="color:var(--danger)">Remove</button>
    </div>
    <button class="btn" style="margin-top:12px;width:100%;justify-content:center" onclick="openRegisterPasskey()">${I('plus',14)} Register New Passkey</button>
  </div></div>
</div>

<div>
  <div class="card section-card"><div class="card-body">
    <h3>${I('lock',16,'var(--brown-warm)')} MFA Methods</h3>
    <div class="security-item">
      <div class="security-item-icon">${I('smartphone',20,'var(--success)')}</div>
      <div class="security-item-info"><div class="security-item-name">Authenticator App</div><div class="security-item-date">Primary ¬∑ Configured</div></div>
      <span class="badge badge-open">Active</span>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('smartphone',20,'var(--text-muted)')}</div>
      <div class="security-item-info"><div class="security-item-name">SMS Backup</div><div class="security-item-date">+61 ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢42</div></div>
      <span class="badge badge-info">Backup</span>
    </div>
    <div class="security-item">
      <div class="security-item-icon">${I('key',20,'var(--text-muted)')}</div>
      <div class="security-item-info"><div class="security-item-name">Recovery Codes</div><div class="security-item-date">6 of 10 remaining</div></div>
      <button class="btn btn-sm" onclick="openRegenerateCodes()">Regenerate</button>
    </div>
  </div></div>

  <div class="card section-card"><div class="card-body">
    <h3>${I('globe',16,'var(--brown-warm)')} Active Sessions</h3>
    ${[
      {device:'Chrome on macOS',loc:'Sydney, AU',time:'Current session',current:true},
      {device:'Safari on iPhone',loc:'Sydney, AU',time:'2 hours ago',current:false},
      {device:'Firefox on Ubuntu',loc:'Singapore',time:'3 days ago',current:false},
    ].map(s=>`
    <div class="list-item">
      <div class="list-item-icon" style="background:${s.current?'rgba(107,138,94,0.1)':'var(--cream-light)'}">${I('globe',18,s.current?'var(--success)':'var(--text-muted)')}</div>
      <div class="list-item-content"><div class="list-item-title">${s.device} ${s.current?'<span class="badge badge-open" style="margin-left:6px">Current</span>':''}</div><div class="list-item-sub">${s.loc} ¬∑ ${s.time}</div></div>
      ${!s.current?'<button class="btn btn-sm btn-ghost" style="color:var(--danger)">Revoke</button>':''}
    </div>`).join('')}
    <button class="btn" style="margin-top:12px;width:100%;justify-content:center;color:var(--danger);border-color:rgba(192,96,74,0.3)">Revoke All Other Sessions</button>
  </div></div>

  <div class="card section-card"><div class="card-body">
    <h3>${I('shield',16,'var(--brown-warm)')} Password</h3>
    <div class="form-group"><label class="form-label">Current Password</label><input type="password" class="form-input" placeholder="Enter current password"></div>
    <div class="form-group"><label class="form-label">New Password</label><input type="password" class="form-input" placeholder="Enter new password"></div>
    <div class="form-group"><label class="form-label">Confirm Password</label><input type="password" class="form-input" placeholder="Confirm new password"></div>
    <button class="btn btn-primary" style="width:100%;justify-content:center">Update Password</button>
  </div></div>
</div>
</div>`;

// ‚îÄ‚îÄ‚îÄ CHAT FUNCTIONALITY ‚îÄ‚îÄ‚îÄ
function initChat(){
  const input=document.getElementById('chatInput');
  if(input)input.focus();
}
function sendChat(){
  const input=document.getElementById('chatInput');
  const msgs=document.getElementById('chatMessages');
  const val=input.value.trim();
  if(!val)return;
  msgs.innerHTML+=`<div class="chat-bubble user">${val}</div>`;
  input.value='';
  msgs.scrollTop=msgs.scrollHeight;
  setTimeout(()=>{
    const responses={
      'default':'Based on the community data, workshop attendance is up 18% this quarter with 24 active members. The most popular areas are textile arts (42% of bookings), ceramics (28%), and natural dyeing (18%). The makers market generated $1,800 last month. Would you like me to generate a detailed report on any specific area?',
    };
    msgs.innerHTML+=`<div class="chat-bubble ai"><div class="ai-label">TANA AI</div>${responses.default}</div>`;
    msgs.scrollTop=msgs.scrollHeight;
  },1200);
}

// ‚îÄ‚îÄ‚îÄ ANIMATE CHART BARS ‚îÄ‚îÄ‚îÄ
function animateBars(){
  setTimeout(()=>{
    document.querySelectorAll('.chart-bar').forEach((b,i)=>{
      setTimeout(()=>{ b.style.height=b.dataset.h+'%'; },i*100);
    });
  },300);
}

// ‚îÄ‚îÄ‚îÄ ANIMATE TOKEN COUNT ‚îÄ‚îÄ‚îÄ
function animateTokens(){
  const el=document.getElementById('tokenVal');
  if(!el)return;
  let v=0;const target=1247;
  const step=()=>{
    v+=Math.ceil((target-v)/8);
    if(v>=target){el.textContent=target.toLocaleString();return;}
    el.textContent=v.toLocaleString();
    requestAnimationFrame(step);
  };
  setTimeout(step,400);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODAL SYSTEM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openModal(content,wide){
  const overlay=document.getElementById('modalOverlay');
  const panel=document.getElementById('modalPanel');
  panel.className='modal-panel'+(wide?' wide':'');
  panel.innerHTML=content;
  requestAnimationFrame(()=>overlay.classList.add('open'));
  document.addEventListener('keydown',escHandler);
}
function closeModal(){
  document.getElementById('modalOverlay').classList.remove('open');
  document.removeEventListener('keydown',escHandler);
}
function escHandler(e){if(e.key==='Escape')closeModal();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NEW PROPOSAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openNewProposal(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('git',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">New Proposal</div><div class="modal-subtitle">Submit a governance proposal for community vote</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Proposal Details</div>
      <div class="form-group">
        <label class="form-label">Proposal Title <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="e.g., Add Saturday ceramics workshop" id="propTitle" oninput="document.getElementById('propTitleCount').textContent=this.value.length+'/120'">
        <div class="char-count" id="propTitleCount">0/120</div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
          <select class="form-select">
            <option value="">Select category‚Ä¶</option>
            <option>Workshops</option>
            <option>Equipment</option>
            <option>Treasury</option>
            <option>Policy</option>
            <option>Community</option>
            <option>Events</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Priority</label>
          <select class="form-select">
            <option>Normal</option>
            <option>High</option>
            <option>Critical</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Summary <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Brief summary of the proposal (displayed in list view)‚Ä¶" style="min-height:70px"></textarea>
        <div class="form-hint">Keep it concise ‚Äî 1-2 sentences that capture the essence</div>
      </div>
      <div class="form-group">
        <label class="form-label">Full Description <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Detailed proposal description. Include background context, rationale, specific changes proposed, and expected outcomes‚Ä¶" style="min-height:160px"></textarea>
        <div class="form-hint">Supports markdown formatting</div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('users',15,'var(--brown-warm)')} Voting Configuration</div>
      <div class="form-row three">
        <div class="form-group">
          <label class="form-label">Voting Period</label>
          <select class="form-select">
            <option>7 days</option>
            <option>14 days</option>
            <option>21 days</option>
            <option>30 days</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Quorum Required</label>
          <select class="form-select">
            <option>Simple Majority (50%+1)</option>
            <option>Two-Thirds (66%)</option>
            <option>Three-Quarters (75%)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Eligible Voters</label>
          <select class="form-select">
            <option>All Members</option>
            <option>Committee Members Only</option>
            <option>Studio Pass Holders</option>
          </select>
        </div>
      </div>
      <div class="form-checkbox-row">
        <button class="form-checkbox checked" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
        <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Allow abstain votes</span>
      </div>
      <div class="form-checkbox-row">
        <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
        <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Anonymous voting (hide voter identity until closed)</span>
      </div>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Attachments & References</div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <span class="form-tag">governance <button onclick="this.parentElement.remove()">√ó</button></span>
          <span class="form-tag">workshop <button onclick="this.parentElement.remove()">√ó</button></span>
          <input placeholder="Add tag‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Supporting Documents</label>
        <div style="border:2px dashed var(--card-border);border-radius:12px;padding:28px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
          <div style="margin-bottom:6px">${I('upload',24,'var(--text-muted)')}</div>
          <div style="font-size:13.5px;color:var(--text-secondary)">Drag files here or <span style="color:var(--brown-warm);font-weight:500">browse</span></div>
          <div style="font-size:11.5px;color:var(--text-muted);margin-top:4px">PDF, DOCX, or images up to 10MB</div>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Related Proposals or Links</label>
        <input class="form-input" placeholder="Paste URL or search for related proposals‚Ä¶">
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save as Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('decisions')">Submit Proposal</button>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW PROPOSAL DETAIL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewProposal(id){
  const proposals={
    'DEC-012':{
      title:'Add Saturday Ceramics Workshop',
      status:'Active', category:'Workshops',
      author:'Tom Pearson', authorAvatar:'TP', authorColor:'var(--info)',
      created:'Mar 1, 2026', closes:'Mar 15, 2026',
      summary:'Proposal to add a weekly Saturday morning ceramics session from 9am‚Äì12pm using the community kiln and wheel studio.',
      description:'This proposal introduces a new weekly Saturday morning ceramics session to meet growing demand for studio time.\n\nSchedule ‚Äî Every Saturday 9am‚Äì12pm, with the first hour as open studio and the remaining two hours as a guided project session.\n\nFacilities ‚Äî The session will use the existing ceramics studio including 6 pottery wheels, the community kiln, and hand-building tables. A volunteer studio monitor will supervise each session.\n\nCosts ‚Äî Estimated $120/month for additional clay, glazes, and kiln gas. Covered by participant fees of $15/session or included in premium membership.\n\nThe trial period will run for 8 weeks with a review at the end to decide on permanent scheduling.',
      votesFor:14, votesAgainst:2, votesAbstain:3, totalMembers:24,
      voted:true, votedChoice:'For',
      tags:['ceramics','workshop','Saturday','studio'],
    },
    'DEC-011':{
      title:'Spring Retreat Budget Allocation',
      status:'Active', category:'Treasury',
      author:'Ellen Morris', authorAvatar:'EM', authorColor:'var(--brown-deep)',
      created:'Feb 28, 2026', closes:'Mar 12, 2026',
      summary:'Allocate $2,400 from community funds towards the Spring Quilting Retreat ‚Äî covering venue, guest instructor fees, and fabric supplies.',
      description:'This proposal allocates funds for the Spring Quilting Retreat (April 12‚Äì14):\n\nVenue Hire ($800) ‚Äî Three-day hire of the Blue Mountains Community Centre with accommodation for 20 participants.\n\nGuest Instructor ($900) ‚Äî Maya Patel, specialist in Sashiko and Japanese textile techniques, for two full-day workshops.\n\nMaterials & Supplies ($500) ‚Äî Quilting cotton, batting, threads, hand-dyeing supplies for participant kits.\n\nCatering ($200) ‚Äî Morning tea and lunch provisions for all three days.\n\nParticipant fees of $80 each (20 spots) will recoup $1,600, making the net cost to the community $800.',
      votesFor:8, votesAgainst:1, votesAbstain:2, totalMembers:24,
      voted:false, votedChoice:null,
      tags:['retreat','quilting','budget','spring'],
    },
    'DEC-010':{
      title:'Adopt Shared Tool Library Policy',
      status:'Active', category:'Policy',
      author:'Rosa Delgado', authorAvatar:'RD', authorColor:'var(--brown-warm)',
      created:'Feb 20, 2026', closes:'Mar 5, 2026',
      summary:'Establish a shared tool lending library where members can borrow speciality equipment for up to 7 days.',
      description:'This proposal creates a tool lending library for community members:\n\nEligible Items ‚Äî Speciality tools including rigid heddle looms, drum carders, ball winders, rotary cutters, embossing heat tools, and pottery trimming tools.\n\nBorrowing Rules ‚Äî Members may borrow up to 2 items for 7 days. A $20 refundable deposit is required per item. Late returns incur a $5/day fee.\n\nInventory Management ‚Äî Ellen Morris will maintain a spreadsheet tracking all items. Members book via the community noticeboard or message the committee.\n\nDamage Policy ‚Äî Members are responsible for repair or replacement costs if tools are returned damaged beyond normal wear.\n\nInitial investment of $300 for labels, storage bins, and a tool cabinet. Ongoing costs are minimal.',
      votesFor:5, votesAgainst:1, votesAbstain:1, totalMembers:24,
      voted:false, votedChoice:null,
      tags:['tools','policy','lending','equipment'],
    },
  };
  const p=proposals[id]||proposals['DEC-012'];
  const totalVotes=p.votesFor+p.votesAgainst+p.votesAbstain;
  const pctFor=totalVotes>0?Math.round(p.votesFor/totalVotes*100):0;
  const pctAgainst=totalVotes>0?Math.round(p.votesAgainst/totalVotes*100):0;
  const descParagraphs=p.description.split('\\n\\n').filter(Boolean).map(para=>`<p style="margin-bottom:12px">${para}</p>`).join('');

  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <span class="badge badge-${p.status==='Active'?'open':'pending'}">${p.status}</span>
      <span class="badge badge-info">${p.category}</span>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="detail-header">
      <div style="flex:1">
        <div style="font-size:12px;color:var(--text-muted);margin-bottom:4px;font-weight:600;letter-spacing:0.05em">${id}</div>
        <div class="detail-title">${p.title}</div>
        <div class="detail-meta">
          <span class="detail-meta-item"><div class="avatar" style="background:${p.authorColor};width:22px;height:22px;font-size:9px;border-radius:6px">${p.authorAvatar}</div> ${p.author}</span>
          <span class="detail-meta-item">${I('token',13,'#a89888')} Created ${p.created}</span>
          <span class="detail-meta-item">${I('token',13,'#a89888')} Closes ${p.closes}</span>
        </div>
      </div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Voting Results</div>
      <div class="vote-results">
        <div class="vote-result-card">
          <div class="vote-result-value" style="color:var(--success)">${p.votesFor}</div>
          <div class="vote-result-label">For (${pctFor}%)</div>
        </div>
        <div class="vote-result-card">
          <div class="vote-result-value" style="color:var(--danger)">${p.votesAgainst}</div>
          <div class="vote-result-label">Against (${pctAgainst}%)</div>
        </div>
        <div class="vote-result-card">
          <div class="vote-result-value" style="color:var(--text-muted)">${p.votesAbstain}</div>
          <div class="vote-result-label">Abstain</div>
        </div>
      </div>
      <div class="progress-bar" style="height:10px;border-radius:5px;margin-bottom:8px;display:flex;overflow:hidden;background:var(--cream-light)">
        <div style="width:${pctFor}%;background:var(--success);transition:width 0.6s ease"></div>
        <div style="width:${pctAgainst}%;background:var(--danger);transition:width 0.6s ease"></div>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text-muted)">
        <span>${totalVotes} of ${p.totalMembers} members voted</span>
        <span>${totalVotes>=Math.ceil(p.totalMembers/2)?'Quorum reached ‚úì':'Need '+(Math.ceil(p.totalMembers/2)-totalVotes)+' more for quorum'}</span>
      </div>
      ${!p.voted?`
      <div style="display:flex;gap:8px;margin-top:14px">
        <button class="btn btn-primary" style="flex:1;justify-content:center;background:var(--success);border-color:var(--success)">${I('check',14,'#fff')} Vote For</button>
        <button class="btn" style="flex:1;justify-content:center;color:var(--danger);border-color:var(--danger)">Vote Against</button>
        <button class="btn" style="flex:1;justify-content:center">Abstain</button>
      </div>`:`
      <div style="margin-top:14px;padding:10px 14px;border-radius:10px;background:rgba(107,138,94,0.08);display:flex;align-items:center;gap:8px;font-size:13px;color:var(--success);font-weight:500">
        ${I('check',16,'var(--success)',2.5)} You voted "${p.votedChoice}" on this proposal
      </div>`}
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Description</div>
      <div style="font-size:14px;line-height:1.7;color:var(--text-secondary)">${p.description.replace(/\n\n/g,'</p><p style="margin-bottom:12px">').replace(/\n/g,'<br>')}</div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Tags</div>
      <div style="display:flex;flex-wrap:wrap;gap:6px">
        ${p.tags.map(t=>`<span class="form-tag">${t}</span>`).join('')}
      </div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">Activity Timeline</div>
      <div class="timeline-item">
        <div class="timeline-dot">${I('plus',14,'var(--success)')}</div>
        <div class="timeline-content"><div class="timeline-text"><strong>${p.author}</strong> created this proposal</div><div class="timeline-date">${p.created}</div></div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot">${I('check',14,'var(--success)')}</div>
        <div class="timeline-content"><div class="timeline-text">Voting period opened</div><div class="timeline-date">${p.created}</div></div>
      </div>
      ${totalVotes>=Math.ceil(p.totalMembers/2)?`
      <div class="timeline-item">
        <div class="timeline-dot" style="background:rgba(107,138,94,0.15)">${I('users',14,'var(--success)')}</div>
        <div class="timeline-content"><div class="timeline-text"><strong>Quorum reached</strong> ‚Äî ${totalVotes} of ${p.totalMembers} members voted</div><div class="timeline-date">Mar 2, 2026</div></div>
      </div>`:''}
    </div>

    <div class="detail-section" style="border-bottom:none;margin-bottom:0;padding-bottom:0">
      <div class="detail-section-title">Discussion (${id==='DEC-012'?'4':'2'} comments)</div>
      <div class="comment-item">
        <div class="avatar" style="background:var(--olive);width:32px;height:32px;font-size:11px;border-radius:8px">LH</div>
        <div style="flex:1"><div><span class="comment-author">Lucy Hartwell</span><span class="comment-time">2 hours ago</span></div><div class="comment-body">This would be wonderful ‚Äî Saturday mornings are when most of our members are free. Would we need a second kiln monitor?</div></div>
      </div>
      <div class="comment-item">
        <div class="avatar" style="background:var(--success);width:32px;height:32px;font-size:11px;border-radius:8px">NC</div>
        <div style="flex:1"><div><span class="comment-author">Nina Chang</span><span class="comment-time">5 hours ago</span></div><div class="comment-body">Love this idea. Could we also open the textile studio on Saturdays at the same time for those who prefer fibre arts?</div></div>
      </div>
      <div style="display:flex;gap:10px;margin-top:14px">
        <input class="form-input" placeholder="Add a comment‚Ä¶" style="flex:1;margin-bottom:0">
        <button class="btn btn-primary btn-sm">${I('send',14,'#edd6b7')}</button>
      </div>
    </div>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NEW POST (CONVERSATIONS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openNewPost(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('chat',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">New Post</div><div class="modal-subtitle">Start a conversation with the community</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="form-label">Post Title <span style="color:var(--danger)">*</span></label>
      <input class="form-input" placeholder="Give your post a clear, descriptive title">
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
        <select class="form-select">
          <option value="">Select category‚Ä¶</option>
          <option>Announcement</option>
          <option>Discussion</option>
          <option>Question</option>
          <option>Proposal</option>
          <option>Update</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Visibility</label>
        <select class="form-select">
          <option>All Members</option>
          <option>Council Only</option>
          <option>Working Group</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Content <span style="color:var(--danger)">*</span></label>
      <textarea class="form-input" placeholder="Write your post content here. You can use markdown for formatting‚Ä¶" style="min-height:200px"></textarea>
      <div class="form-hint">Supports markdown: **bold**, *italic*, [links](url), bullet lists, code blocks</div>
    </div>
    <div class="form-group">
      <label class="form-label">Tags</label>
      <div class="form-tag-input" onclick="this.querySelector('input').focus()">
        <input placeholder="Add tags to help others find your post‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Attachments</label>
      <div style="border:2px dashed var(--card-border);border-radius:12px;padding:24px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
        <div style="margin-bottom:6px">${I('upload',22,'var(--text-muted)')}</div>
        <div style="font-size:13px;color:var(--text-secondary)">Drag files here or <span style="color:var(--brown-warm);font-weight:500">browse</span></div>
        <div style="font-size:11px;color:var(--text-muted);margin-top:3px">Images, PDFs, or documents up to 10MB each</div>
      </div>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Pin this post to the top of the feed</span>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox checked" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Allow comments on this post</span>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('conversations')">${I('send',14,'#edd6b7')} Publish Post</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddContact(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('users',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Add Contact</div><div class="modal-subtitle">Add an organisation or individual</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('user',15,'var(--brown-warm)')} Contact Type</div>
      <div style="display:flex;gap:10px;margin-bottom:16px">
        <button class="btn" style="flex:1;justify-content:center" id="ctIndiv" onclick="setContactType('individual')">${I('user',16)} Individual</button>
        <button class="btn" style="flex:1;justify-content:center" id="ctOrg" onclick="setContactType('organisation')">${I('building',16)} Organisation</button>
      </div>
    </div>

    <div class="form-section" id="contactFields">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Details</div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">First Name <span style="color:var(--danger)">*</span></label>
          <input class="form-input" placeholder="First name">
        </div>
        <div class="form-group">
          <label class="form-label">Last Name <span style="color:var(--danger)">*</span></label>
          <input class="form-input" placeholder="Last name">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Email Address</label>
        <input class="form-input" type="email" placeholder="email@example.com">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Phone</label>
          <input class="form-input" type="tel" placeholder="+61 400 000 000">
        </div>
        <div class="form-group">
          <label class="form-label">Location</label>
          <input class="form-input" placeholder="City, Country">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Role / Title</label>
          <input class="form-input" placeholder="e.g., Weaver, Ceramicist">
        </div>
        <div class="form-group">
          <label class="form-label">Organisation</label>
          <select class="form-select">
            <option value="">Select organisation‚Ä¶</option>
            <option>Heartwood Makers Collective</option>
            <option>Makers Supply Co.</option>
            <option>The Wool Collective</option>
            <option>Independent</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('shield',15,'var(--brown-warm)')} Skills & Access</div>
      <div class="form-group">
        <label class="form-label">Craft Speciality</label>
        <input class="form-input" placeholder="e.g., Weaving, ceramics, natural dyeing">
        <div class="form-hint">Optional ‚Äî their primary craft discipline</div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Community Role</label>
          <select class="form-select">
            <option>Member</option>
            <option>Instructor</option>
            <option>Studio Lead</option>
            <option>Committee Member</option>
            <option>Guest</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Team Assignment</label>
          <select class="form-select">
            <option value="">No team</option>
            <option>Textile Arts Guild</option>
            <option>Makers Committee</option>
            <option>Operations</option>
            <option>Development</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Additional</div>
      <div class="form-group">
        <label class="form-label">Notes</label>
        <textarea class="form-input" placeholder="Any additional notes about this contact‚Ä¶" style="min-height:70px"></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <input placeholder="Add tags‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('contacts')">${I('plus',14,'#edd6b7')} Add Contact</button>
  </div>
  `);
  setContactType('individual');
}

function setContactType(type){
  const indBtn=document.getElementById('ctIndiv');
  const orgBtn=document.getElementById('ctOrg');
  const fields=document.getElementById('contactFields');
  if(type==='individual'){
    indBtn.style.borderColor='var(--brown-warm)';indBtn.style.background='var(--accent-light)';indBtn.style.color='var(--brown-deep)';
    orgBtn.style.borderColor='';orgBtn.style.background='';orgBtn.style.color='';
    fields.innerHTML=`
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Personal Details</div>
      <div class="form-row"><div class="form-group"><label class="form-label">First Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="First name"></div><div class="form-group"><label class="form-label">Last Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="Last name"></div></div>
      <div class="form-group"><label class="form-label">Email Address</label><input class="form-input" type="email" placeholder="email@example.com"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Phone</label><input class="form-input" type="tel" placeholder="+61 400 000 000"></div><div class="form-group"><label class="form-label">Location</label><input class="form-input" placeholder="City, Country"></div></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Role / Title</label><input class="form-input" placeholder="e.g., Weaver, Ceramicist"></div><div class="form-group"><label class="form-label">Organisation</label><select class="form-select"><option value="">Select‚Ä¶</option><option>Heartwood Makers Collective</option><option>The Wool Collective</option><option>Makers Supply Co.</option><option>Independent</option></select></div></div>`;
  } else {
    orgBtn.style.borderColor='var(--brown-warm)';orgBtn.style.background='var(--accent-light)';orgBtn.style.color='var(--brown-deep)';
    indBtn.style.borderColor='';indBtn.style.background='';indBtn.style.color='';
    fields.innerHTML=`
      <div class="form-section-title">${I('building',15,'var(--brown-warm)')} Organisation Details</div>
      <div class="form-group"><label class="form-label">Organisation Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="Organisation name"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Type</label><select class="form-select"><option>Company</option><option>Foundation</option><option>Government</option><option>Non-Profit</option><option>Community Group</option></select></div><div class="form-group"><label class="form-label">Industry</label><input class="form-input" placeholder="e.g., Technology, Finance"></div></div>
      <div class="form-group"><label class="form-label">Website</label><input class="form-input" placeholder="https://‚Ä¶"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Primary Contact Email</label><input class="form-input" type="email" placeholder="contact@org.com"></div><div class="form-group"><label class="form-label">Location / HQ</label><input class="form-input" placeholder="City, Country"></div></div>
      <div class="form-group"><label class="form-label">Description</label><textarea class="form-input" placeholder="Brief description of the organisation‚Ä¶" style="min-height:70px"></textarea></div>`;
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SUBMIT OPPORTUNITY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openSubmitOpportunity(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('smile',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Submit Opportunity</div><div class="modal-subtitle">Suggest an improvement for the community</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('zap',15,'var(--brown-warm)')} Opportunity Details</div>
      <div class="form-group">
        <label class="form-label">Title <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="A clear, concise title for the opportunity">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
          <select class="form-select">
            <option value="">Select category‚Ä¶</option>
            <option>Technical Infrastructure</option>
            <option>Governance Process</option>
            <option>Community Engagement</option>
            <option>Security & Identity</option>
            <option>Documentation</option>
            <option>Partnerships</option>
            <option>Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Estimated Impact</label>
          <select class="form-select">
            <option>Low ‚Äî Nice to have</option>
            <option>Medium ‚Äî Meaningful improvement</option>
            <option selected>High ‚Äî Significant community benefit</option>
            <option>Critical ‚Äî Urgent need</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Description <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Describe the opportunity in detail. What problem does it solve? Who benefits? What would the outcome look like?" style="min-height:140px"></textarea>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('check',15,'var(--brown-warm)')} Success Criteria</div>
      <div class="form-group">
        <label class="form-label">How will we know this is successful?</label>
        <textarea class="form-input" placeholder="Define measurable outcomes or acceptance criteria‚Ä¶" style="min-height:80px"></textarea>
        <div class="form-hint">E.g., "Reduce onboarding time from 30 minutes to 5 minutes"</div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Estimated Effort</label>
          <select class="form-select">
            <option>Small (days)</option>
            <option>Medium (weeks)</option>
            <option selected>Large (months)</option>
            <option>Extra Large (quarter+)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Suggested Priority</label>
          <select class="form-select">
            <option>Low</option>
            <option selected>Medium</option>
            <option>High</option>
            <option>Urgent</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('users',15,'var(--brown-warm)')} Stakeholders & Resources</div>
      <div class="form-group">
        <label class="form-label">Who would champion this?</label>
        <select class="form-select">
          <option value="">Select a person or team‚Ä¶</option>
          <option>Lucy Hartwell ‚Äî Textile Lead</option>
          <option>Tom Pearson ‚Äî Ceramics Lead</option>
          <option>Rosa Delgado ‚Äî Weaving</option>
          <option>Ellen Morris ‚Äî Treasurer</option>
          <option>Nina Chang ‚Äî Embroidery</option>
          <option>I'll champion it myself</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Related Areas of Focus</label>
        <div style="display:flex;flex-wrap:wrap;gap:8px">
          ${['Textiles','Ceramics','Weaving','Dyeing','Education','Community','Events','Equipment','Operations'].map(a=>`<button class="btn btn-sm" style="font-size:12px" onclick="this.style.borderColor=this.style.borderColor?'':'var(--brown-warm)';this.style.background=this.style.background==='var(--accent-light)'?'':'var(--accent-light)';this.style.color=this.style.color==='var(--brown-deep)'?'':'var(--brown-deep)'">${a}</button>`).join('')}
        </div>
      </div>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Supporting Materials</div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <input placeholder="Add tags‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Reference Links</label>
        <input class="form-input" placeholder="Paste relevant URLs, prior art, or research links‚Ä¶" style="margin-bottom:8px">
        <input class="form-input" placeholder="Add another link‚Ä¶">
      </div>
      <div class="form-group">
        <label class="form-label">Attachments</label>
        <div style="border:2px dashed var(--card-border);border-radius:12px;padding:24px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
          <div style="margin-bottom:6px">${I('upload',22,'var(--text-muted)')}</div>
          <div style="font-size:13px;color:var(--text-secondary)">Drag files here or <span style="color:var(--brown-warm);font-weight:500">browse</span></div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('opportunities')">Submit Opportunity</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NEW PROJECT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openNewProject(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('folder',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">New Project</div><div class="modal-subtitle">Create a community project with tasks</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('folder',15,'var(--brown-warm)')} Project Details</div>
      <div class="form-group">
        <label class="form-label">Project Name <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="e.g., Community Quilt Phase 2">
      </div>
      <div class="form-group">
        <label class="form-label">Description <span style="color:var(--danger)">*</span></label>
        <textarea class="form-input" placeholder="Describe the project goals, scope, and expected deliverables‚Ä¶" style="min-height:120px"></textarea>
      </div>
      <div class="form-row three">
        <div class="form-group">
          <label class="form-label">Category</label>
          <select class="form-select">
            <option>Development</option><option>Governance</option><option>Infrastructure</option>
            <option>Community</option><option>Research</option><option>Documentation</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Start Date</label>
          <input class="form-input" type="date">
        </div>
        <div class="form-group">
          <label class="form-label">Target Completion</label>
          <input class="form-input" type="date">
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('users',15,'var(--brown-warm)')} Team</div>
      <div class="form-group">
        <label class="form-label">Project Lead <span style="color:var(--danger)">*</span></label>
        <select class="form-select">
          <option value="">Select lead‚Ä¶</option>
          <option>Lucy Hartwell</option><option>Tom Pearson</option><option>Nina Chang</option>
          <option>Rosa Delgado</option><option>Ellen Morris</option><option>Jake Turner</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Team Members</label>
        <div class="form-tag-input" onclick="this.querySelector('input').focus()">
          <span class="form-tag">Lucy Hartwell <button onclick="this.parentElement.remove()">√ó</button></span>
          <input placeholder="Add members‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Working Group</label>
        <select class="form-select">
          <option value="">None</option><option>Textile Arts Guild</option>
          <option>Ceramics Circle</option><option>Fibre Arts Studio</option><option>Natural Dye Lab</option><option>Market Committee</option>
        </select>
      </div>
    </div>

    <div class="form-section">
      <div class="form-section-title">${I('check',15,'var(--brown-warm)')} Initial Tasks</div>
      <div id="projectTasks">
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px"><input class="form-input" placeholder="Task 1 ‚Äî e.g., Define project scope" style="margin-bottom:0;flex:1"><select class="form-select" style="width:120px"><option>To Do</option><option>In Progress</option></select></div>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px"><input class="form-input" placeholder="Task 2" style="margin-bottom:0;flex:1"><select class="form-select" style="width:120px"><option>To Do</option><option>In Progress</option></select></div>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px"><input class="form-input" placeholder="Task 3" style="margin-bottom:0;flex:1"><select class="form-select" style="width:120px"><option>To Do</option><option>In Progress</option></select></div>
      </div>
      <button class="btn btn-sm btn-ghost" onclick="const d=document.getElementById('projectTasks');const n=d.children.length+1;d.insertAdjacentHTML('beforeend','<div style=\\'display:flex;gap:8px;align-items:center;margin-bottom:8px\\'><input class=\\'form-input\\' placeholder=\\'Task '+n+'\\' style=\\'margin-bottom:0;flex:1\\'><select class=\\'form-select\\' style=\\'width:120px\\'><option>To Do</option><option>In Progress</option></select></div>')">${I('plus',14)} Add Another Task</button>
    </div>

    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Tags & Labels</div>
      <div class="form-group">
        <label class="form-label">Tags</label>
        <div style="display:flex;flex-wrap:wrap;gap:8px">
          ${['Design','Development','Testing','Documentation','Research','Infrastructure'].map(a=>`<button class="btn btn-sm" style="font-size:12px" onclick="this.style.borderColor=this.style.borderColor?'':'var(--brown-warm)';this.style.background=this.style.background==='var(--accent-light)'?'':'var(--accent-light)'">${a}</button>`).join('')}
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn" style="border-color:var(--warning);color:var(--warning)">Save Draft</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('projects')">Create Project</button>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UPLOAD DOCUMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openUploadDoc(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('upload',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Upload Document</div><div class="modal-subtitle">Share a document with the community</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="form-label">File Upload <span style="color:var(--danger)">*</span></label>
      <div style="border:2px dashed var(--card-border);border-radius:14px;padding:40px 20px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
        <div style="margin-bottom:8px">${I('upload',32,'var(--text-muted)')}</div>
        <div style="font-size:15px;font-weight:500;color:var(--text-primary);margin-bottom:4px">Drag & drop files here</div>
        <div style="font-size:13px;color:var(--text-secondary)">or <span style="color:var(--brown-warm);font-weight:500;text-decoration:underline">browse your computer</span></div>
        <div style="font-size:11.5px;color:var(--text-muted);margin-top:8px">PDF, DOCX, XLSX, PPTX, images ¬∑ Max 25MB per file</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Document Title <span style="color:var(--danger)">*</span></label>
      <input class="form-input" placeholder="Give this document a descriptive title">
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category <span style="color:var(--danger)">*</span></label>
        <select class="form-select">
          <option value="">Select category‚Ä¶</option>
          <option>Governance</option><option>Technical</option><option>Financial</option>
          <option>Template</option><option>Policy</option><option>Meeting Notes</option><option>Other</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Visibility</label>
        <select class="form-select">
          <option>All Members</option><option>Council Only</option>
          <option>Working Group</option><option>Admins Only</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Description</label>
      <textarea class="form-input" placeholder="Brief description of the document contents‚Ä¶" style="min-height:80px"></textarea>
    </div>
    <div class="form-group">
      <label class="form-label">Tags</label>
      <div class="form-tag-input" onclick="this.querySelector('input').focus()">
        <input placeholder="Add tags‚Ä¶" onkeydown="if(event.key==='Enter'&&this.value.trim()){const t=document.createElement('span');t.className='form-tag';t.innerHTML=this.value.trim()+' <button onclick=\\'this.parentElement.remove()\\'>√ó</button>';this.parentElement.insertBefore(t,this);this.value='';event.preventDefault();}">
      </div>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Notify all community members about this upload</span>
    </div>
    <div class="form-checkbox-row">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">This document replaces a previous version</span>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('docs')">${I('upload',14,'#edd6b7')} Upload Document</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TOKEN TRANSACTION HISTORY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openTokenHistory(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('token',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Transaction History</div><div class="modal-subtitle">Your TANA token activity</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="display:flex;gap:10px;margin-bottom:20px">
      <div class="search-box" style="max-width:none;flex:1">${I('search',16,'#a89888')}<input placeholder="Search transactions‚Ä¶"></div>
      <select class="form-select" style="width:150px"><option>All Types</option><option>Earned</option><option>Redeemed</option><option>Bonus</option></select>
    </div>
    <table class="data-table">
    <thead><tr><th>Date</th><th>Activity</th><th>Category</th><th style="text-align:right">Amount</th></tr></thead>
    <tbody>
    ${[
      {date:'Mar 2, 2026',act:'Voted on DEC-024',cat:'Governance',amt:'+15'},
      {date:'Mar 1, 2026',act:'Completed PR review',cat:'Development',amt:'+25'},
      {date:'Feb 28, 2026',act:'Submitted opportunity',cat:'Community',amt:'+10'},
      {date:'Feb 27, 2026',act:'Attended governance meeting',cat:'Governance',amt:'+20'},
      {date:'Feb 25, 2026',act:'Documentation update',cat:'Development',amt:'+15'},
      {date:'Feb 23, 2026',act:'Redeemed for community credits',cat:'Redemption',amt:'-50'},
      {date:'Feb 20, 2026',act:'Facilitated onboarding session',cat:'Community',amt:'+30'},
      {date:'Feb 18, 2026',act:'Weekly streak bonus',cat:'Bonus',amt:'+10'},
      {date:'Feb 15, 2026',act:'Attended quilting workshop',cat:'Development',amt:'+20'},
      {date:'Feb 12, 2026',act:'Voted on DEC-021',cat:'Governance',amt:'+15'},
    ].map(t=>`<tr>
      <td style="font-size:12.5px;color:var(--text-muted)">${t.date}</td>
      <td style="font-weight:500">${t.act}</td>
      <td><span class="badge badge-info">${t.cat}</span></td>
      <td style="text-align:right;font-weight:600;color:${t.amt.startsWith('+')?'var(--success)':'var(--danger)'}">${t.amt}</td>
    </tr>`).join('')}
    </tbody></table>
    <div style="text-align:center;padding:16px 0;font-size:13px;color:var(--text-muted)">Showing 10 most recent ¬∑ <span style="color:var(--brown-warm);cursor:pointer;font-weight:500">Load more</span></div>
  </div>
  `,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TOKEN REDEEM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openTokenRedeem(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('token',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Redeem Tokens</div><div class="modal-subtitle">Exchange TANA tokens for rewards</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="text-align:center;padding:16px 0 24px;border-bottom:1px solid var(--card-border);margin-bottom:20px">
      <div style="font-size:13px;color:var(--text-muted)">Available Balance</div>
      <div style="font-family:'Playfair Display',serif;font-size:36px;font-weight:700;color:var(--text-heading)">1,247</div>
      <div style="font-size:12px;color:var(--text-muted)">TANA Tokens</div>
    </div>
    <div class="form-section-title">${I('check',15,'var(--brown-warm)')} Choose Reward</div>
    ${[
      {name:'Community Credits',desc:'Use for governance proposal sponsoring',cost:100,icon:'dollar'},
      {name:'Premium Support Priority',desc:'Get prioritised support for 30 days',cost:200,icon:'zap'},
      {name:'Conference Pass Credit',desc:'Discount toward community events',cost:500,icon:'globe'},
      {name:'Governance Weight Boost',desc:'2x voting weight for one proposal',cost:300,icon:'shield'},
      {name:'Custom Badge',desc:'Display a custom badge on your profile',cost:150,icon:'heart'},
    ].map(r=>`
    <div style="display:flex;align-items:center;gap:14px;padding:14px 16px;border-radius:12px;border:1.5px solid var(--card-border);margin-bottom:8px;cursor:pointer;transition:all 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)';this.style.background='var(--accent-light)'" onmouseout="this.style.borderColor='';this.style.background=''">
      <div class="list-item-icon" style="background:var(--accent-light)">${I(r.icon,18,'var(--brown-warm)')}</div>
      <div style="flex:1"><div style="font-size:14px;font-weight:500;color:var(--text-primary)">${r.name}</div><div style="font-size:12.5px;color:var(--text-muted)">${r.desc}</div></div>
      <div style="text-align:right"><div style="font-size:15px;font-weight:700;color:var(--text-heading)">${r.cost}</div><div style="font-size:10.5px;color:var(--text-muted)">tokens</div></div>
    </div>`).join('')}
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal()">Redeem Selected</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD RESOURCE (OPERATIONS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddResource(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('pie',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Add Resource</div><div class="modal-subtitle">Register a new community resource</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-section">
      <div class="form-section-title">${I('file',15,'var(--brown-warm)')} Resource Details</div>
      <div class="form-group">
        <label class="form-label">Resource Name <span style="color:var(--danger)">*</span></label>
        <input class="form-input" placeholder="e.g., AWS EC2 Cluster, API Gateway">
      </div>
      <div class="form-row three">
        <div class="form-group">
          <label class="form-label">Type <span style="color:var(--danger)">*</span></label>
          <select class="form-select">
            <option value="">Select type‚Ä¶</option>
            <option>Cloud</option><option>Infrastructure</option><option>Service</option>
            <option>Hardware</option><option>Software License</option><option>Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Status</label>
          <select class="form-select">
            <option>Active</option><option>Provisioning</option><option>Maintenance</option><option>Decommissioned</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Allocation</label>
          <select class="form-select">
            <option>Operations</option><option>Development</option><option>Textile Arts Guild</option>
            <option>Grants</option><option>Community</option>
          </select>
        </div>
      </div>
    </div>
    <div class="form-section">
      <div class="form-section-title">${I('dollar',15,'var(--brown-warm)')} Cost & Capacity</div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Monthly Cost</label>
          <input class="form-input" type="number" placeholder="0.00" style="font-family:'JetBrains Mono',monospace">
        </div>
        <div class="form-group">
          <label class="form-label">Currency</label>
          <select class="form-select">
            <option>USD</option><option>AUD</option><option>EUR</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Capacity / Limits</label>
        <input class="form-input" placeholder="e.g., 4 vCPU, 16GB RAM, 500GB SSD">
      </div>
    </div>
    <div class="form-section" style="margin-bottom:0">
      <div class="form-section-title">${I('link',15,'var(--brown-warm)')} Access & Notes</div>
      <div class="form-group">
        <label class="form-label">Management URL</label>
        <input class="form-input" placeholder="https://console.aws.amazon.com/‚Ä¶">
      </div>
      <div class="form-group">
        <label class="form-label">Notes</label>
        <textarea class="form-input" placeholder="Additional details, access instructions, dependencies‚Ä¶" style="min-height:70px"></textarea>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('operations')">Add Resource</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD TRANSACTION (FINANCIALS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddTransaction(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('dollar',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Add Transaction</div><div class="modal-subtitle">Record income or expense</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="form-label">Transaction Type <span style="color:var(--danger)">*</span></label>
      <div style="display:flex;gap:10px">
        <button class="btn" style="flex:1;justify-content:center;border-color:var(--success);background:rgba(107,138,94,0.08);color:var(--success)" id="txIncome" onclick="this.style.borderColor='var(--success)';this.style.background='rgba(107,138,94,0.08)';this.style.color='var(--success)';document.getElementById('txExpense').style.borderColor='';document.getElementById('txExpense').style.background='';document.getElementById('txExpense').style.color=''">${I('plus',14,'var(--success)')} Income</button>
        <button class="btn" style="flex:1;justify-content:center" id="txExpense" onclick="this.style.borderColor='var(--danger)';this.style.background='rgba(192,96,74,0.08)';this.style.color='var(--danger)';document.getElementById('txIncome').style.borderColor='';document.getElementById('txIncome').style.background='';document.getElementById('txIncome').style.color=''">${I('download',14)} Expense</button>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Description <span style="color:var(--danger)">*</span></label>
      <input class="form-input" placeholder="e.g., Studio rent, Workshop fees, Clay supplies">
    </div>
    <div class="form-row three">
      <div class="form-group">
        <label class="form-label">Amount <span style="color:var(--danger)">*</span></label>
        <input class="form-input" type="number" placeholder="0.00" style="font-family:'JetBrains Mono',monospace">
      </div>
      <div class="form-group">
        <label class="form-label">Currency</label>
        <select class="form-select">
          <option>USD</option><option>AUD</option><option>EUR</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Date <span style="color:var(--danger)">*</span></label>
        <input class="form-input" type="date">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category</label>
        <select class="form-select">
          <option value="">Select category‚Ä¶</option>
          <option>Infrastructure</option><option>Hosting</option><option>Development</option>
          <option>Grants</option><option>Contributions</option><option>Services</option>
          <option>Market Income</option><option>Other</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Payment Method</label>
        <select class="form-select">
          <option>Bank Transfer</option><option>Bank Transfer</option><option>Direct Deposit</option>
          <option>Credit Card</option><option>PayPal</option><option>Other</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Invoice / Receipt Reference</label>
      <input class="form-input" placeholder="0x‚Ä¶" style="font-family:'JetBrains Mono',monospace;font-size:13px">
      <div class="form-hint">Optional ‚Äî add an invoice or receipt reference</div>
    </div>
    <div class="form-group">
      <label class="form-label">Attachments</label>
      <div style="border:2px dashed var(--card-border);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:border-color 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)'" onmouseout="this.style.borderColor='var(--card-border)'">
        ${I('upload',20,'var(--text-muted)')}
        <div style="font-size:13px;color:var(--text-secondary);margin-top:4px">Upload receipt or invoice</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Notes</label>
      <textarea class="form-input" placeholder="Additional details‚Ä¶" style="min-height:60px"></textarea>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal();navigate('financials')">Save Transaction</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// EXPORT REPORT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openExportReport(source){
  const title=source==='financials'?'Export Financial Report':'Export Community Report';
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('download',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">${title}</div><div class="modal-subtitle">Generate and download a report</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Date Range</label>
        <select class="form-select">
          <option>Last 30 days</option><option>Last quarter</option><option>Last 6 months</option>
          <option>Year to date</option><option>Last year</option><option>Custom range</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Format</label>
        <select class="form-select">
          <option>PDF Report</option><option>CSV / Spreadsheet</option><option>JSON Data</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Include Sections</label>
      ${(source==='financials'?
        ['Summary Overview','Income Breakdown','Expense Breakdown','Grants & Donations','Membership Summary','Charts & Graphs']:
        ['Community Activity','Governance Participation','Token Distribution','Project Progress','Member Engagement','AI Insights']
      ).map(s=>`
      <div class="form-checkbox-row">
        <button class="form-checkbox checked" onclick="this.classList.toggle('checked')">${I('check',13,'#fff',2.5)}</button>
        <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">${s}</span>
      </div>`).join('')}
    </div>
    <div class="form-checkbox-row" style="padding-top:12px;border-top:1px solid var(--card-border)">
      <button class="form-checkbox" onclick="this.classList.toggle('checked')"></button>
      <span class="form-checkbox-label" onclick="this.previousElementSibling.classList.toggle('checked')">Email a copy to me when ready</span>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" onclick="closeModal()">${I('download',14,'#edd6b7')} Generate Report</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REGISTER PASSKEY (SETTINGS)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openRegisterPasskey(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px">${I('key',20,'var(--brown-warm)')}</div>
      <div><div class="modal-title">Register New Passkey</div><div class="modal-subtitle">Add a passwordless authentication method</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="text-align:center;padding:20px 0 28px">
      <div style="width:80px;height:80px;border-radius:20px;background:var(--accent-light);display:inline-flex;align-items:center;justify-content:center;margin-bottom:16px">
        ${I('fingerprint',36,'var(--brown-warm)')}
      </div>
      <div style="font-size:16px;font-weight:600;color:var(--text-primary);margin-bottom:6px">Choose your passkey type</div>
      <div style="font-size:13.5px;color:var(--text-secondary);line-height:1.5;max-width:360px;margin:0 auto">Passkeys provide fast, secure, passwordless authentication using your device's biometric sensor or security key.</div>
    </div>

    ${[
      {icon:'fingerprint',name:'Biometric (Touch ID / Face ID)',desc:'Use your device\'s built-in biometric sensor',rec:true},
      {icon:'key',name:'Hardware Security Key',desc:'Use a YubiKey, Titan, or other FIDO2 key',rec:false},
      {icon:'smartphone',name:'Mobile Device',desc:'Use your phone as a passkey via QR code',rec:false},
      {icon:'globe',name:'Browser Passkey',desc:'Store passkey in your browser\'s credential manager',rec:false},
    ].map(p=>`
    <div style="display:flex;align-items:center;gap:14px;padding:16px;border-radius:12px;border:1.5px solid var(--card-border);margin-bottom:8px;cursor:pointer;transition:all 0.2s ease" onmouseover="this.style.borderColor='var(--brown-warm)';this.style.background='var(--accent-light)'" onmouseout="this.style.borderColor='';this.style.background=''">
      <div class="security-item-icon" style="width:44px;height:44px">${I(p.icon,22,'var(--brown-warm)')}</div>
      <div style="flex:1">
        <div style="font-size:14px;font-weight:500;color:var(--text-primary)">${p.name} ${p.rec?'<span class="badge badge-open" style="margin-left:6px">Recommended</span>':''}</div>
        <div style="font-size:12.5px;color:var(--text-muted);margin-top:1px">${p.desc}</div>
      </div>
      ${I('chevron',16,'#a89888')}
    </div>`).join('')}

    <div style="margin-top:20px;padding:14px 16px;border-radius:12px;background:var(--cream-pale);font-size:12.5px;color:var(--text-secondary);line-height:1.5">
      ${I('shield',14,'var(--brown-warm)')} <strong style="color:var(--text-primary)">Security note:</strong> Passkeys are stored locally on your device and never transmitted to our servers. Each passkey is unique to this service and cannot be used to track you across sites.
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REGENERATE RECOVERY CODES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openRegenerateCodes(){
  openModal(`
  <div class="modal-header">
    <div class="modal-header-left">
      <div class="page-icon" style="width:38px;height:38px;background:rgba(192,96,74,0.1)">${I('shield',20,'var(--danger)')}</div>
      <div><div class="modal-title">Regenerate Recovery Codes</div><div class="modal-subtitle">This will invalidate your existing codes</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <div style="padding:16px;border-radius:12px;background:rgba(192,96,74,0.06);border:1px solid rgba(192,96,74,0.15);margin-bottom:20px;display:flex;gap:12px;align-items:flex-start">
      ${I('shield',20,'var(--danger)')}
      <div>
        <div style="font-size:14px;font-weight:600;color:var(--danger);margin-bottom:4px">Warning</div>
        <div style="font-size:13px;color:var(--text-secondary);line-height:1.5">Regenerating recovery codes will <strong>immediately invalidate</strong> all 10 existing codes. You currently have 6 unused codes remaining. Make sure to save your new codes in a secure location.</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Confirm your password to proceed</label>
      <input class="form-input" type="password" placeholder="Enter your current password">
    </div>
    <div style="padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:12px">
      <div style="font-size:13px;font-weight:600;color:var(--text-heading);margin-bottom:10px">New recovery codes will be:</div>
      <div style="font-size:13px;color:var(--text-secondary);line-height:1.7">
        ‚Ä¢ 10 single-use codes generated<br>
        ‚Ä¢ Each code can only be used once<br>
        ‚Ä¢ Store them securely (password manager recommended)<br>
        ‚Ä¢ Available for download as a text file
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="closeModal()">Cancel</button>
    <button class="btn btn-primary" style="background:var(--danger);border-color:var(--danger)" onclick="closeModal()">Regenerate Codes</button>
  </div>
  `);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW POST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewPost(id){
const posts={1:{title:'üì¢ Spring Quilting Retreat ‚Äî Registration Open',author:'Lucy Hartwell',avatar:'LH',color:'var(--olive)',time:'2 hours ago',badge:'Announcement',body:'Registrations are now live for the Spring Quilting Retreat (April 12‚Äì14). Guest instructor Maya Patel will be teaching Sashiko techniques.\n\nThe retreat is at Blue Mountains Community Centre. Spaces are limited to 20 participants.\n\nFees: $80 per person (materials included). Sign up on the noticeboard or message Lucy.'},2:{title:'Raku Firing Weekend ‚Äî Who\'s In?',author:'Tom Pearson',avatar:'TP',color:'var(--info)',time:'5 hours ago',badge:'Discussion',body:'Planning a raku firing session next Saturday. Need at least 6 participants to fire up the outdoor kiln.\n\nWhat to bring:\n- Your bisque-fired pieces (max 3 per person)\n- Tongs and heat-resistant gloves\n- Newspaper for reduction\n\nI\'ll provide the raku glazes and combustible materials.'},3:{title:'Best beginner loom for rigid heddle weaving?',author:'Rosa Delgado',avatar:'RD',color:'var(--brown-warm)',time:'Yesterday',badge:'Question',body:'I want to recommend looms for our intro weaving class. Considering the Ashford Knitters Loom vs Schacht Cricket.\n\nKey factors:\n- Price point for beginners\n- Weaving width (at least 30cm)\n- Portability for take-home projects'},4:{title:'üì¢ New Dye Kitchen Safety Guidelines',author:'Ellen Morris',avatar:'EM',color:'var(--brown-deep)',time:'2 days ago',badge:'Announcement',body:'Updated safety guidelines for the dye kitchen are posted by the door.\n\nKey changes: mandatory gloves for all acid dyes, new ventilation protocol for vat dyes, and updated MSDS sheets in the folder.\n\nPlease read before your next dye session.'},5:{title:'Embroidery circle ‚Äî changing to Thursday nights',author:'Nina Chang',avatar:'NC',color:'var(--success)',time:'3 days ago',badge:'Discussion',body:'After the poll, Thursday 7pm won! We\'ll start the new schedule next week. Bring your current project or start a new sampler.'},6:{title:'How do you store handspun yarn?',author:'Jake Turner',avatar:'JT',color:'#7a6a8a',time:'4 days ago',badge:'Question',body:'My handspun skeins keep tangling. Anyone have a good storage system? I\'ve tried swift-wound balls but they lose twist over time.'}};
const p=posts[id]||posts[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="avatar" style="background:${p.color};width:38px;height:38px;font-size:12px">${p.avatar}</div><div><div class="modal-title">${p.author}</div><div class="modal-subtitle">${p.time} ¬∑ <span class="badge badge-info">${p.badge}</span></div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<h2 style="margin-bottom:16px">${p.title}</h2>
<div style="white-space:pre-wrap;line-height:1.7;color:var(--text-secondary);font-size:14px;margin-bottom:24px">${p.body}</div>
<div style="display:flex;gap:12px;padding:16px 0;border-top:1px solid var(--card-border)"><button class="btn btn-sm">${I('thumbsUp',14)} Like</button><button class="btn btn-sm">${I('link',14)} Share</button><button class="btn btn-sm">${I('flag',14)} Report</button></div>
<div class="form-section-title" style="margin-top:8px">${I('msgCircle',15,'var(--brown-warm)')} Comments</div>
${[{a:'Tom Pearson',av:'TP',c:'var(--info)',t:'1 hour ago',txt:'Sounds wonderful! I\'ll bring some hand-built mugs to display as well.'},{a:'Nina Chang',av:'NC',c:'var(--success)',t:'45 min ago',txt:'Count me in. Will there be space for a small embroidery demonstration too?'}].map(c=>`<div style="display:flex;gap:12px;padding:12px 0;border-bottom:1px solid var(--card-border)"><div class="avatar" style="background:${c.c};width:32px;height:32px;font-size:10px">${c.av}</div><div><div style="font-size:13px"><strong>${c.a}</strong> <span style="color:var(--text-muted);margin-left:6px">${c.t}</span></div><div style="font-size:13.5px;color:var(--text-secondary);margin-top:4px">${c.txt}</div></div></div>`).join('')}
<div style="margin-top:16px"><textarea class="form-input" placeholder="Write a comment‚Ä¶" style="min-height:70px"></textarea><div style="display:flex;justify-content:flex-end;margin-top:8px"><button class="btn btn-primary btn-sm">${I('send',14,'#edd6b7')} Post Comment</button></div></div>
</div>`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewContact(name){
const contacts={'Heartwood Makers Collective':{type:'Organisation',role:'Partner Studio',loc:'Melbourne, AU',status:'Active',desc:'Independent makers studio offering shared workspace, exhibition space, and collaborative projects with our community.',email:'hello@heartwoodmakers.com.au',skill:'Mixed media, woodwork, textiles',team:'Textile Arts Guild'},'Lucy Hartwell':{type:'Individual',role:'Textile Lead',loc:'Sydney, AU',status:'Active',desc:'Experienced quilter, hand-dyer, and textile artist. Leads the Textile Arts Guild and organises community retreats.',email:'lucy@makershub.com.au',skill:'Quilting, hand-dyeing, Sashiko',team:'Textile Arts Guild'},'Tom Pearson':{type:'Individual',role:'Ceramics Lead',loc:'Blue Mountains, AU',status:'Active',desc:'Studio potter specialising in raku, stoneware, and hand-building. Manages the ceramics studio and kiln schedule.',email:'tom@makershub.com.au',skill:'Raku, stoneware, wheel throwing',team:'Ceramics Circle'},'Rosa Delgado':{type:'Individual',role:'Weaving Instructor',loc:'Adelaide, AU',status:'Active',desc:'Experienced weaver teaching rigid heddle and floor loom techniques. Runs the beginner weaving programme.',email:'rosa@makershub.com.au',skill:'Weaving, tapestry, fibre prep',team:'Fibre Arts Studio'},'Nina Chang':{type:'Individual',role:'Embroidery Lead',loc:'Hobart, AU',status:'Active',desc:'Embroidery artist and knitting pattern designer. Runs the weekly embroidery circle and publishes patterns.',email:'nina@makershub.com.au',skill:'Embroidery, knitting, pattern design',team:'Textile Arts Guild'},'Ellen Morris':{type:'Individual',role:'Treasurer / Dyer',loc:'Perth, AU',status:'Active',desc:'Community treasurer and natural dye specialist. Manages finances, the dye kitchen, and bulk supply orders.',email:'ellen@makershub.com.au',skill:'Natural dyeing, eco-printing, bookkeeping',team:'Natural Dye Lab'}};
const c=contacts[name]||{type:'Individual',role:'Member',loc:'Unknown',status:'Active',desc:'Community maker.',email:'',skill:'',team:''};
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I(c.type==='Organisation'?'building':'user',20,'var(--brown-warm)')}</div><div><div class="modal-title">${name}</div><div class="modal-subtitle">${c.type} ¬∑ ${c.role}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div class="detail-section"><div class="form-section-title">${I('user',15,'var(--brown-warm)')} Profile</div>
<p style="color:var(--text-secondary);line-height:1.6;margin-bottom:16px">${c.desc}</p>
<div class="form-row"><div class="form-group"><label class="form-label">Location</label><div style="font-size:14px">${c.loc}</div></div><div class="form-group"><label class="form-label">Status</label><div><span class="badge badge-open">${c.status}</span></div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Email</label><div style="font-size:14px">${c.email||'‚Äî'}</div></div><div class="form-group"><label class="form-label">Team</label><div style="font-size:14px">${c.team||'‚Äî'}</div></div></div></div>
<div class="detail-section"><div class="form-section-title">${I('smile',15,'var(--brown-warm)')} Craft Skills</div>
<div class="form-group"><label class="form-label">Specialities</label><div style="font-size:14px">${c.skill||'Not specified'}</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('msgCircle',14,'#edd6b7')} Message</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW OPPORTUNITY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewOpportunity(id){
const opps={1:{title:'Community Quilt for Local Hospital',author:'Tom Pearson',status:'Open',impact:'High',area:'Infrastructure',effort:'Large',desc:'Create a collaborative quilt with contributions from all members to donate to the children\'s ward.',criteria:'All 24 quilt squares completed and assembled into finished quilt by June 2026.',votes:14},2:{title:'Online Pattern Library',author:'Nina Chang',status:'Under Review',impact:'Medium',area:'Community',effort:'Medium',desc:'Build a shared digital library of patterns, templates, and tutorials contributed by members.',criteria:'Library contains 50+ patterns across all craft disciplines within 6 months.',votes:9},3:{title:'Guest Instructor Series',author:'Lucy Hartwell',status:'Open',impact:'High',area:'Governance',effort:'Medium',desc:'Quarterly guest instructor workshops on speciality techniques like Sashiko, raku, and botanical printing.',criteria:'4 guest workshops delivered per year with average 15+ attendees each.',votes:22}};
const o=opps[id]||opps[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('smile',20,'var(--brown-warm)')}</div><div><div class="modal-title">${o.title}</div><div class="modal-subtitle">Submitted by ${o.author}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="display:flex;gap:10px;margin-bottom:20px"><span class="badge badge-${o.status==='Open'?'open':'pending'}">${o.status}</span><span class="badge badge-info">${o.area}</span><span class="badge badge-${o.impact==='High'?'closed':'pending'}">Impact: ${o.impact}</span><span class="badge badge-info">Effort: ${o.effort}</span></div>
<div class="form-section-title">${I('file',15,'var(--brown-warm)')} Description</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${o.desc}</p>
<div class="form-section-title">${I('check',15,'var(--brown-warm)')} Success Criteria</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${o.criteria}</p>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale)"><div style="text-align:center;flex:1"><div style="font-size:24px;font-weight:700;color:var(--text-heading)">${o.votes}</div><div style="font-size:12px;color:var(--text-muted)">Upvotes</div></div><div style="text-align:center;flex:1"><div style="font-size:24px;font-weight:700;color:var(--text-heading)">3</div><div style="font-size:12px;color:var(--text-muted)">Comments</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('thumbsUp',14,'#edd6b7')} Upvote</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW PROJECT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewProject(id){
const projects={1:{name:'Spring Quilting Retreat',progress:65,tasks:20,done:13,lead:'Lucy Hartwell',cat:'Workshop',desc:'Three-day quilting retreat featuring Sashiko guest instructor, fabric dyeing, and collaborative quilt assembly.',members:['Lucy Hartwell','Nina Chang','Ellen Morris'],milestones:[{name:'Venue & instructor booked',pct:100},{name:'Materials sourced',pct:85},{name:'Registrations & comms',pct:55},{name:'On-site setup',pct:20}]},2:{name:'Community Quilt ‚Äî Hospital Donation',progress:40,tasks:16,done:6,lead:'Lucy Hartwell',cat:'Community',desc:'Collaborative quilt with squares contributed by members for Sydney Royal Hospital children\'s ward.',members:['Lucy Hartwell','Nina Chang','Rosa Delgado','Ellen Morris'],milestones:[{name:'Design & colour palette',pct:100},{name:'Square collection',pct:50},{name:'Assembly & quilting',pct:15},{name:'Presentation & delivery',pct:0}]},3:{name:'Ceramics Studio Upgrade',progress:85,tasks:12,done:10,lead:'Tom Pearson',cat:'Infrastructure',desc:'Upgrade the ceramics studio with new shelving, kiln maintenance, replacement pottery wheels, and ventilation.',members:['Tom Pearson','Ellen Morris'],milestones:[{name:'Equipment ordered',pct:100},{name:'Installation',pct:90},{name:'Safety inspection',pct:70},{name:'Grand reopening',pct:0}]},4:{name:'Beginner Weaving Course',progress:20,tasks:14,done:3,lead:'Rosa Delgado',cat:'Education',desc:'Six-week beginner weaving course covering rigid heddle basics, pattern reading, and project completion.',members:['Rosa Delgado','Jake Turner'],milestones:[{name:'Curriculum design',pct:100},{name:'Loom prep & materials',pct:30},{name:'Class delivery',pct:0},{name:'Student projects',pct:0}]},5:{name:'Makers Market April Setup',progress:55,tasks:18,done:10,lead:'Ellen Morris',cat:'Events',desc:'Organise the April makers market including stall allocation, signage, payment systems, and promotion.',members:['Ellen Morris','Lucy Hartwell','Tom Pearson'],milestones:[{name:'Stall bookings',pct:100},{name:'Marketing & flyers',pct:60},{name:'Logistics & setup',pct:30},{name:'Day-of coordination',pct:0}]}};
const p=projects[id]||projects[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('folder',20,'var(--brown-warm)')}</div><div><div class="modal-title">${p.name}</div><div class="modal-subtitle">Lead: ${p.lead} ¬∑ <span class="badge badge-info">${p.cat}</span></div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${p.desc}</p>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:20px"><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.progress}%</div><div style="font-size:12px;color:var(--text-muted)">Complete</div></div><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.done}/${p.tasks}</div><div style="font-size:12px;color:var(--text-muted)">Tasks Done</div></div><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.members.length}</div><div style="font-size:12px;color:var(--text-muted)">Members</div></div></div>
<div class="form-section-title">${I('check',15,'var(--brown-warm)')} Milestones</div>
${p.milestones.map(m=>`<div style="margin-bottom:14px"><div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:4px"><span>${m.name}</span><span style="font-weight:600">${m.pct}%</span></div><div class="progress-bar"><div class="progress-fill" style="width:${m.pct}%;background:${m.pct===100?'var(--success)':m.pct>50?'var(--warning)':'var(--danger)'}"></div></div></div>`).join('')}
<div class="form-section-title" style="margin-top:20px">${I('users',15,'var(--brown-warm)')} Team Members</div>
${p.members.map(m=>`<div style="display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:8px;background:var(--cream-pale);margin:0 6px 6px 0"><div class="avatar" style="background:var(--brown-warm);width:24px;height:24px;font-size:9px">${m.split(' ').map(n=>n[0]).join('')}</div><span style="font-size:13px">${m}</span></div>`).join('')}
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary" onclick="closeModal();openProjectBoard(${id})">Open Project Board</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW DOCUMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewDoc(id){
const docs={1:{name:'Makers Hub Constitution & Rules',cat:'Governance',author:'Ellen Morris',date:'Mar 1, 2026',size:'180 KB',desc:'Foundational document defining membership rules, studio usage policies, governance procedures, and amendment process.',versions:['v3.2 ‚Äî Mar 1, 2026','v3.1 ‚Äî Jan 15, 2026','v3.0 ‚Äî Nov 20, 2025']},2:{name:'Studio Safety Handbook',cat:'Governance',author:'Tom Pearson',date:'Feb 28, 2026',size:'420 KB',desc:'Comprehensive safety guide covering kiln operation, dye kitchen protocols, sharps handling, and first aid.',versions:['v2.0 ‚Äî Feb 28, 2026','v1.1 ‚Äî Dec 10, 2025']},3:{name:'Natural Dye Recipe Book',cat:'Technical',author:'Ellen Morris',date:'Feb 25, 2026',size:'1.8 MB',desc:'Collection of natural dye recipes with colour samples, mordant ratios, and fibre preparation instructions.',versions:['v1.0 ‚Äî Feb 25, 2026']},4:{name:'Q1 2026 Treasury Report',cat:'Governance',author:'Ellen Morris',date:'Feb 20, 2026',size:'340 KB',desc:'Quarterly financial report covering workshop fees, market income, membership subscriptions, and supply expenses.',versions:['Q1 2026 ‚Äî Feb 20, 2026']},5:{name:'Workshop Proposal Template',cat:'Template',author:'Lucy Hartwell',date:'Feb 15, 2026',size:'38 KB',desc:'Standard template for proposing new workshops including materials list, skill level, timeline, and budget estimates.',versions:['v2.0 ‚Äî Feb 15, 2026','v1.0 ‚Äî Oct 5, 2025']},6:{name:'Makers Market Stall Agreement',cat:'Template',author:'Ellen Morris',date:'Feb 10, 2026',size:'28 KB',desc:'Agreement form for market stall holders covering fees, insurance, display standards, and setup procedures.',versions:['v1.2 ‚Äî Feb 10, 2026']},7:{name:'Beginner Knitting Patterns Pack',cat:'Technical',author:'Nina Chang',date:'Feb 5, 2026',size:'2.4 MB',desc:'Collection of 12 beginner-friendly knitting patterns with charts, written instructions, and technique notes.',versions:['v2.3 ‚Äî Feb 5, 2026','v2.2 ‚Äî Jan 8, 2026']},8:{name:'AGM Minutes 2025',cat:'Governance',author:'Ellen Morris',date:'Jan 28, 2026',size:'95 KB',desc:'Minutes from the 2025 Annual General Meeting including committee elections, budget approval, and priorities.',versions:['v1.1 ‚Äî Jan 28, 2026']},9:{name:'Event Planning Checklist',cat:'Template',author:'Lucy Hartwell',date:'Jan 20, 2026',size:'22 KB',desc:'Reusable checklist template for planning community events, retreats, and exhibitions.',versions:['v1.0 ‚Äî Jan 20, 2026']}};
const d=docs[id]||docs[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('file',20,'var(--brown-warm)')}</div><div><div class="modal-title">${d.name}</div><div class="modal-subtitle">${d.author} ¬∑ ${d.date} ¬∑ ${d.size}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="margin-bottom:16px"><span class="badge badge-info">${d.cat}</span></div>
<div class="form-section-title">${I('file',15,'var(--brown-warm)')} Description</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${d.desc}</p>
<div class="form-section-title">${I('git',15,'var(--brown-warm)')} Version History</div>
${d.versions.map((v,i)=>`<div style="display:flex;align-items:center;gap:10px;padding:10px 0;${i<d.versions.length-1?'border-bottom:1px solid var(--card-border)':''}"><div style="width:8px;height:8px;border-radius:50%;background:${i===0?'var(--success)':'var(--text-muted)'}"></div><span style="font-size:13.5px;color:${i===0?'var(--text-primary)':'var(--text-muted)'}">${v}</span>${i===0?'<span class="badge badge-open" style="margin-left:auto">Current</span>':''}</div>`).join('')}
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn">${I('download',14)} Download</button><button class="btn btn-primary">${I('eye',14,'#edd6b7')} Open Document</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW TRANSACTION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewTransaction(id){
const txns={1:{desc:'Kiln gas & maintenance',amount:'-$340',type:'expense',cat:'Equipment',date:'Mar 1, 2026',method:'Bank Transfer',ref:'INV-2026-0301',notes:'Monthly gas bill for the community kiln plus quarterly burner service and thermocouple calibration.'},2:{desc:'Makers Market stall fees',amount:'+$1,800',type:'income',cat:'Market Income',date:'Feb 28, 2026',method:'Bank Transfer',ref:'DEP-2026-0228',notes:'Collected stall fees from 18 vendors at the February makers market ($100 each).'},3:{desc:'Fabric & thread supplies',amount:'-$580',type:'expense',cat:'Materials',date:'Feb 25, 2026',method:'Credit Card',ref:'INV-2026-0225',notes:'Quilting cotton, batting, and specialty threads for the Spring Retreat project kits.'},4:{desc:'Workshop fees ‚Äî February',amount:'+$2,400',type:'income',cat:'Workshop Fees',date:'Feb 20, 2026',method:'Bank Transfer',ref:'DEP-2026-0220',notes:'Combined workshop fees from ceramics (8 sessions), weaving (4 sessions), and embroidery circle (4 sessions).'},5:{desc:'Studio rent',amount:'-$1,200',type:'expense',cat:'Rent',date:'Feb 18, 2026',method:'Bank Transfer',ref:'INV-2026-0218',notes:'Monthly rent for the Makers Hub studio space including ceramics room, textile studio, dye kitchen, and common area.'},6:{desc:'Membership subscriptions',amount:'+$960',type:'income',cat:'Memberships',date:'Feb 15, 2026',method:'Bank Transfer',ref:'DEP-2026-0215',notes:'Monthly membership fees from 24 active members ($40 each).'},7:{desc:'Clay & glazes bulk order',amount:'-$450',type:'expense',cat:'Materials',date:'Feb 12, 2026',method:'Credit Card',ref:'INV-2026-0212',notes:'100kg stoneware clay, 5L each of 4 glaze colours, and kiln wash from Makers Supply Co.'},8:{desc:'Guest instructor sponsorship',amount:'+$500',type:'income',cat:'Sponsorship',date:'Feb 10, 2026',method:'Bank Transfer',ref:'DEP-2026-0210',notes:'Sponsorship from Heartwood Makers Collective towards the guest instructor programme.'},9:{desc:'Insurance premium',amount:'-$380',type:'expense',cat:'Insurance',date:'Feb 8, 2026',method:'Bank Transfer',ref:'INV-2026-0208',notes:'Quarterly public liability and contents insurance premium for the Makers Hub studio.'}};
const t=txns[id]||txns[1];
const isIncome=t.type==='income';
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px;background:${isIncome?'rgba(107,138,94,0.1)':'rgba(192,96,74,0.1)'}">${I(isIncome?'plus':'download',20,isIncome?'var(--success)':'var(--danger)')}</div><div><div class="modal-title">${t.desc}</div><div class="modal-subtitle">${t.date} ¬∑ ${t.cat}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="text-align:center;padding:20px 0;margin-bottom:20px;border-bottom:1px solid var(--card-border)"><div style="font-family:'Playfair Display',serif;font-size:36px;font-weight:700;color:${isIncome?'var(--success)':'var(--danger)'}">${t.amount}</div><div style="font-size:13px;color:var(--text-muted)">${isIncome?'Income':'Expense'} ¬∑ ${t.cat}</div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Date</label><div style="font-size:14px">${t.date}</div></div><div class="form-group"><label class="form-label">Payment Method</label><div style="font-size:14px">${t.method}</div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Reference</label><div style="font-family:'JetBrains Mono',monospace;font-size:13px;background:var(--cream-pale);padding:6px 10px;border-radius:6px">${t.ref}</div></div><div class="form-group"><label class="form-label">Category</label><div><span class="badge badge-info">${t.cat}</span></div></div></div>
<div class="form-group"><label class="form-label">Notes</label><div style="font-size:14px;color:var(--text-secondary);line-height:1.6">${t.notes}</div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn">${I('download',14)} Receipt</button></div>
`);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PROJECT BOARD (Kanban-style)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openProjectBoard(id){
const projects={1:{name:'Spring Quilting Retreat',lead:'Lucy Hartwell',tasks:[
{t:'Book venue ‚Äî Blue Mountains CC',s:'done',a:'LH'},{t:'Confirm guest instructor',s:'done',a:'LH'},{t:'Order quilting cotton & batting',s:'done',a:'EM'},{t:'Design participant kits',s:'done',a:'NC'},
{t:'Print promotional flyers',s:'progress',a:'LH'},{t:'Online registration form',s:'progress',a:'EM'},{t:'Prepare Sashiko samples',s:'progress',a:'NC'},
{t:'Arrange catering for 3 days',s:'todo',a:'EM'},{t:'Pack project kits',s:'todo',a:'NC'},{t:'Set up venue',s:'todo',a:'LH'},{t:'Photograph for newsletter',s:'todo',a:'LH'}
]},2:{name:'Community Quilt ‚Äî Hospital',lead:'Lucy Hartwell',tasks:[
{t:'Choose colour palette & theme',s:'done',a:'LH'},{t:'Cut backing fabric',s:'done',a:'NC'},{t:'Distribute square templates',s:'done',a:'LH'},
{t:'Collect squares (12 of 24)',s:'progress',a:'LH'},{t:'Assemble border strips',s:'progress',a:'RD'},
{t:'Machine quilt top',s:'todo',a:'LH'},{t:'Bind edges',s:'todo',a:'NC'},{t:'Wash & press',s:'todo',a:'EM'},{t:'Hospital presentation',s:'todo',a:'LH'}
]},3:{name:'Ceramics Studio Upgrade',lead:'Tom Pearson',tasks:[
{t:'Order new shelving units',s:'done',a:'TP'},{t:'Service kiln burners',s:'done',a:'TP'},{t:'Install ventilation',s:'done',a:'EM'},{t:'Repair 2 pottery wheels',s:'done',a:'TP'},{t:'Paint studio walls',s:'done',a:'TP'},
{t:'Install tool pegboard',s:'progress',a:'TP'},
{t:'Final safety inspection',s:'todo',a:'EM'}
]},4:{name:'Beginner Weaving Course',lead:'Rosa Delgado',tasks:[
{t:'Write 6-week curriculum',s:'done',a:'RD'},{t:'Order rigid heddle looms √ó8',s:'done',a:'EM'},{t:'Prepare warp yarn kits',s:'done',a:'RD'},
{t:'Create handout booklets',s:'progress',a:'RD'},{t:'Set up looms in room',s:'progress',a:'JT'},
{t:'Teach Week 1‚Äì2: Plain weave',s:'todo',a:'RD'},{t:'Teach Week 3‚Äì4: Patterns',s:'todo',a:'RD'},{t:'Student exhibition',s:'todo',a:'JT'}
]},5:{name:'Makers Market April',lead:'Ellen Morris',tasks:[
{t:'Confirm stall bookings',s:'done',a:'EM'},{t:'Book community hall',s:'done',a:'EM'},{t:'Design market poster',s:'done',a:'LH'},
{t:'Arrange card terminals',s:'progress',a:'EM'},{t:'Social media promotion',s:'progress',a:'NC'},
{t:'Set up stalls morning-of',s:'todo',a:'TP'},{t:'Run welcome desk',s:'todo',a:'NC'},{t:'Pack down & clean up',s:'todo',a:'EM'}
]}};
const p=projects[id]||projects[1];
const todo=p.tasks.filter(t=>t.s==='todo'),prog=p.tasks.filter(t=>t.s==='progress'),done=p.tasks.filter(t=>t.s==='done');
const colColors={todo:'var(--text-muted)',progress:'var(--warning)',done:'var(--success)'};
const renderCard=(t)=>`<div style="background:var(--cream-light);border:1px solid var(--card-border);border-radius:10px;padding:10px 12px;margin-bottom:8px">
<div style="font-size:13px;font-weight:500;color:var(--text-primary);margin-bottom:6px">${t.t}</div>
<div style="display:flex;align-items:center;gap:6px"><div class="avatar" style="background:var(--brown-warm);width:22px;height:22px;font-size:9px;border-radius:6px">${t.a}</div><span style="font-size:11px;color:var(--text-muted)">${t.a}</span></div>
</div>`;
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('folder',20,'var(--brown-warm)')}</div><div><div class="modal-title">${p.name} ‚Äî Board</div><div class="modal-subtitle">Lead: ${p.lead} ¬∑ ${p.tasks.length} tasks</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body" style="padding:16px">
<div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;min-height:300px">
<div><div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--text-muted)"><span style="font-size:13px;font-weight:700;color:var(--text-muted)">TO DO</span><span style="font-size:11px;background:var(--cream-pale);color:var(--text-muted);padding:2px 8px;border-radius:10px">${todo.length}</span></div>${todo.map(renderCard).join('')}</div>
<div><div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--warning)"><span style="font-size:13px;font-weight:700;color:var(--warning)">IN PROGRESS</span><span style="font-size:11px;background:rgba(200,160,60,0.12);color:var(--warning);padding:2px 8px;border-radius:10px">${prog.length}</span></div>${prog.map(renderCard).join('')}</div>
<div><div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--success)"><span style="font-size:13px;font-weight:700;color:var(--success)">DONE</span><span style="font-size:11px;background:rgba(107,138,94,0.12);color:var(--success);padding:2px 8px;border-radius:10px">${done.length}</span></div>${done.map(renderCard).join('')}</div>
</div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('plus',14,'#edd6b7')} Add Task</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW TEAM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewTeam(id){
const teams={1:{name:'Textile Arts Guild',lead:'Lucy Hartwell',desc:'Knitting, quilting, weaving, dyeing, embroidery ‚Äî all textile and fibre crafts. Organises retreats, workshops, and the community quilt project.',members:[
{name:'Lucy Hartwell',role:'Textile Lead',avatar:'LH',color:'var(--olive)'},{name:'Nina Chang',role:'Embroidery Lead',avatar:'NC',color:'var(--success)'},{name:'Ellen Morris',role:'Natural Dyer',avatar:'EM',color:'var(--brown-deep)'}
],projects:['Spring Quilting Retreat','Community Quilt ‚Äî Hospital Donation'],meetings:'Tuesdays 6pm'},
2:{name:'Ceramics Circle',lead:'Tom Pearson',desc:'Pottery, raku firing, hand-building, glazing, and kiln management. Runs beginner and advanced studio sessions.',members:[
{name:'Tom Pearson',role:'Ceramics Lead',avatar:'TP',color:'var(--info)'}
],projects:['Ceramics Studio Upgrade'],meetings:'Wednesdays 10am & Saturdays 9am'},
3:{name:'Fibre Arts Studio',lead:'Rosa Delgado',desc:'Spinning, weaving, tapestry, and fibre preparation. Runs beginner weaving courses and manages the loom room.',members:[
{name:'Rosa Delgado',role:'Weaving Instructor',avatar:'RD',color:'var(--brown-warm)'},{name:'Jake Turner',role:'Spinner & Fibre Artist',avatar:'JT',color:'#7a6a8a'}
],projects:['Beginner Weaving Course'],meetings:'Thursdays 2pm'},
4:{name:'Natural Dye Lab',lead:'Ellen Morris',desc:'Plant-based dyeing, eco-printing, mordant chemistry, and sustainable colour research. Maintains the dye kitchen and garden.',members:[
{name:'Ellen Morris',role:'Dye Specialist',avatar:'EM',color:'var(--brown-deep)'}
],projects:[],meetings:'Fridays 10am'},
5:{name:'Makers Market Committee',lead:'Ellen Morris',desc:'Organises the monthly makers market, manages stall bookings, promotion, and vendor relations.',members:[
{name:'Ellen Morris',role:'Treasurer',avatar:'EM',color:'var(--brown-deep)'},{name:'Lucy Hartwell',role:'Marketing',avatar:'LH',color:'var(--olive)'},{name:'Tom Pearson',role:'Logistics',avatar:'TP',color:'var(--info)'},{name:'Nina Chang',role:'Social Media',avatar:'NC',color:'var(--success)'}
],projects:['Makers Market April Setup'],meetings:'1st Monday of each month 7pm'}};
const t=teams[id]||teams[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('users',20,'var(--brown-warm)')}</div><div><div class="modal-title">${t.name}</div><div class="modal-subtitle">Lead: ${t.lead} ¬∑ ${t.members.length} members</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${t.desc}</p>
<div class="form-section-title">${I('users',15,'var(--brown-warm)')} Members</div>
${t.members.map(m=>`<div class="list-item"><div class="avatar" style="background:${m.color};width:36px;height:36px;font-size:12px">${m.avatar}</div><div class="list-item-content"><div class="list-item-title">${m.name}</div><div class="list-item-sub">${m.role}</div></div></div>`).join('')}
${t.projects.length?`<div class="form-section-title" style="margin-top:20px">${I('folder',15,'var(--brown-warm)')} Active Projects</div>
${t.projects.map(p=>`<div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;background:var(--cream-pale);margin-bottom:8px"><span style="font-size:13.5px">${p}</span></div>`).join('')}`:''}
<div class="form-section-title" style="margin-top:20px">${I('calendar',15,'var(--brown-warm)')} Meeting Schedule</div>
<div style="padding:12px 16px;border-radius:10px;background:var(--cream-pale);font-size:13.5px">${I('clock',14,'var(--text-muted)')} ${t.meetings}</div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn btn-primary">${I('msgCircle',14,'#edd6b7')} Message Team</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD PRODUCT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddProduct(){
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('plus',20,'var(--brown-warm)')}</div><div><div class="modal-title">Add Product</div><div class="modal-subtitle">Register a new product or service</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div class="form-group"><label class="form-label">Product Name <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="e.g. Hand-dyed Merino Skein"></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Type <span style="color:var(--danger)">*</span></label><select class="form-input"><option value="">Select type‚Ä¶</option><option>Application</option><option>Web App</option><option>Mobile App</option><option>Service</option><option>API</option><option>Library</option><option>Other</option></select></div>
<div class="form-group"><label class="form-label">Version</label><input class="form-input" placeholder="e.g. v1.0.0"></div>
</div>
<div class="form-group"><label class="form-label">Description</label><textarea class="form-input" placeholder="Describe the product‚Ä¶" style="min-height:80px"></textarea></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Status</label><select class="form-input"><option>Active</option><option>Beta</option><option>Development</option><option>Deprecated</option></select></div>
<div class="form-group"><label class="form-label">Owner / Team</label><select class="form-input"><option value="">Select‚Ä¶</option><option>Textile Arts Guild</option><option>Ceramics Circle</option><option>Fibre Arts Studio</option><option>Natural Dye Lab</option><option>Market Committee</option></select></div>
</div>
<div class="form-group"><label class="form-label">URL / Repository</label><input class="form-input" placeholder="https://‚Ä¶"></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Pricing Model</label><select class="form-input"><option>Free</option><option>Freemium</option><option>Subscription</option><option>One-time</option><option>Per-use</option></select></div>
<div class="form-group"><label class="form-label">User Count</label><input class="form-input" type="number" placeholder="0"></div>
</div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Cancel</button><button class="btn btn-primary">${I('check',14,'#edd6b7')} Save Product</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW PRODUCT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewProduct(id){
const products={1:{name:'Hand-dyed Merino Skein (100g)',type:'Yarn',ver:'Indigo',users:48,status:'Active',desc:'100g skeins of hand-dyed Australian merino wool in our signature indigo colourway. Dyed in small batches using natural indigo vat technique by Ellen Morris.',owner:'Natural Dye Lab',url:'',pricing:'$28 each',launched:'Jan 2026',updated:'Feb 28, 2026'},
2:{name:'Ceramic Mug ‚Äî Speckled Glaze',type:'Ceramics',ver:'Stoneware',users:32,status:'Active',desc:'Wheel-thrown stoneware mug with our popular speckled glaze finish. Dishwasher and microwave safe. Made by Tom Pearson.',owner:'Ceramics Circle',url:'',pricing:'$35 each',launched:'Nov 2025',updated:'Mar 1, 2026'},
3:{name:'Woven Table Runner',type:'Textiles',ver:'Cotton/Linen',users:14,status:'Active',desc:'Handwoven cotton and linen table runner in a classic twill pattern. Each piece is unique. Made by Rosa Delgado and the Fibre Arts Studio.',owner:'Fibre Arts Studio',url:'',pricing:'$65 each',launched:'Dec 2025',updated:'Feb 20, 2026'},
4:{name:'Beginner Knitting Kit',type:'Kit',ver:'v2',users:65,status:'Active',desc:'Complete starter kit with bamboo needles, 200g worsted yarn, printed pattern booklet, stitch markers, and video tutorial access. Designed by Nina Chang.',owner:'Textile Arts Guild',url:'',pricing:'$45 each',launched:'Sep 2025',updated:'Feb 25, 2026'},
5:{name:'Natural Dye Sampler Pack',type:'Supplies',ver:'5 colours',users:28,status:'Active',desc:'Sample pack of 5 natural dye extracts (indigo, madder, weld, logwood, cochineal) with mordant and instruction card. Great for experimentation.',owner:'Natural Dye Lab',url:'',pricing:'$22 each',launched:'Feb 2026',updated:'Feb 28, 2026'},
6:{name:'Handspun Art Yarn (50g)',type:'Yarn',ver:'Mixed fibre',users:0,status:'Beta',desc:'Unique textured art yarn hand-spun from a blend of merino, silk, and recycled sari. Limited edition ‚Äî currently sold out.',owner:'Fibre Arts Studio',url:'',pricing:'$38 each',launched:'Jan 2026',updated:'Feb 15, 2026'}};
const p=products[id]||products[1];
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('pie',20,'var(--brown-warm)')}</div><div><div class="modal-title">${p.name}</div><div class="modal-subtitle">${p.type} ¬∑ <code style="font-size:12px;background:var(--accent-light);padding:2px 8px;border-radius:4px">${p.ver}</code></div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="display:flex;gap:10px;margin-bottom:16px"><span class="badge badge-${p.status==='Active'?'open':'pending'}">${p.status}</span><span class="badge badge-info">${p.type}</span></div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${p.desc}</p>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:20px"><div style="text-align:center;flex:1"><div style="font-size:28px;font-weight:700;color:var(--text-heading)">${p.users.toLocaleString()}</div><div style="font-size:12px;color:var(--text-muted)">Users</div></div><div style="text-align:center;flex:1"><div style="font-size:16px;font-weight:600;color:var(--text-heading)">${p.pricing}</div><div style="font-size:12px;color:var(--text-muted)">Pricing</div></div><div style="text-align:center;flex:1"><div style="font-size:16px;font-weight:600;color:var(--text-heading)">${p.ver}</div><div style="font-size:12px;color:var(--text-muted)">Version</div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Owner</label><div style="font-size:14px">${p.owner}</div></div><div class="form-group"><label class="form-label">Launched</label><div style="font-size:14px">${p.launched}</div></div></div>
<div class="form-row"><div class="form-group"><label class="form-label">Last Updated</label><div style="font-size:14px">${p.updated}</div></div><div class="form-group"><label class="form-label">URL</label><div style="font-size:13px;font-family:monospace;color:var(--info)">${p.url||'‚Äî'}</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button><button class="btn">${I('settings',14)} Edit</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADD ORDER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openAddOrder(){
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('plus',20,'var(--brown-warm)')}</div><div><div class="modal-title">Add Order</div><div class="modal-subtitle">Create a new resource or service order</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div class="form-group"><label class="form-label">Order Description <span style="color:var(--danger)">*</span></label><input class="form-input" placeholder="e.g. SSL Certificate Renewal"></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Category <span style="color:var(--danger)">*</span></label><select class="form-input"><option value="">Select‚Ä¶</option><option>Infrastructure</option><option>Software License</option><option>Hardware</option><option>Service</option><option>Hosting</option><option>Domain</option><option>Certificate</option><option>Other</option></select></div>
<div class="form-group"><label class="form-label">Priority</label><select class="form-input"><option>Normal</option><option>Low</option><option>High</option><option>Urgent</option></select></div>
</div>
<div class="form-group"><label class="form-label">Details / Justification</label><textarea class="form-input" placeholder="Why is this order needed?" style="min-height:80px"></textarea></div>
<div class="form-row">
<div class="form-group"><label class="form-label">Requested By</label><select class="form-input"><option value="">Select member‚Ä¶</option><option>Lucy Hartwell</option><option>Tom Pearson</option><option>Rosa Delgado</option><option>Nina Chang</option><option>Ellen Morris</option><option>Jake Turner</option></select></div>
<div class="form-group"><label class="form-label">Needed By</label><input class="form-input" type="date"></div>
</div>
<div class="form-row">
<div class="form-group"><label class="form-label">Estimated Cost</label><div style="display:flex;gap:8px"><select class="form-input" style="width:80px"><option>USD</option><option>AUD</option><option>EUR</option></select><input class="form-input" type="number" placeholder="0.00" step="0.01"></div></div>
<div class="form-group"><label class="form-label">Vendor / Supplier</label><input class="form-input" placeholder="e.g. AWS, Namecheap"></div>
</div>
<div class="form-group"><label class="form-label">Attachments</label><div style="border:2px dashed var(--card-border);border-radius:10px;padding:20px;text-align:center;color:var(--text-muted);font-size:13px;cursor:pointer">${I('upload',20,'var(--text-muted)')}<div style="margin-top:6px">Drop files here or click to upload</div></div></div>
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Cancel</button><button class="btn btn-primary">${I('check',14,'#edd6b7')} Submit Order</button></div>
`,true);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIEW ORDER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openViewOrder(id){
const orders={'ORD-042':{desc:'Fabric ‚Äî Quilting Cotton (20m)',req:'Lucy Hartwell',type:'Materials',date:'Mar 1, 2026',status:'Pending',priority:'High',cost:'$320',vendor:'Makers Supply Co.',needed:'Mar 10, 2026',notes:'20 metres of quilting cotton in assorted prints and solids for the Spring Retreat participant kits. Need arrival before April 5 for kit packing.',history:[{act:'Order submitted',by:'Lucy Hartwell',date:'Mar 1, 2026'},{act:'Approved by Ellen Morris',by:'Ellen Morris',date:'Mar 1, 2026'}]},
'ORD-041':{desc:'Stoneware Clay (100kg)',req:'Tom Pearson',type:'Materials',date:'Feb 28, 2026',status:'Pending',priority:'Normal',cost:'$185',vendor:'Walker Ceramics',needed:'Mar 15, 2026',notes:'100kg of mid-fire stoneware clay for the ceramics studio. Current stock running low with Saturday sessions starting soon.',history:[{act:'Order submitted',by:'Tom Pearson',date:'Feb 28, 2026'}]},
'ORD-040':{desc:'Acid Dye Refill Kit',req:'Ellen Morris',type:'Supplies',date:'Feb 25, 2026',status:'Pending',priority:'Normal',cost:'$95',vendor:'Kraftkolour',needed:'Mar 20, 2026',notes:'Refill kit for acid dyes ‚Äî turquoise, scarlet, gold, and navy. For workshop use in the dye kitchen.',history:[{act:'Order submitted',by:'Ellen Morris',date:'Feb 25, 2026'},{act:'Under review',by:'Ellen Morris',date:'Feb 27, 2026'}]},
'ORD-039':{desc:'Heddle Reeds (10dpi, 12dpi)',req:'Rosa Delgado',type:'Equipment',date:'Feb 20, 2026',status:'Complete',priority:'Normal',cost:'$120',vendor:'Ashford NZ',needed:'Feb 28, 2026',notes:'Replacement heddle reeds for the 8 rigid heddle looms ‚Äî needed before the beginner weaving course starts.',history:[{act:'Order submitted',by:'Rosa Delgado',date:'Feb 20, 2026'},{act:'Approved',by:'Ellen Morris',date:'Feb 20, 2026'},{act:'Shipped from NZ',by:'Ashford NZ',date:'Feb 22, 2026'},{act:'Received & installed',by:'Rosa Delgado',date:'Feb 26, 2026'}]},
'ORD-038':{desc:'DMC Embroidery Floss (bulk)',req:'Nina Chang',type:'Materials',date:'Feb 15, 2026',status:'Complete',priority:'Low',cost:'$85',vendor:'Makers Supply Co.',needed:'Mar 1, 2026',notes:'Bulk order of 60 DMC embroidery floss skeins in assorted colours for the embroidery circle supplies.',history:[{act:'Order submitted',by:'Nina Chang',date:'Feb 15, 2026'},{act:'Approved & ordered',by:'Ellen Morris',date:'Feb 16, 2026'},{act:'Delivered',by:'Makers Supply Co.',date:'Feb 19, 2026'}]}};
const o=orders[id]||orders['ORD-042'];
const isPending=o.status==='Pending';
openModal(`
<div class="modal-header"><div class="modal-header-left"><div class="page-icon" style="width:38px;height:38px">${I('file',20,'var(--brown-warm)')}</div><div><div class="modal-title">${id} ‚Äî ${o.desc}</div><div class="modal-subtitle">Requested by ${o.req} ¬∑ ${o.date}</div></div></div><button class="modal-close" onclick="closeModal()">‚úï</button></div>
<div class="modal-body">
<div style="display:flex;gap:10px;margin-bottom:16px"><span class="badge badge-${isPending?'pending':'active'}">${o.status}</span><span class="badge badge-info">${o.type}</span>${o.priority==='High'||o.priority==='Urgent'?`<span class="badge badge-closed">${o.priority}</span>`:''}</div>
<div style="display:flex;gap:16px;padding:16px;border-radius:12px;background:var(--cream-pale);margin-bottom:20px"><div style="text-align:center;flex:1"><div style="font-size:18px;font-weight:700;color:var(--text-heading)">${o.cost}</div><div style="font-size:12px;color:var(--text-muted)">Estimated Cost</div></div><div style="text-align:center;flex:1"><div style="font-size:14px;font-weight:600;color:var(--text-heading)">${o.vendor}</div><div style="font-size:12px;color:var(--text-muted)">Vendor</div></div><div style="text-align:center;flex:1"><div style="font-size:14px;font-weight:600;color:${isPending?'var(--warning)':'var(--text-heading)'}">${o.needed}</div><div style="font-size:12px;color:var(--text-muted)">Needed By</div></div></div>
<div class="form-section-title">${I('file',15,'var(--brown-warm)')} Details</div>
<p style="color:var(--text-secondary);line-height:1.7;margin-bottom:20px">${o.notes}</p>
<div class="form-section-title">${I('clock',15,'var(--brown-warm)')} Timeline</div>
${o.history.map((h,i)=>`<div style="display:flex;gap:12px;padding:10px 0;${i<o.history.length-1?'border-bottom:1px solid var(--card-border)':''}">
<div style="width:10px;height:10px;border-radius:50%;background:${i===o.history.length-1?'var(--success)':'var(--text-muted)'};margin-top:5px;flex-shrink:0"></div>
<div><div style="font-size:13px;font-weight:500">${h.act}</div><div style="font-size:12px;color:var(--text-muted)">${h.by} ¬∑ ${h.date}</div></div>
</div>`).join('')}
</div>
<div class="modal-footer"><button class="btn" onclick="closeModal()">Close</button>${isPending?`<button class="btn" style="color:var(--danger)">Cancel Order</button><button class="btn btn-primary">${I('check',14,'#edd6b7')} Approve</button>`:''}</div>
`,true);
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
render();
</script>
</body>
</html>
